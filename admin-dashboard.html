<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plan de Vitalidad - Admin</title>
    <meta name="description" content="Painel administrativo para gerenciar o aplicativo de saúde e bem-estar">
    <meta name="theme-color" content="#10B981">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🌱</text></svg>">
    
    <!-- CSS -->
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="challenges-styles.css">
    <link rel="stylesheet" href="customization-styles.css">
    <link rel="stylesheet" href="support-styles.css">
    
    <!-- Inline CSS for GitHub Pages -->
    <style>
        /* Customization Styles */
        .customization-overview { margin-bottom: 2rem; }
        .overview-stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-bottom: 2rem; }
        .overview-stats .stat-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 12px; padding: 1.5rem; display: flex; align-items: center; gap: 1rem; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3); transition: all 0.3s ease; }
        .overview-stats .stat-card:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4); }
        .customization-container { display: grid; grid-template-columns: 1fr 400px; gap: 2rem; margin-top: 2rem; }
        .customization-section { background: #ffffff; border-radius: 12px; border: 1px solid #e5e7eb; overflow: hidden; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); }
        .customization-section .section-header { background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%); padding: 1.25rem 1.5rem; border-bottom: 1px solid #e5e7eb; display: flex; align-items: center; justify-content: space-between; }
        .customization-section .section-content { padding: 1.5rem; }
        .form-group { margin-bottom: 1.5rem; }
        .form-group label { display: block; margin-bottom: 0.5rem; font-weight: 500; color: #374151; font-size: 0.9rem; }
        .form-group input[type="text"] { width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 8px; font-size: 0.9rem; transition: all 0.3s ease; }
        .upload-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1rem; }
        .upload-area { border: 2px dashed #d1d5db; border-radius: 8px; padding: 1.5rem; text-align: center; cursor: pointer; transition: all 0.3s ease; min-height: 120px; display: flex; align-items: center; justify-content: center; }
        .color-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; }
        .tone-selector { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 1rem; }
        .tone-option { background: #f8f9fa; border: 2px solid #e9ecef; border-radius: 8px; padding: 1rem; text-align: center; cursor: pointer; transition: all 0.3s ease; }
        .tone-option.active { background: #e8f5e8; border-color: #00d4aa; color: #00a693; }
        .layout-selector { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; }
        .layout-option { border: 2px solid #e5e7eb; border-radius: 12px; padding: 1rem; cursor: pointer; transition: all 0.3s ease; text-align: center; }
        .layout-option.active { border-color: #6366f1; background: #eff6ff; }
        .preview-section { background: white; border-radius: 12px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); overflow: hidden; }
        .preview-device-frame { background: #1f2937; border-radius: 20px; padding: 20px; margin: 0 auto; }
        .preview-device-frame.mobile { width: 280px; }
        .preview-screen { background: white; border-radius: 12px; overflow: hidden; height: 500px; }
        
        /* Support Styles */
        .support-overview { margin-bottom: 2rem; }
        .support-stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-bottom: 2rem; }
        .support-stats .stat-card.ai { background: linear-gradient(135deg, #00d4aa 0%, #00a693 100%); }
        .support-stats .stat-card.manual { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        .support-container { display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-top: 2rem; }
        .support-section { background: white; border-radius: 12px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); overflow: hidden; margin-bottom: 2rem; }
        .support-section-header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 1.5rem; display: flex; align-items: center; justify-content: space-between; gap: 1rem; }
        .support-section-header.ai { background: linear-gradient(135deg, #00d4aa 0%, #00a693 100%); }
        .support-section-header.manual { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        .support-section-content { padding: 1.5rem; }
        .ai-toggle { display: flex; align-items: center; justify-content: space-between; background: #f8f9fa; padding: 1rem; border-radius: 8px; border: 2px solid #e9ecef; margin-bottom: 1rem; }
        .ai-toggle.active { background: #e8f5e8; border-color: #00d4aa; }
        .toggle-switch { position: relative; width: 60px; height: 30px; background: #ddd; border-radius: 15px; cursor: pointer; transition: all 0.3s ease; }
        .toggle-switch.active { background: #00d4aa; }
        .toggle-switch::after { content: ''; position: absolute; top: 3px; left: 3px; width: 24px; height: 24px; background: white; border-radius: 50%; transition: all 0.3s ease; }
        .toggle-switch.active::after { transform: translateX(30px); }
        .training-editor { border: 2px solid #e9ecef; border-radius: 8px; overflow: hidden; }
        .training-editor textarea { width: 100%; min-height: 200px; border: none; resize: vertical; font-family: 'Courier New', monospace; font-size: 0.9rem; line-height: 1.5; padding: 1rem; }
        .support-inbox { max-height: 600px; overflow-y: auto; }
        .support-ticket { background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; padding: 1rem; margin-bottom: 1rem; transition: all 0.3s ease; cursor: pointer; }
        .support-ticket:hover { box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); transform: translateY(-2px); }
        .support-ticket.pending { border-left: 4px solid #ffc107; }
        .support-ticket.responded { border-left: 4px solid #28a745; }
        .support-ticket.escalated { border-left: 4px solid #dc3545; }
        .response-editor { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.5); display: none; align-items: center; justify-content: center; z-index: 1000; }
        .response-editor.active { display: flex; }
        .response-editor-modal { background: white; border-radius: 12px; width: 90%; max-width: 800px; max-height: 90vh; overflow-y: auto; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); }
        .response-textarea { width: 100%; min-height: 150px; border: 2px solid #e9ecef; border-radius: 8px; padding: 1rem; resize: vertical; font-family: inherit; line-height: 1.5; }
        .quick-response-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.5rem; margin-top: 0.5rem; }
        .quick-response-btn { background: #e9ecef; border: none; padding: 0.5rem; border-radius: 6px; cursor: pointer; font-size: 0.8rem; transition: all 0.3s ease; }
        .filter-btn { padding: 0.5rem 1rem; border: 2px solid #e9ecef; background: #f8f9fa; border-radius: 20px; cursor: pointer; transition: all 0.3s ease; font-size: 0.9rem; }
        .filter-btn.active { background: #f093fb; border-color: #f093fb; color: white; }
        .support-stats-dashboard { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin-top: 2rem; }
        .stats-chart { background: white; border-radius: 12px; padding: 1.5rem; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); }
        .chart-placeholder { height: 200px; background: #f8f9fa; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: #666; font-style: italic; }
        
        /* Additional styles */
        .user-avatar { width: 32px; height: 32px; border-radius: 50%; background: linear-gradient(135deg, #667eea, #764ba2); display: flex; align-items: center; justify-content: center; color: white; font-size: 0.8rem; font-weight: bold; }
        .ticket-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.5rem; }
        .ticket-user { display: flex; align-items: center; gap: 0.5rem; font-weight: 600; }
        .ticket-meta { display: flex; gap: 1rem; font-size: 0.8rem; color: #666; }
        .ticket-status { padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.7rem; font-weight: 600; text-transform: uppercase; }
        .ticket-status.pending { background: #fff3cd; color: #856404; }
        .ticket-status.responded { background: #d4edda; color: #155724; }
        .ticket-status.escalated { background: #f8d7da; color: #721c24; }
        .ticket-message { margin: 0.5rem 0; color: #333; line-height: 1.5; }
        .ticket-actions { display: flex; gap: 0.5rem; margin-top: 1rem; }
        .btn { background: #10b981; color: white; border: none; padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer; font-size: 0.9rem; transition: all 0.3s ease; }
        .btn:hover { background: #059669; }
        .btn-small { padding: 0.25rem 0.75rem; font-size: 0.8rem; }
        .btn-primary { background: #6366f1; }
        .btn-primary:hover { background: #4f46e5; }
        .btn-secondary { background: #6b7280; }
        .btn-secondary:hover { background: #4b5563; }
        .response-editor-header { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; padding: 1.5rem; display: flex; align-items: center; justify-content: space-between; }
        .response-editor-content { padding: 1.5rem; }
        .original-message { background: #f8f9fa; border-left: 4px solid #f093fb; padding: 1rem; border-radius: 8px; margin-bottom: 1.5rem; }
        .response-actions { display: flex; gap: 1rem; justify-content: space-between; align-items: center; margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid #e9ecef; }
        .ai-config-grid { display: grid; gap: 1.5rem; }
        .ai-toggle-info h4 { margin: 0 0 0.25rem 0; color: #333; }
        .ai-toggle-info p { margin: 0; font-size: 0.9rem; color: #666; }
        .training-editor-header { background: #f8f9fa; padding: 1rem; border-bottom: 1px solid #e9ecef; display: flex; align-items: center; justify-content: space-between; }
        .training-stats { display: flex; gap: 1rem; font-size: 0.8rem; color: #666; }
        .limits-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; }
        .api-status { display: flex; align-items: center; gap: 0.5rem; margin-top: 0.5rem; font-size: 0.9rem; }
        .api-status.connected { color: #00d4aa; }
        .api-status.disconnected { color: #e74c3c; }
        
        /* ===== AUTORESPONDER STYLES ===== */
        .autoresponder-overview { margin-bottom: 2rem; }
        .autoresponder-stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-bottom: 2rem; }
        .autoresponder-stats .stat-card { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 12px; padding: 1.5rem; display: flex; align-items: center; gap: 1rem; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3); transition: all 0.3s ease; }
        .autoresponder-stats .stat-card:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4); }
        .autoresponder-stats .stat-card.emails { background: linear-gradient(135deg, #00d4aa 0%, #00a693 100%); }
        .autoresponder-stats .stat-card.automations { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        .autoresponder-stats .stat-card.sent { background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%); color: #333; }
        .autoresponder-stats .stat-card.opened { background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); color: #333; }
        .autoresponder-stats .stat-card .stat-icon { background: rgba(255, 255, 255, 0.2); width: 60px; height: 60px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; }
        .autoresponder-stats .stat-card .stat-content h4 { margin: 0; font-size: 1.25rem; font-weight: 600; }
        .autoresponder-stats .stat-card .stat-content p { margin: 0.25rem 0 0 0; opacity: 0.9; font-size: 0.9rem; }
        .autoresponder-container { display: grid; grid-template-columns: 1fr; gap: 2rem; margin-top: 2rem; }
        .autoresponder-section { background: white; border-radius: 12px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); overflow: hidden; margin-bottom: 2rem; }
        .autoresponder-section-header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 1.5rem; display: flex; align-items: center; justify-content: space-between; gap: 1rem; }
        .autoresponder-section-header.emails { background: linear-gradient(135deg, #00d4aa 0%, #00a693 100%); }
        .autoresponder-section-header.automations { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        .autoresponder-section-header.integrations { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .autoresponder-section-header h3 { margin: 0; display: flex; align-items: center; gap: 0.5rem; flex: 1; }
        .autoresponder-section-content { padding: 1.5rem; }
        .create-email-btn { background: linear-gradient(135deg, #00d4aa 0%, #00a693 100%); color: white; border: none; padding: 1rem 2rem; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 0.5rem; transition: all 0.3s ease; }
        .create-email-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(0, 212, 170, 0.3); }
        .email-list { display: grid; gap: 1rem; }
        .email-item { background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; padding: 1.5rem; transition: all 0.3s ease; cursor: pointer; }
        .email-item:hover { box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); transform: translateY(-2px); }
        .email-item.active { border-color: #00d4aa; background: #f0fdf4; }
        .email-item.inactive { opacity: 0.6; }
        .email-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem; }
        .email-title { font-weight: 600; font-size: 1.1rem; color: #1f2937; margin: 0; }
        .email-subject { color: #6b7280; font-size: 0.9rem; margin: 0.25rem 0 0 0; }
        .email-meta { display: flex; gap: 1rem; align-items: center; margin-bottom: 1rem; }
        .email-language { background: #eff6ff; color: #1d4ed8; padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.8rem; font-weight: 500; }
        .email-trigger { background: #f3e8ff; color: #7c3aed; padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.8rem; font-weight: 500; }
        .email-status { padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.8rem; font-weight: 500; }
        .email-status.active { background: #d1fae5; color: #065f46; }
        .email-status.inactive { background: #fee2e2; color: #991b1b; }
        .email-stats { display: flex; gap: 1.5rem; align-items: center; margin-bottom: 1rem; font-size: 0.9rem; color: #6b7280; }
        .email-actions { display: flex; gap: 0.5rem; }
        .email-actions .btn { font-size: 0.8rem; padding: 0.25rem 0.75rem; }
        .rich-text-editor { border: 2px solid #e9ecef; border-radius: 8px; overflow: hidden; }
        .editor-toolbar { background: #f8f9fa; padding: 0.75rem; border-bottom: 1px solid #e9ecef; display: flex; gap: 0.5rem; flex-wrap: wrap; }
        .editor-btn { background: none; border: 1px solid #d1d5db; padding: 0.5rem; border-radius: 4px; cursor: pointer; transition: all 0.3s ease; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; }
        .editor-btn:hover { background: #e5e7eb; }
        .editor-btn.active { background: #6366f1; color: white; border-color: #6366f1; }
        .editor-separator { width: 1px; background: #d1d5db; margin: 0 0.5rem; }
        .editor-content { min-height: 200px; padding: 1rem; border: none; outline: none; font-family: inherit; font-size: 0.9rem; line-height: 1.6; }
        .editor-content:empty::before { content: attr(placeholder); color: #9ca3af; }
        .target-selector { display: grid; gap: 0.75rem; margin-top: 0.5rem; }
        .target-option { display: flex; align-items: center; gap: 0.75rem; padding: 1rem; border: 2px solid #e5e7eb; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; }
        .target-option:hover { border-color: #6366f1; background: #f8fafc; }
        .target-option.selected { border-color: #6366f1; background: #eff6ff; }
        .target-option input[type="radio"] { display: none; }
        .target-option .radio-custom { width: 20px; height: 20px; border: 2px solid #d1d5db; border-radius: 50%; position: relative; transition: all 0.3s ease; }
        .target-option.selected .radio-custom { border-color: #6366f1; }
        .target-option.selected .radio-custom::after { content: ''; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 10px; height: 10px; background: #6366f1; border-radius: 50%; }
        .target-option .option-info h4 { margin: 0 0 0.25rem 0; font-size: 0.9rem; font-weight: 600; color: #374151; }
        .target-option .option-info p { margin: 0; font-size: 0.8rem; color: #6b7280; }
        .schedule-selector { display: grid; gap: 0.75rem; margin-top: 0.5rem; }
        .schedule-option { display: flex; align-items: center; gap: 0.75rem; padding: 1rem; border: 2px solid #e5e7eb; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; }
        .schedule-option:hover { border-color: #f59e0b; background: #fffbeb; }
        .schedule-option.selected { border-color: #f59e0b; background: #fffbeb; }
        .schedule-option input[type="radio"] { display: none; }
        .schedule-option .radio-custom { width: 20px; height: 20px; border: 2px solid #d1d5db; border-radius: 50%; position: relative; transition: all 0.3s ease; }
        .schedule-option.selected .radio-custom { border-color: #f59e0b; }
        .schedule-option.selected .radio-custom::after { content: ''; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 10px; height: 10px; background: #f59e0b; border-radius: 50%; }
        .schedule-details { margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 8px; display: none; }
        .schedule-details.active { display: block; }
        .automation-events { display: grid; gap: 1rem; }
        .event-item { background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; padding: 1.5rem; transition: all 0.3s ease; }
        .event-item.active { border-color: #f093fb; background: #fdf2f8; }
        .event-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem; }
        .event-toggle { position: relative; width: 50px; height: 25px; background: #ddd; border-radius: 15px; cursor: pointer; transition: all 0.3s ease; }
        .event-toggle.active { background: #f093fb; }
        .event-toggle::after { content: ''; position: absolute; top: 2px; left: 2px; width: 21px; height: 21px; background: white; border-radius: 50%; transition: all 0.3s ease; }
        .event-toggle.active::after { transform: translateX(25px); }
        .event-info h4 { margin: 0 0 0.25rem 0; font-size: 1rem; font-weight: 600; color: #374151; }
        .event-info p { margin: 0; font-size: 0.9rem; color: #6b7280; }
        .event-config { margin-top: 1rem; padding-top: 1rem; border-top: 1px solid #e9ecef; display: none; }
        .event-config.active { display: block; }
        .integration-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; }
        .integration-card { background: #f8f9fa; border: 2px solid #e9ecef; border-radius: 12px; padding: 1.5rem; text-align: center; transition: all 0.3s ease; }
        .integration-card:hover { border-color: #6366f1; transform: translateY(-2px); }
        .integration-card.connected { border-color: #10b981; background: #f0fdf4; }
        .integration-icon { width: 60px; height: 60px; margin: 0 auto 1rem; background: #e5e7eb; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; }
        .integration-card.connected .integration-icon { background: #d1fae5; color: #065f46; }
        .integration-name { font-weight: 600; font-size: 1.1rem; margin-bottom: 0.5rem; color: #374151; }
        .integration-status { font-size: 0.9rem; color: #6b7280; margin-bottom: 1rem; }
        .integration-card.connected .integration-status { color: #065f46; }
        .search-filters { display: flex; gap: 1rem; margin-bottom: 2rem; flex-wrap: wrap; align-items: center; }
        .search-box { position: relative; flex: 1; min-width: 250px; }
        .search-box input { width: 100%; padding: 0.75rem 1rem 0.75rem 2.5rem; border: 1px solid #d1d5db; border-radius: 8px; font-size: 0.9rem; }
        .search-box i { position: absolute; top: 50%; left: 0.75rem; transform: translateY(-50%); color: #6b7280; }
        .filter-select { padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 8px; font-size: 0.9rem; background: white; min-width: 150px; }
        .email-modal { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.5); display: none; align-items: center; justify-content: center; z-index: 1000; padding: 1rem; }
        .email-modal.active { display: flex; }
        .email-modal-content { background: white; border-radius: 12px; width: 100%; max-width: 800px; max-height: 90vh; overflow-y: auto; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); }
        .email-modal-header { background: linear-gradient(135deg, #00d4aa 0%, #00a693 100%); color: white; padding: 1.5rem; display: flex; align-items: center; justify-content: space-between; }
        .email-modal-body { padding: 2rem; }
        .email-modal-footer { padding: 1.5rem 2rem; border-top: 1px solid #e9ecef; display: flex; gap: 1rem; justify-content: flex-end; }
        .stats-dashboard { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin-top: 2rem; }
        .stats-chart { background: white; border-radius: 12px; padding: 1.5rem; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); }
        .stats-chart h4 { margin: 0 0 1rem 0; color: #333; }
        .chart-placeholder { height: 200px; background: #f8f9fa; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: #666; font-style: italic; }
        .notification { position: fixed; top: 20px; right: 20px; background: white; border-radius: 8px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15); padding: 1rem; z-index: 1001; transform: translateX(100%); transition: transform 0.3s ease; }
        .notification.show { transform: translateX(0); }
        .notification.success { border-left: 4px solid #28a745; }
        .notification.error { border-left: 4px solid #dc3545; }
        .notification.warning { border-left: 4px solid #ffc107; }
        .notification.info { border-left: 4px solid #17a2b8; }
        
        /* ===== GENERAL SETTINGS STYLES ===== */
        .general-settings-overview { margin-bottom: 2rem; }
        .quick-actions-bar { display: flex; gap: 1rem; margin-bottom: 2rem; flex-wrap: wrap; }
        .quick-action-btn { background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%); color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 8px; font-size: 0.9rem; font-weight: 500; cursor: pointer; display: flex; align-items: center; gap: 0.5rem; transition: all 0.3s ease; }
        .quick-action-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(99, 102, 241, 0.3); }
        .settings-categories-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 2rem; }
        .settings-category { background: white; border-radius: 12px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); overflow: hidden; margin-bottom: 2rem; transition: all 0.3s ease; }
        .settings-category:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15); }
        .category-header { background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%); padding: 1.5rem; display: flex; align-items: center; gap: 1rem; border-bottom: 1px solid #e5e7eb; }
        .category-icon { font-size: 2rem; }
        .category-info { flex: 1; }
        .category-info h3 { margin: 0 0 0.25rem 0; font-size: 1.1rem; font-weight: 600; color: #1f2937; }
        .category-info p { margin: 0; font-size: 0.9rem; color: #6b7280; }
        .status-indicator { width: 12px; height: 12px; border-radius: 50%; }
        .status-indicator.active { background: #10b981; }
        .status-indicator.warning { background: #f59e0b; }
        .status-indicator.error { background: #ef4444; }
        .category-content { padding: 1.5rem; }
        .form-group { margin-bottom: 1.5rem; }
        .form-group:last-child { margin-bottom: 0; }
        .form-group label { display: block; margin-bottom: 0.5rem; font-weight: 500; color: #374151; font-size: 0.9rem; }
        .form-group input, .form-group select, .form-group textarea { width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 8px; font-size: 0.9rem; transition: all 0.3s ease; }
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus { outline: none; border-color: #6366f1; box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1); }
        .form-group small { display: block; margin-top: 0.5rem; font-size: 0.8rem; color: #6b7280; }
        .form-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; }
        .language-toggles, .currency-toggles { display: grid; gap: 0.75rem; }
        .toggle-option { display: flex; align-items: center; gap: 0.75rem; cursor: pointer; }
        .toggle-slider { position: relative; width: 50px; height: 25px; background: #ddd; border-radius: 15px; transition: all 0.3s ease; }
        .toggle-option input:checked + .toggle-slider { background: #6366f1; }
        .toggle-slider::after { content: ''; position: absolute; top: 2px; left: 2px; width: 21px; height: 21px; background: white; border-radius: 50%; transition: all 0.3s ease; }
        .toggle-option input:checked + .toggle-slider::after { transform: translateX(25px); }
        .toggle-option input { display: none; }
        .toggle-label { font-size: 0.9rem; font-weight: 500; }
        .checkbox-label { display: flex; align-items: center; gap: 0.75rem; cursor: pointer; }
        .checkbox-custom { width: 20px; height: 20px; border: 2px solid #d1d5db; border-radius: 4px; position: relative; transition: all 0.3s ease; }
        .checkbox-label input:checked + .checkbox-custom { background: #6366f1; border-color: #6366f1; }
        .checkbox-label input:checked + .checkbox-custom::after { content: '✓'; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; font-size: 0.8rem; font-weight: bold; }
        .checkbox-label input { display: none; }
        .smtp-config { background: #f8f9fa; padding: 1rem; border-radius: 8px; margin: 1rem 0; }
        .smtp-config h5 { margin: 0 0 1rem 0; color: #374151; display: flex; align-items: center; gap: 0.5rem; }
        .settings-save-actions { display: flex; justify-content: space-between; align-items: center; margin-top: 3rem; padding: 2rem; background: #f8f9fa; border-radius: 12px; }
        .save-actions-left, .save-actions-right { display: flex; gap: 1rem; }
        .btn-large { padding: 1rem 2rem; font-size: 1rem; font-weight: 600; }
        
        /* ===== CAROUSEL STYLES ===== */
        .carousel-nav-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 0;
        }

        .carousel-tab-btn {
            background: transparent;
            border: none;
            padding: 1rem 1.5rem;
            border-radius: 8px 8px 0 0;
            color: #6c757d;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            border-bottom: 3px solid transparent;
        }

        .carousel-tab-btn:hover {
            background: #f8f9fa;
            color: #495057;
        }

        .carousel-tab-btn.active {
            background: #fff;
            color: #007bff;
            border-bottom-color: #007bff;
            box-shadow: 0 -2px 8px rgba(0,123,255,0.1);
        }

        .carousel-tab-content {
            display: none;
            padding: 2rem 0;
        }

        .carousel-tab-content.active {
            display: block;
        }

        /* Carousel Images Grid */
        .carousel-images-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .carousel-image-card {
            background: #fff;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .carousel-image-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

        .image-preview {
            position: relative;
            height: 200px;
            overflow: hidden;
        }

        .image-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .image-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .carousel-image-card:hover .image-overlay {
            opacity: 1;
        }

        .image-info {
            padding: 1rem;
        }

        .image-info h4 {
            margin: 0 0 0.5rem 0;
            color: #333;
            font-size: 1.1rem;
        }

        .image-info p {
            margin: 0 0 1rem 0;
            color: #666;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .image-stats {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            font-size: 0.85rem;
            color: #6c757d;
        }

        .image-stats .ctr {
            margin-left: auto;
            font-weight: 600;
            color: #28a745;
        }

        .image-controls {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .position-badge {
            background: #007bff;
            color: #fff;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        /* Banners Section */
        .banners-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .banner-section-card {
            background: #fff;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .banner-section-card:hover {
            transform: translateY(-2px);
        }

        .banner-section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }

        .banner-section-header h4 {
            margin: 0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #333;
        }

        .banner-preview {
            height: 120px;
            background: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .banner-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .banner-preview.no-banner {
            color: #6c757d;
            font-style: italic;
        }

        .banner-info {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0,0,0,0.8));
            color: #fff;
            padding: 1rem;
        }

        .banner-info h5 {
            margin: 0 0 0.25rem 0;
            font-size: 0.9rem;
        }

        .banner-info p {
            margin: 0;
            font-size: 0.8rem;
            opacity: 0.9;
        }

        /* Templates Section */
        .templates-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .template-card {
            background: #fff;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .template-card:hover {
            transform: translateY(-2px);
        }

        .template-preview {
            position: relative;
            height: 150px;
            overflow: hidden;
        }

        .template-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .premium-badge {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: #ffc107;
            color: #000;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .template-info {
            padding: 1rem;
        }

        .template-info h4 {
            margin: 0 0 0.5rem 0;
            color: #333;
        }

        .template-info p {
            margin: 0 0 1rem 0;
            color: #666;
            font-size: 0.9rem;
        }

        .template-actions {
            display: flex;
            gap: 0.5rem;
        }

        .template-actions .btn {
            flex: 1;
        }

        /* Visual Editor Section */
        .editor-section {
            background: #fff;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .editor-toolbar {
            background: #f8f9fa;
            padding: 1rem;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .toolbar-group {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .tool-btn {
            background: #fff;
            border: 1px solid #dee2e6;
            padding: 0.5rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .tool-btn:hover {
            background: #e9ecef;
            border-color: #adb5bd;
        }

        .tool-btn.active {
            background: #007bff;
            border-color: #007bff;
            color: #fff;
        }

        .editor-workspace {
            display: flex;
            min-height: 500px;
        }

        .editor-canvas-container {
            flex: 1;
            padding: 1rem;
            background: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .editor-canvas-container canvas {
            border: 1px solid #dee2e6;
            border-radius: 8px;
            background: #fff;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .editor-properties {
            width: 280px;
            background: #fff;
            border-left: 1px solid #e9ecef;
            padding: 1rem;
        }

        .editor-properties h4 {
            margin: 0 0 1rem 0;
            color: #333;
            font-size: 1.1rem;
        }

        .property-group {
            margin-bottom: 1.5rem;
        }

        .property-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #495057;
        }

        .dimension-inputs {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .dimension-inputs input {
            flex: 1;
            padding: 0.5rem;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 0.9rem;
        }

        .filter-controls {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .filter-controls label {
            font-size: 0.85rem;
            margin-bottom: 0.25rem;
        }

        .filter-controls input[type="range"] {
            width: 100%;
        }

        /* Analytics Section */
        .analytics-controls {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
        }

        .date-range-picker {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .date-range-picker label {
            font-weight: 500;
            color: #495057;
        }

        .date-range-picker select,
        .date-range-picker input[type="date"] {
            padding: 0.5rem;
            border: 1px solid #ced4da;
            border-radius: 4px;
            background: #fff;
        }

        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .analytics-card {
            background: #fff;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .analytics-card h4 {
            margin: 0 0 1rem 0;
            color: #333;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .chart-container {
            height: 200px;
            background: #f8f9fa;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6c757d;
            font-style: italic;
        }

        .top-images-list {
            max-height: 200px;
            overflow-y: auto;
        }

        .detailed-analytics {
            background: #fff;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .detailed-analytics h4 {
            margin: 0 0 1rem 0;
            color: #333;
        }

        .analytics-table-container {
            overflow-x: auto;
        }

        .analytics-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }

        .analytics-table th,
        .analytics-table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
        }

        .analytics-table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #495057;
        }

        .analytics-table tr:hover {
            background: #f8f9fa;
        }

        /* Carousel Settings */
        .carousel-settings {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        .carousel-settings label {
            color: #495057;
            font-weight: 500;
        }

        .carousel-settings input[type="number"] {
            padding: 0.25rem 0.5rem;
            border: 1px solid #ced4da;
            border-radius: 4px;
            text-align: center;
        }

        /* Empty States */
        .empty-state {
            text-align: center;
            padding: 3rem;
            color: #6c757d;
            grid-column: 1 / -1;
        }

        .empty-state i {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        .empty-state h3 {
            margin: 0 0 0.5rem 0;
            color: #495057;
        }

                 .empty-state p {
             margin: 0 0 1.5rem 0;
         }

         /* Modal Enhancements */
         .modal-content.large {
             max-width: 800px;
             width: 90%;
         }

         .image-preview-container {
             margin-bottom: 1.5rem;
         }

         .image-details h4 {
             margin: 0 0 0.5rem 0;
             color: #333;
             font-size: 1.2rem;
         }

         .image-details p {
             margin: 0 0 1rem 0;
             color: #666;
             line-height: 1.5;
         }

         .image-meta {
             display: flex;
             gap: 1rem;
             margin-bottom: 1rem;
             flex-wrap: wrap;
         }

         .image-meta span {
             background: #f8f9fa;
             padding: 0.5rem;
             border-radius: 4px;
             font-size: 0.9rem;
         }

         .link-info {
             background: #e7f3ff;
             padding: 0.75rem;
             border-radius: 4px;
             border-left: 3px solid #007bff;
             margin-top: 1rem;
         }

         /* Top Images List */
         .top-image-item {
             display: flex;
             align-items: center;
             gap: 0.75rem;
             padding: 0.5rem;
             border-bottom: 1px solid #e9ecef;
             font-size: 0.9rem;
         }

         .top-image-item:last-child {
             border-bottom: none;
         }

         .top-image-item .rank {
             font-weight: 600;
             color: #007bff;
             min-width: 30px;
         }

         .top-image-item .title {
             flex: 1;
             color: #333;
         }

         .top-image-item .views {
             color: #6c757d;
             font-size: 0.8rem;
         }

         .no-data {
             text-align: center;
             color: #6c757d;
             font-style: italic;
             padding: 1rem;
         }

        /* Responsive */
        @media (max-width: 768px) {
            .customization-container, .support-container { grid-template-columns: 1fr; }
            .overview-stats, .support-stats, .autoresponder-stats { grid-template-columns: 1fr; }
            .integration-grid { grid-template-columns: 1fr; }
            .search-filters { flex-direction: column; align-items: stretch; }
            .search-box { min-width: auto; }
            .email-modal-content { margin: 1rem; max-width: none; }
            .stats-dashboard { grid-template-columns: 1fr; }
            .settings-categories-grid { grid-template-columns: 1fr; }
            .quick-actions-bar { flex-direction: column; }
            .settings-save-actions { flex-direction: column; gap: 1rem; }
            .save-actions-left, .save-actions-right { width: 100%; justify-content: center; }
            
            /* Carousel Responsive */
            .carousel-nav-tabs {
                flex-direction: column;
                gap: 0;
            }

            .carousel-tab-btn {
                border-radius: 0;
                border-bottom: 1px solid #e9ecef;
            }

            .carousel-images-grid,
            .banners-grid,
            .templates-grid {
                grid-template-columns: 1fr;
            }

            .editor-workspace {
                flex-direction: column;
            }

            .editor-properties {
                width: 100%;
                border-left: none;
                border-top: 1px solid #e9ecef;
            }

            .analytics-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
    
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-leaf"></i>
                    <span class="logo-text">Plan de Vitalidad</span>
                </div>
                <button class="sidebar-toggle" id="sidebarToggle">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
            
            <div class="sidebar-menu">
                <ul class="menu-list">
                    <li class="menu-item active" data-tab="dashboard">
                        <i class="fas fa-chart-line"></i>
                        <span class="menu-text" data-i18n="dashboard">Dashboard</span>
                    </li>
                    <li class="menu-item" data-tab="users">
                        <i class="fas fa-users"></i>
                        <span class="menu-text" data-i18n="users">Usuários</span>
                    </li>
                    <li class="menu-item" data-tab="digital-products">
                        <i class="fas fa-laptop"></i>
                        <span class="menu-text" data-i18n="digital-products">Produtos Digitais</span>
                    </li>
                    <li class="menu-item" data-tab="bonus-materials">
                        <i class="fas fa-gift"></i>
                        <span class="menu-text" data-i18n="bonus-materials">Bônus e Materiais Extras</span>
                    </li>
                    <li class="menu-item" data-tab="content">
                        <i class="fas fa-file-alt"></i>
                        <span class="menu-text" data-i18n="content">Conteúdos</span>
                    </li>
                    <li class="menu-item" data-tab="challenges">
                        <i class="fas fa-trophy"></i>
                        <span class="menu-text" data-i18n="challenges">Desafios</span>
                    </li>
                    <li class="menu-item" data-tab="creatives">
                        <i class="fas fa-palette"></i>
                        <span class="menu-text" data-i18n="creatives">Criativos e Campanhas</span>
                    </li>
                    <li class="menu-item" data-tab="carousel">
                        <i class="fas fa-images"></i>
                        <span class="menu-text" data-i18n="carousel">Imagens do Carrossel</span>
                    </li>
                    <li class="menu-item" data-tab="store">
                        <i class="fas fa-store"></i>
                        <span class="menu-text" data-i18n="store">Loja (Tienda)</span>
                    </li>
                    <li class="menu-item" data-tab="sales">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="menu-text" data-i18n="sales">Vendas - Kiwify</span>
                    </li>
                    <li class="menu-item" data-tab="notifications">
                        <i class="fas fa-bell"></i>
                        <span class="menu-text" data-i18n="notifications">Notificações Push</span>
                    </li>
                    <li class="menu-item" data-tab="integrations">
                        <i class="fas fa-plug"></i>
                        <span class="menu-text" data-i18n="integrations">Integrações e APIs</span>
                    </li>
                    <li class="menu-item" data-tab="reports">
                        <i class="fas fa-chart-bar"></i>
                        <span class="menu-text" data-i18n="reports">Relatórios</span>
                    </li>
                    <li class="menu-item" data-tab="autoresponder">
                        <i class="fas fa-envelope-open-text"></i>
                        <span class="menu-text" data-i18n="autoresponder">Autoresponder</span>
                    </li>
                    <li class="menu-item" data-tab="app-customization">
                        <i class="fas fa-paint-brush"></i>
                        <span class="menu-text" data-i18n="app-customization">Personalização do App</span>
                    </li>
                    <li class="menu-item" data-tab="gamification">
                        <i class="fas fa-gamepad"></i>
                        <span class="menu-text" data-i18n="gamification">Gamificação</span>
                    </li>
                    <li class="menu-item" data-tab="general-settings">
                        <i class="fas fa-cog"></i>
                        <span class="menu-text" data-i18n="general-settings">Configurações Gerais</span>
                    </li>
                    <li class="menu-item" data-tab="support">
                        <i class="fas fa-robot"></i>
                        <span class="menu-text" data-i18n="support">Central de Suporte com IA</span>
                    </li>
                </ul>
            </div>
        </nav>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <button class="mobile-menu-toggle" id="mobileMenuToggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1 class="page-title" data-i18n="dashboard">Dashboard</h1>
                </div>
                
                <div class="header-right">
                    <!-- Language Selector -->
                    <div class="language-selector">
                        <button class="language-btn" id="languageBtn">
                            <i class="fas fa-globe"></i>
                            <span id="currentLanguage">PT</span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="language-dropdown" id="languageDropdown">
                            <div class="language-option" data-lang="pt">
                                <span class="flag">🇧🇷</span>
                                <span>Português</span>
                            </div>
                            <div class="language-option" data-lang="es">
                                <span class="flag">🇪🇸</span>
                                <span>Español</span>
                            </div>
                            <div class="language-option" data-lang="en">
                                <span class="flag">🇺🇸</span>
                                <span>English</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Theme Toggle -->
                    <button class="theme-toggle" id="themeToggle">
                        <i class="fas fa-moon"></i>
                    </button>
                    
                    <!-- Logout Button -->
                    <button class="logout-btn" id="logoutBtn">
                        <i class="fas fa-sign-out-alt"></i>
                        <span data-i18n="logout">Sair</span>
                    </button>
                </div>
            </header>

            <!-- Content Area -->
            <main class="content-area">
                <!-- Dashboard Tab -->
                <div class="tab-content active" id="dashboard">
                    <div class="content-header">
                        <h2 data-i18n="dashboard">Dashboard</h2>
                        <p data-i18n="dashboard-description">Visão geral do seu aplicativo de saúde e bem-estar</p>
                    </div>
                    <div class="dashboard-grid">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-content">
                                <h3>1,234</h3>
                                <p data-i18n="total-users">Usuários Totais</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="stat-content">
                                <h3>87%</h3>
                                <p data-i18n="engagement-rate">Taxa de Engajamento</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-trophy"></i>
                            </div>
                            <div class="stat-content">
                                <h3>456</h3>
                                <p data-i18n="completed-challenges">Desafios Concluídos</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-dollar-sign"></i>
                            </div>
                            <div class="stat-content">
                                <h3>R$ 12.345</h3>
                                <p data-i18n="monthly-revenue">Receita Mensal</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Users Tab -->
                <div class="tab-content" id="users">
                    <div class="content-header">
                        <h2 data-i18n="users">👥 Usuários</h2>
                        <p data-i18n="users-description">Gerencie os usuários do seu aplicativo</p>
                    </div>
                    
                    <!-- Users Stats -->
                    <div class="users-stats">
                        <div class="stat-card">
                            <div class="stat-icon active">
                                <i class="fas fa-user-check"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="activeUsersCount">0</h3>
                                <p>Usuários Ativos</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon inactive">
                                <i class="fas fa-user-slash"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="inactiveUsersCount">0</h3>
                                <p>Usuários Inativos</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon premium">
                                <i class="fas fa-crown"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="premiumUsersCount">0</h3>
                                <p>Usuários Premium</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon total">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="totalUsersCount">0</h3>
                                <p>Total de Usuários</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Users Controls -->
                    <div class="users-controls">
                        <div class="controls-left">
                            <button class="btn btn-primary" id="createUserBtn">
                                <i class="fas fa-plus"></i>
                                Criar Novo Usuário
                            </button>
                            <button class="btn btn-secondary" id="exportUsersBtn">
                                <i class="fas fa-download"></i>
                                Exportar Lista
                            </button>
                        </div>
                        
                        <div class="controls-right">
                            <div class="search-box">
                                <i class="fas fa-search"></i>
                                <input type="text" id="userSearchInput" placeholder="Buscar por nome ou e-mail...">
                            </div>
                            
                            <div class="filters">
                                <select id="statusFilter" class="filter-select">
                                    <option value="">Todos os Status</option>
                                    <option value="active">Ativos</option>
                                    <option value="inactive">Inativos</option>
                                </select>
                                
                                <select id="languageFilter" class="filter-select">
                                    <option value="">Todos os Idiomas</option>
                                    <option value="es">Español</option>
                                    <option value="pt">Português</option>
                                    <option value="en">English</option>
                                </select>
                                
                                <select id="planFilter" class="filter-select">
                                    <option value="">Todos os Planos</option>
                                    <option value="free">Gratuito</option>
                                    <option value="premium">Premium</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Users Table -->
                    <div class="users-table-container">
                        <table class="users-table" id="usersTable">
                            <thead>
                                <tr>
                                    <th>👤 Nome</th>
                                    <th>📧 E-mail</th>
                                    <th>🌍 País</th>
                                    <th>🗣️ Idioma</th>
                                    <th>💎 Plano</th>
                                    <th>✅ Status</th>
                                    <th>📅 Cadastro</th>
                                    <th>⚙️ Ações</th>
                                </tr>
                            </thead>
                            <tbody id="usersTableBody">
                                <!-- Users will be populated here -->
                            </tbody>
                        </table>
                        
                        <div class="table-loading" id="usersTableLoading">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>Carregando usuários...</p>
                        </div>
                        
                        <div class="no-users" id="noUsersMessage" style="display: none;">
                            <i class="fas fa-users"></i>
                            <h3>Nenhum usuário encontrado</h3>
                            <p>Não há usuários cadastrados ou que correspondam aos filtros selecionados.</p>
                        </div>
                    </div>
                    
                    <!-- Pagination -->
                    <div class="pagination-container">
                        <div class="pagination-info">
                            <span id="paginationInfo">Mostrando 0 de 0 usuários</span>
                        </div>
                        <div class="pagination-controls">
                            <button class="btn btn-small" id="prevPageBtn" disabled>
                                <i class="fas fa-chevron-left"></i>
                                Anterior
                            </button>
                            <span class="page-numbers" id="pageNumbers"></span>
                            <button class="btn btn-small" id="nextPageBtn" disabled>
                                Próximo
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Digital Products Tab -->
                <div class="tab-content" id="digital-products">
                    <div class="content-header">
                        <h2 data-i18n="digital-products">📚 Produtos Digitais</h2>
                        <p data-i18n="digital-products-description">Gerencie o conteúdo principal do aplicativo</p>
                    </div>
                    
                    <!-- Products Stats -->
                    <div class="products-stats">
                        <div class="stat-card">
                            <div class="stat-icon active">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="activeProductsCount">0</h3>
                                <p>Produtos Ativos</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon inactive">
                                <i class="fas fa-pause-circle"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="inactiveProductsCount">0</h3>
                                <p>Produtos Inativos</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon premium">
                                <i class="fas fa-crown"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="premiumProductsCount">0</h3>
                                <p>Produtos Premium</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon total">
                                <i class="fas fa-layer-group"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="totalProductsCount">0</h3>
                                <p>Total de Produtos</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Products Controls -->
                    <div class="products-controls">
                        <div class="controls-left">
                            <button class="btn btn-primary" id="createProductBtn">
                                <i class="fas fa-plus"></i>
                                Adicionar Novo Produto
                            </button>
                            <button class="btn btn-secondary" id="exportProductsBtn">
                                <i class="fas fa-download"></i>
                                Exportar Lista
                            </button>
                        </div>
                        
                        <div class="controls-right">
                            <div class="search-box">
                                <i class="fas fa-search"></i>
                                <input type="text" id="productSearchInput" placeholder="Buscar por nome...">
                            </div>
                            
                            <div class="filters">
                                <select id="productLanguageFilter" class="filter-select">
                                    <option value="">Todos os Idiomas</option>
                                    <option value="es">Español</option>
                                    <option value="pt">Português</option>
                                    <option value="en">English</option>
                                </select>
                                
                                <select id="productTypeFilter" class="filter-select">
                                    <option value="">Todos os Tipos</option>
                                    <option value="ebook">eBook</option>
                                    <option value="video">Vídeo</option>
                                    <option value="audio">Áudio</option>
                                    <option value="planner">Planner</option>
                                    <option value="guide">Guia</option>
                                    <option value="bonus">Bônus</option>
                                </select>
                                
                                <select id="productStatusFilter" class="filter-select">
                                    <option value="">Todos os Status</option>
                                    <option value="active">Ativos</option>
                                    <option value="inactive">Inativos</option>
                                </select>
                                
                                <select id="productVisibilityFilter" class="filter-select">
                                    <option value="">Todas Visibilidades</option>
                                    <option value="free">Gratuito</option>
                                    <option value="premium">Premium</option>
                                    <option value="both">Ambos</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- View Toggle -->
                    <div class="view-toggle">
                        <button class="view-btn active" id="cardViewBtn" data-view="cards">
                            <i class="fas fa-th-large"></i>
                            Cards
                        </button>
                        <button class="view-btn" id="tableViewBtn" data-view="table">
                            <i class="fas fa-list"></i>
                            Tabela
                        </button>
                    </div>
                    
                    <!-- Products Container -->
                    <div class="products-container">
                        <!-- Cards View -->
                        <div class="products-grid" id="productsGrid">
                            <!-- Products cards will be populated here -->
                        </div>
                        
                        <!-- Table View -->
                        <div class="products-table-container" id="productsTableContainer" style="display: none;">
                            <table class="products-table" id="productsTable">
                                <thead>
                                    <tr>
                                        <th>📚 Produto</th>
                                        <th>📝 Tipo</th>
                                        <th>🗣️ Idioma</th>
                                        <th>👥 Visibilidade</th>
                                        <th>🏷️ Tags</th>
                                        <th>✅ Status</th>
                                        <th>📅 Publicação</th>
                                        <th>⚙️ Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="productsTableBody">
                                    <!-- Products will be populated here -->
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="table-loading" id="productsLoading">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>Carregando produtos...</p>
                        </div>
                        
                        <div class="no-products" id="noProductsMessage" style="display: none;">
                            <i class="fas fa-box-open"></i>
                            <h3>Nenhum produto encontrado</h3>
                            <p>Não há produtos cadastrados ou que correspondam aos filtros selecionados.</p>
                            <button class="btn btn-primary" onclick="productsManager.openCreateProductModal()">
                                <i class="fas fa-plus"></i>
                                Criar Primeiro Produto
                            </button>
                        </div>
                    </div>
                    
                    <!-- Pagination -->
                    <div class="pagination-container">
                        <div class="pagination-info">
                            <span id="productsPaginationInfo">Mostrando 0 de 0 produtos</span>
                        </div>
                        <div class="pagination-controls">
                            <button class="btn btn-small" id="productsPrevPageBtn" disabled>
                                <i class="fas fa-chevron-left"></i>
                                Anterior
                            </button>
                            <span class="page-numbers" id="productsPageNumbers"></span>
                            <button class="btn btn-small" id="productsNextPageBtn" disabled>
                                Próximo
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Bonus Materials Tab -->
                <div class="tab-content" id="bonus-materials">
                    <div class="content-header">
                        <h2 data-i18n="bonus-materials">🎁 Bônus e Materiais Extras</h2>
                        <p data-i18n="bonus-materials-description">Gerencie bônus exclusivos e materiais extras para seus usuários</p>
                    </div>
                    
                    <!-- Bonus Stats -->
                    <div class="bonus-stats">
                        <div class="stat-card">
                            <div class="stat-icon active">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="activeBonusCount">0</h3>
                                <p>Bônus Ativos</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon premium">
                                <i class="fas fa-crown"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="premiumBonusCount">0</h3>
                                <p>Bônus Premium</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon scheduled">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="scheduledBonusCount">0</h3>
                                <p>Bônus Agendados</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon total">
                                <i class="fas fa-gift"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="totalBonusCount">0</h3>
                                <p>Total de Bônus</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Bonus Controls -->
                    <div class="bonus-controls">
                        <div class="controls-left">
                            <button class="btn btn-primary" id="createBonusBtn">
                                <i class="fas fa-plus"></i>
                                Adicionar Novo Bônus
                            </button>
                            <button class="btn btn-secondary" id="exportBonusBtn">
                                <i class="fas fa-download"></i>
                                Exportar Lista
                            </button>
                        </div>
                        
                        <div class="controls-right">
                            <div class="search-box">
                                <i class="fas fa-search"></i>
                                <input type="text" id="bonusSearchInput" placeholder="Buscar por nome...">
                            </div>
                            
                            <div class="filters">
                                <select id="bonusTypeFilter" class="filter-select">
                                    <option value="">Todos os Tipos</option>
                                    <option value="planner">Planner</option>
                                    <option value="mini-guide">Mini Guia</option>
                                    <option value="challenge">Desafio Extra</option>
                                    <option value="checklist">Checklist</option>
                                    <option value="calendar">Calendário</option>
                                    <option value="other">Outro</option>
                                </select>
                                
                                <select id="bonusLanguageFilter" class="filter-select">
                                    <option value="">Todos os Idiomas</option>
                                    <option value="es">Español</option>
                                    <option value="pt">Português</option>
                                    <option value="en">English</option>
                                </select>
                                
                                <select id="bonusVisibilityFilter" class="filter-select">
                                    <option value="">Todos os Planos</option>
                                    <option value="free">Gratuito</option>
                                    <option value="premium">Premium</option>
                                    <option value="both">Ambos</option>
                                </select>
                                
                                <select id="bonusStatusFilter" class="filter-select">
                                    <option value="">Todos os Status</option>
                                    <option value="active">Ativos</option>
                                    <option value="inactive">Inativos</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- View Toggle -->
                    <div class="view-toggle">
                        <button class="view-btn active" id="bonusCardViewBtn" data-view="cards">
                            <i class="fas fa-th-large"></i>
                            Cards
                        </button>
                        <button class="view-btn" id="bonusTableViewBtn" data-view="table">
                            <i class="fas fa-list"></i>
                            Tabela
                        </button>
                    </div>
                    
                    <!-- Bonus Container -->
                    <div class="bonus-container">
                        <!-- Cards View -->
                        <div class="bonus-grid" id="bonusGrid">
                            <!-- Bonus cards will be populated here -->
                        </div>
                        
                        <!-- Table View -->
                        <div class="bonus-table-container" id="bonusTableContainer" style="display: none;">
                            <table class="bonus-table" id="bonusTable">
                                <thead>
                                    <tr>
                                        <th>🎁 Bônus</th>
                                        <th>📝 Tipo</th>
                                        <th>🗣️ Idioma</th>
                                        <th>👥 Plano</th>
                                        <th>⏰ Liberação</th>
                                        <th>✅ Status</th>
                                        <th>⚙️ Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="bonusTableBody">
                                    <!-- Bonus will be populated here -->
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="table-loading" id="bonusLoading">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>Carregando bônus...</p>
                        </div>
                        
                        <div class="no-bonus" id="noBonusMessage" style="display: none;">
                            <i class="fas fa-gift"></i>
                            <h3>Nenhum bônus encontrado</h3>
                            <p>Não há bônus cadastrados ou que correspondam aos filtros selecionados.</p>
                            <button class="btn btn-primary" onclick="bonusManager.openCreateBonusModal()">
                                <i class="fas fa-plus"></i>
                                Criar Primeiro Bônus
                            </button>
                        </div>
                    </div>
                    
                    <!-- Pagination -->
                    <div class="pagination-container">
                        <div class="pagination-info">
                            <span id="bonusPaginationInfo">Mostrando 0 de 0 bônus</span>
                        </div>
                        <div class="pagination-controls">
                            <button class="btn btn-small" id="bonusPrevPageBtn" disabled>
                                <i class="fas fa-chevron-left"></i>
                                Anterior
                            </button>
                            <span class="page-numbers" id="bonusPageNumbers"></span>
                            <button class="btn btn-small" id="bonusNextPageBtn" disabled>
                                Próximo
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Continue with other tabs... -->
                <div class="tab-content" id="content">
                    <div class="content-header">
                        <h2 data-i18n="content">📁 Conteúdos</h2>
                        <p data-i18n="content-description">Gerencie todos os conteúdos disponíveis no aplicativo</p>
                    </div>
                    
                    <!-- Content Stats -->
                    <div class="content-stats">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-file-alt"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="totalContents">0</h3>
                                <p>Total de Conteúdos</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-eye"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="activeContents">0</h3>
                                <p>Conteúdos Ativos</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-crown"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="premiumContents">0</h3>
                                <p>Conteúdos Premium</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="totalViews">0</h3>
                                <p>Total de Visualizações</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Content Type Summary -->
                    <div class="content-type-summary">
                        <div class="type-card">
                            <i class="fas fa-play-circle"></i>
                            <span class="type-count" id="videoCount">0</span>
                            <span class="type-label">Vídeos</span>
                        </div>
                        <div class="type-card">
                            <i class="fas fa-file-pdf"></i>
                            <span class="type-count" id="pdfCount">0</span>
                            <span class="type-label">PDFs</span>
                        </div>
                        <div class="type-card">
                            <i class="fas fa-image"></i>
                            <span class="type-count" id="imageCount">0</span>
                            <span class="type-label">Imagens</span>
                        </div>
                        <div class="type-card">
                            <i class="fas fa-music"></i>
                            <span class="type-count" id="audioCount">0</span>
                            <span class="type-label">Áudios</span>
                        </div>
                        <div class="type-card">
                            <i class="fas fa-link"></i>
                            <span class="type-count" id="linkCount">0</span>
                            <span class="type-label">Links</span>
                        </div>
                    </div>
                    
                    <!-- Content Controls -->
                    <div class="content-controls">
                        <div class="controls-left">
                            <button class="btn btn-primary" id="addContentBtn">
                                <i class="fas fa-plus"></i>
                                Adicionar Novo Conteúdo
                            </button>
                            <button class="btn btn-secondary" id="exportContentsBtn">
                                <i class="fas fa-download"></i>
                                Exportar Lista
                            </button>
                            <button class="btn btn-info" id="reorderContentsBtn">
                                <i class="fas fa-sort"></i>
                                Reordenar Conteúdos
                            </button>
                        </div>
                        <div class="controls-right">
                            <div class="search-container">
                                <input type="text" id="contentSearchInput" placeholder="Buscar por nome ou descrição...">
                                <i class="fas fa-search"></i>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Content Filters -->
                    <div class="content-filters">
                        <div class="filter-group">
                            <label for="contentTypeFilter">Tipo:</label>
                            <select id="contentTypeFilter">
                                <option value="">Todos os tipos</option>
                                <option value="video">🎥 Vídeo</option>
                                <option value="pdf">📄 PDF</option>
                                <option value="image">🖼️ Imagem</option>
                                <option value="audio">🎵 Áudio</option>
                                <option value="link">🔗 Link Externo</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="contentLanguageFilter">Idioma:</label>
                            <select id="contentLanguageFilter">
                                <option value="">Todos os idiomas</option>
                                <option value="es">🇪🇸 Español</option>
                                <option value="pt">🇧🇷 Português</option>
                                <option value="en">🇺🇸 English</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="contentCategoryFilter">Categoria:</label>
                            <select id="contentCategoryFilter">
                                <option value="">Todas as categorias</option>
                                <option value="ebook">📚 eBook</option>
                                <option value="planner">📋 Planner</option>
                                <option value="lesson">🎓 Aula</option>
                                <option value="bonus">🎁 Bônus</option>
                                <option value="guide">📖 Guia</option>
                                <option value="challenge">🏆 Desafio</option>
                                <option value="recipe">🍽️ Receita</option>
                                <option value="other">🔧 Outro</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="contentStatusFilter">Status:</label>
                            <select id="contentStatusFilter">
                                <option value="">Todos</option>
                                <option value="active">✅ Ativo</option>
                                <option value="inactive">❌ Inativo</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="contentAccessFilter">Acesso:</label>
                            <select id="contentAccessFilter">
                                <option value="">Todos</option>
                                <option value="free">🆓 Gratuito</option>
                                <option value="premium">👑 Premium</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- View Toggle -->
                    <div class="view-toggle">
                        <button class="view-btn active" id="contentCardViewBtn" data-view="cards">
                            <i class="fas fa-th-large"></i>
                            Cards
                        </button>
                        <button class="view-btn" id="contentTableViewBtn" data-view="table">
                            <i class="fas fa-list"></i>
                            Tabela
                        </button>
                    </div>
                    
                    <!-- Content Container -->
                    <div class="content-container">
                        <!-- Cards View -->
                        <div class="content-grid" id="contentGrid">
                            <!-- Content cards will be populated here -->
                        </div>
                        
                        <!-- Table View -->
                        <div class="content-table-container" id="contentTableContainer" style="display: none;">
                            <table class="content-table" id="contentTable">
                                <thead>
                                    <tr>
                                        <th>📁 Conteúdo</th>
                                        <th>📱 Tipo</th>
                                        <th>🗣️ Idioma</th>
                                        <th>📂 Categoria</th>
                                        <th>👑 Acesso</th>
                                        <th>📅 Data Upload</th>
                                        <th>👁️ Visualizações</th>
                                        <th>✅ Status</th>
                                        <th>⚙️ Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="contentTableBody">
                                    <!-- Content will be populated here -->
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="table-loading" id="contentLoading">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>Carregando conteúdos...</p>
                        </div>
                        
                        <div class="no-content" id="noContentMessage" style="display: none;">
                            <i class="fas fa-folder-open"></i>
                            <h3>Nenhum conteúdo encontrado</h3>
                            <p>Não há conteúdos cadastrados ou que correspondam aos filtros selecionados.</p>
                            <button class="btn btn-primary" onclick="contentManager.openAddContentModal()">
                                <i class="fas fa-plus"></i>
                                Adicionar Primeiro Conteúdo
                            </button>
                        </div>
                    </div>
                    
                    <!-- Pagination -->
                    <div class="pagination-container">
                        <div class="pagination-info">
                            <span id="contentPaginationInfo">Mostrando 0 de 0 conteúdos</span>
                        </div>
                        <div class="pagination-controls">
                            <button class="btn btn-small" id="contentPrevPageBtn" disabled>
                                <i class="fas fa-chevron-left"></i>
                                Anterior
                            </button>
                            <span class="page-numbers" id="contentPageNumbers"></span>
                            <button class="btn btn-small" id="contentNextPageBtn" disabled>
                                Próximo
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="challenges">
                    <div class="content-header">
                        <h2 data-i18n="challenges">🏆 Desafios</h2>
                        <p data-i18n="challenges-description">Gerencie desafios interativos e acompanhe o progresso dos usuários</p>
                    </div>
                    
                    <!-- Challenges Stats -->
                    <div class="challenges-stats">
                        <div class="stat-card">
                            <div class="stat-icon active">
                                <i class="fas fa-play-circle"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="activeChallengesCount">0</h3>
                                <p>Desafios Ativos</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon premium">
                                <i class="fas fa-crown"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="premiumChallengesCount">0</h3>
                                <p>Desafios Premium</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon participants">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="totalParticipantsCount">0</h3>
                                <p>Participantes Ativos</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon total">
                                <i class="fas fa-trophy"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="totalChallengesCount">0</h3>
                                <p>Total de Desafios</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Challenges Controls -->
                    <div class="challenges-controls">
                        <div class="controls-left">
                            <button class="btn btn-primary" id="createChallengeBtn">
                                <i class="fas fa-plus"></i>
                                Criar Novo Desafio
                            </button>
                            <button class="btn btn-secondary" id="exportChallengesBtn">
                                <i class="fas fa-download"></i>
                                Exportar Relatório
                            </button>
                        </div>
                        
                        <div class="controls-right">
                            <div class="search-box">
                                <i class="fas fa-search"></i>
                                <input type="text" id="challengeSearchInput" placeholder="Buscar por nome...">
                            </div>
                            
                            <div class="filters">
                                <select id="challengeLanguageFilter" class="filter-select">
                                    <option value="">Todos os Idiomas</option>
                                    <option value="es">Español</option>
                                    <option value="pt">Português</option>
                                    <option value="en">English</option>
                                </select>
                                
                                <select id="challengeVisibilityFilter" class="filter-select">
                                    <option value="">Todos os Planos</option>
                                    <option value="free">Gratuito</option>
                                    <option value="premium">Premium</option>
                                    <option value="both">Ambos</option>
                                </select>
                                
                                <select id="challengeStatusFilter" class="filter-select">
                                    <option value="">Todos os Status</option>
                                    <option value="active">Ativos</option>
                                    <option value="inactive">Inativos</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- View Toggle -->
                    <div class="view-toggle">
                        <button class="view-btn active" id="challengeCardViewBtn" data-view="cards">
                            <i class="fas fa-th-large"></i>
                            Cards
                        </button>
                        <button class="view-btn" id="challengeTableViewBtn" data-view="table">
                            <i class="fas fa-list"></i>
                            Tabela
                        </button>
                    </div>
                    
                    <!-- Challenges Container -->
                    <div class="challenges-container">
                        <!-- Cards View -->
                        <div class="challenges-grid" id="challengesGrid">
                            <!-- Challenge cards will be populated here -->
                        </div>
                        
                        <!-- Table View -->
                        <div class="challenges-table-container" id="challengesTableContainer" style="display: none;">
                            <table class="challenges-table" id="challengesTable">
                                <thead>
                                    <tr>
                                        <th>🏆 Desafio</th>
                                        <th>⏱️ Duração</th>
                                        <th>🗣️ Idioma</th>
                                        <th>👥 Visibilidade</th>
                                        <th>📊 Participantes</th>
                                        <th>📈 Taxa Conclusão</th>
                                        <th>✅ Status</th>
                                        <th>⚙️ Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="challengesTableBody">
                                    <!-- Challenges will be populated here -->
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="table-loading" id="challengesLoading">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>Carregando desafios...</p>
                        </div>
                        
                        <div class="no-challenges" id="noChallengesMessage" style="display: none;">
                            <i class="fas fa-trophy"></i>
                            <h3>Nenhum desafio encontrado</h3>
                            <p>Não há desafios cadastrados ou que correspondam aos filtros selecionados.</p>
                            <button class="btn btn-primary" onclick="challengesManager.openCreateChallengeModal()">
                                <i class="fas fa-plus"></i>
                                Criar Primeiro Desafio
                            </button>
                        </div>
                    </div>
                    
                    <!-- Pagination -->
                    <div class="pagination-container">
                        <div class="pagination-info">
                            <span id="challengesPaginationInfo">Mostrando 0 de 0 desafios</span>
                        </div>
                        <div class="pagination-controls">
                            <button class="btn btn-small" id="challengesPrevPageBtn" disabled>
                                <i class="fas fa-chevron-left"></i>
                                Anterior
                            </button>
                            <span class="page-numbers" id="challengesPageNumbers"></span>
                            <button class="btn btn-small" id="challengesNextPageBtn" disabled>
                                Próximo
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="creatives">
                    <div class="content-header">
                        <h2 data-i18n="creatives">🎨 Criativos e Campanhas</h2>
                        <p data-i18n="creatives-description">Repositório visual e gerador de criativos com IA</p>
                    </div>
                    
                    <!-- Creatives Overview Stats -->
                    <div class="creatives-overview">
                        <div class="overview-stats">
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-images"></i>
                                </div>
                                <div class="stat-content">
                                    <h4 id="totalCreatives">0</h4>
                                    <p>Total de Criativos</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-eye"></i>
                                </div>
                                <div class="stat-content">
                                    <h4 id="activeCreatives">0</h4>
                                    <p>Criativos Ativos</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-robot"></i>
                                </div>
                                <div class="stat-content">
                                    <h4 id="aiCreatives">0</h4>
                                    <p>Gerados por IA</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-star"></i>
                                </div>
                                <div class="stat-content">
                                    <h4 id="featuredCreatives">0</h4>
                                    <p>Criativos Destaque</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Creatives Tabs -->
                    <div class="creatives-tabs">
                        <button class="creatives-tab active" data-section="gallery">
                            <i class="fas fa-th-large"></i>
                            Galeria de Criativos
                        </button>
                        <button class="creatives-tab" data-section="ai-generator">
                            <i class="fas fa-magic"></i>
                            Gerador com IA
                        </button>
                        <button class="creatives-tab" data-section="analytics">
                            <i class="fas fa-chart-bar"></i>
                            Análise de Performance
                        </button>
                    </div>
                    
                    <!-- Gallery Section -->
                    <div class="creatives-section active" id="gallerySection">
                        <div class="section-header">
                            <h3><i class="fas fa-th-large"></i> Galeria de Criativos</h3>
                            <button class="btn btn-primary" id="addCreativeBtn">
                                <i class="fas fa-plus"></i>
                                Adicionar Novo Criativo
                            </button>
                        </div>
                        
                        <!-- Filters -->
                        <div class="creatives-filters">
                            <div class="filter-group">
                                <label for="creativesSearchFilter">Buscar:</label>
                                <input type="text" id="creativesSearchFilter" placeholder="Nome ou descrição...">
                            </div>
                            <div class="filter-group">
                                <label for="creativesTypeFilter">Tipo:</label>
                                <select id="creativesTypeFilter">
                                    <option value="">Todos os tipos</option>
                                    <option value="feed">📱 Feed</option>
                                    <option value="story">📖 Story</option>
                                    <option value="carousel">🎠 Carrossel</option>
                                    <option value="mockup">📱 Mockup</option>
                                    <option value="landing">🌐 Página de Vendas</option>
                                    <option value="members">👥 Área de Membros</option>
                                    <option value="banner">🏷️ Banner</option>
                                    <option value="ad">📢 Anúncio</option>
                                    <option value="other">🔧 Outro</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label for="creativesLanguageFilter">Idioma:</label>
                                <select id="creativesLanguageFilter">
                                    <option value="">Todos os idiomas</option>
                                    <option value="pt">🇧🇷 Português</option>
                                    <option value="es">🇪🇸 Español</option>
                                    <option value="en">🇺🇸 English</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label for="creativesStatusFilter">Status:</label>
                                <select id="creativesStatusFilter">
                                    <option value="">Todos</option>
                                    <option value="active">✅ Ativo</option>
                                    <option value="inactive">❌ Inativo</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label for="creativesSourceFilter">Origem:</label>
                                <select id="creativesSourceFilter">
                                    <option value="">Todas</option>
                                    <option value="manual">👤 Manual</option>
                                    <option value="ai">🤖 IA</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- View Toggle -->
                        <div class="view-controls">
                            <div class="view-toggle">
                                <button class="view-btn active" data-view="grid">
                                    <i class="fas fa-th"></i>
                                    Grade
                                </button>
                                <button class="view-btn" data-view="list">
                                    <i class="fas fa-list"></i>
                                    Lista
                                </button>
                            </div>
                            <div class="sort-controls">
                                <select id="creativesSortFilter">
                                    <option value="newest">Mais recentes</option>
                                    <option value="oldest">Mais antigos</option>
                                    <option value="name">Nome A-Z</option>
                                    <option value="type">Por tipo</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="creatives-container">
                            <div class="creatives-grid" id="creativesGrid">
                                <!-- Creatives will be populated here -->
                            </div>
                            
                            <div class="creatives-list" id="creativesList" style="display: none;">
                                <!-- List view will be populated here -->
                            </div>
                            
                            <div class="no-creatives" id="noCreativesMessage" style="display: none;">
                                <i class="fas fa-images"></i>
                                <h4>Nenhum criativo encontrado</h4>
                                <p>Crie seu primeiro criativo ou ajuste os filtros.</p>
                                <button class="btn btn-primary" onclick="creativesManager.openAddCreativeModal()">
                                    <i class="fas fa-plus"></i>
                                    Criar Primeiro Criativo
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- AI Generator Section -->
                    <div class="creatives-section" id="ai-generatorSection">
                        <div class="section-header">
                            <h3><i class="fas fa-magic"></i> Gerador de Criativos com IA</h3>
                            <div class="ai-status">
                                <span class="status-indicator" id="aiStatusIndicator">
                                    <i class="fas fa-circle"></i>
                                    API Conectada
                                </span>
                            </div>
                        </div>
                        
                        <div class="ai-generator-container">
                            <div class="ai-form-section">
                                <div class="ai-form-card">
                                    <h4><i class="fas fa-brain"></i> Configuração do Criativo</h4>
                                    
                                    <form id="aiGeneratorForm">
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="aiLanguage">Idioma *</label>
                                                <select id="aiLanguage" name="language" required>
                                                    <option value="">Selecione o idioma</option>
                                                    <option value="pt">🇧🇷 Português</option>
                                                    <option value="es">🇪🇸 Español</option>
                                                    <option value="en">🇺🇸 English</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label for="aiObjective">Objetivo da Campanha *</label>
                                                <select id="aiObjective" name="objective" required>
                                                    <option value="">Selecione o objetivo</option>
                                                    <option value="engagement">📈 Engajamento no Instagram</option>
                                                    <option value="conversion">💰 Conversão na Kiwify</option>
                                                    <option value="traffic">🌐 Tráfego para página de vendas</option>
                                                    <option value="warming">🔥 Aquecimento de público</option>
                                                    <option value="testimonial">⭐ Testemunhos visuais</option>
                                                    <option value="awareness">🎯 Awareness de marca</option>
                                                </select>
                                            </div>
                                        </div>
                                        
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="aiVisualStyle">Estilo Visual *</label>
                                                <select id="aiVisualStyle" name="visualStyle" required>
                                                    <option value="">Selecione o estilo</option>
                                                    <option value="minimalist">✨ Minimalista</option>
                                                    <option value="emotional">❤️ Emocional</option>
                                                    <option value="colorful">🌈 Colorido</option>
                                                    <option value="professional">💼 Profissional</option>
                                                    <option value="mockup">📱 Estilo Mockup</option>
                                                    <option value="lifestyle">🌟 Lifestyle</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label for="aiCreativeType">Tipo de Criativo *</label>
                                                <select id="aiCreativeType" name="creativeType" required>
                                                    <option value="">Selecione o tipo</option>
                                                    <option value="feed">📱 Post para Feed</option>
                                                    <option value="story">📖 Story</option>
                                                    <option value="banner">🏷️ Banner Horizontal</option>
                                                    <option value="ad">📢 Criativo para Anúncio</option>
                                                    <option value="carousel">🎠 Carrossel</option>
                                                </select>
                                            </div>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="aiMainText">Texto Principal da Campanha</label>
                                            <textarea id="aiMainText" name="mainText" placeholder="Digite o texto principal que deve aparecer no criativo..." rows="3"></textarea>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="aiEmotionalTrigger">Gatilho Emocional</label>
                                            <select id="aiEmotionalTrigger" name="emotionalTrigger">
                                                <option value="">Nenhum específico</option>
                                                <option value="urgency">⏰ Urgência</option>
                                                <option value="belonging">👥 Pertencimento</option>
                                                <option value="transformation">🦋 Transformação</option>
                                                <option value="fear">😰 Medo de perder</option>
                                                <option value="success">🏆 Sucesso</option>
                                                <option value="comfort">🤗 Conforto</option>
                                            </select>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="aiAdditionalDetails">Detalhes Adicionais</label>
                                            <textarea id="aiAdditionalDetails" name="additionalDetails" placeholder="Cores específicas, elementos visuais, referências..." rows="2"></textarea>
                                        </div>
                                        
                                        <div class="ai-generate-section">
                                            <button type="submit" class="btn btn-primary btn-large" id="generateCreativeBtn">
                                                <i class="fas fa-magic"></i>
                                                Gerar Criativo com IA
                                            </button>
                                            <p class="ai-note">
                                                <i class="fas fa-info-circle"></i>
                                                A geração pode levar de 30 a 60 segundos
                                            </p>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            
                            <div class="ai-preview-section">
                                <div class="ai-preview-card">
                                    <h4><i class="fas fa-eye"></i> Preview do Criativo</h4>
                                    
                                    <div class="ai-preview-container" id="aiPreviewContainer">
                                        <div class="ai-placeholder">
                                            <i class="fas fa-image"></i>
                                            <p>O criativo gerado aparecerá aqui</p>
                                        </div>
                                    </div>
                                    
                                    <div class="ai-preview-actions" id="aiPreviewActions" style="display: none;">
                                        <button class="btn btn-secondary" id="regenerateBtn">
                                            <i class="fas fa-redo"></i>
                                            Regenerar
                                        </button>
                                        <button class="btn btn-success" id="saveGeneratedBtn">
                                            <i class="fas fa-save"></i>
                                            Salvar na Galeria
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- AI History -->
                        <div class="ai-history-section">
                            <h4><i class="fas fa-history"></i> Histórico de Criativos Gerados</h4>
                            <div class="ai-history-grid" id="aiHistoryGrid">
                                <!-- AI generated creatives history will be populated here -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- Analytics Section -->
                    <div class="creatives-section" id="analyticsSection">
                        <div class="section-header">
                            <h3><i class="fas fa-chart-bar"></i> Análise de Performance</h3>
                            <div class="analytics-period">
                                <select id="analyticsPeriod">
                                    <option value="7">Últimos 7 dias</option>
                                    <option value="30" selected>Últimos 30 dias</option>
                                    <option value="90">Últimos 90 dias</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="analytics-container">
                            <div class="analytics-cards">
                                <div class="analytics-card">
                                    <h5>Criativos Mais Visualizados</h5>
                                    <div class="analytics-list" id="mostViewedList">
                                        <!-- Will be populated -->
                                    </div>
                                </div>
                                
                                <div class="analytics-card">
                                    <h5>Performance por Tipo</h5>
                                    <div class="analytics-chart" id="typePerformanceChart">
                                        <!-- Will be populated -->
                                    </div>
                                </div>
                                
                                <div class="analytics-card">
                                    <h5>Distribuição por Idioma</h5>
                                    <div class="analytics-chart" id="languageDistributionChart">
                                        <!-- Will be populated -->
                                    </div>
                                </div>
                                
                                <div class="analytics-card">
                                    <h5>Criativos IA vs Manual</h5>
                                    <div class="analytics-comparison" id="aiVsManualComparison">
                                        <!-- Will be populated -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="carousel">
                    <div class="content-header">
                        <h2 data-i18n="carousel">🎠 Imagens do Carrossel</h2>
                        <p data-i18n="carousel-description">Gestão visual completa: carrossel, banners, templates e analytics</p>
                    </div>
                    
                    <!-- Carousel Stats -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-images"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="totalCarouselImages">0</h3>
                                <p>Imagens Ativas</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-eye"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="totalCarouselViews">0</h3>
                                <p>Visualizações</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-mouse-pointer"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="totalCarouselClicks">0</h3>
                                <p>Cliques</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="carouselConversionRate">0%</h3>
                                <p>Taxa de Conversão</p>
                            </div>
                        </div>
                    </div>

                    <!-- Carousel Management Tabs -->
                    <div class="carousel-nav-tabs">
                        <button class="carousel-tab-btn active" data-carousel-tab="main">
                            <i class="fas fa-th-large"></i>
                            Carrossel Principal
                        </button>
                        <button class="carousel-tab-btn" data-carousel-tab="banners">
                            <i class="fas fa-flag"></i>
                            Banners por Seção
                        </button>
                        <button class="carousel-tab-btn" data-carousel-tab="templates">
                            <i class="fas fa-palette"></i>
                            Templates & Modelos
                        </button>
                        <button class="carousel-tab-btn" data-carousel-tab="editor">
                            <i class="fas fa-edit"></i>
                            Editor Visual
                        </button>
                        <button class="carousel-tab-btn" data-carousel-tab="analytics">
                            <i class="fas fa-chart-bar"></i>
                            Analytics
                        </button>
                    </div>

                    <!-- Main Carousel Tab -->
                    <div class="carousel-tab-content active" id="carouselMainTab">
                        <div class="section-controls">
                            <div class="controls-left">
                                <button class="btn btn-primary" id="addCarouselImageBtn">
                                    <i class="fas fa-plus"></i>
                                    Adicionar Imagem
                                </button>
                                <button class="btn btn-secondary" id="importCarouselImagesBtn">
                                    <i class="fas fa-upload"></i>
                                    Importar Múltiplas
                                </button>
                                <button class="btn btn-info" id="previewCarouselBtn">
                                    <i class="fas fa-play"></i>
                                    Preview do Carrossel
                                </button>
                            </div>
                            <div class="controls-right">
                                <div class="carousel-settings">
                                    <label>Autoplay:</label>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="carouselAutoplay" checked>
                                        <span class="toggle-slider"></span>
                                    </label>
                                    <input type="number" id="carouselInterval" value="5" min="2" max="30" style="width: 60px;">
                                    <span>segundos</span>
                                </div>
                            </div>
                        </div>

                        <!-- Carousel Images Container -->
                        <div class="carousel-images-grid" id="carouselImagesGrid">
                            <!-- Images will be populated here -->
                        </div>

                        <!-- Carousel Preview Modal would open here -->
                    </div>

                    <!-- Banners Tab -->
                    <div class="carousel-tab-content" id="carouselBannersTab">
                        <div class="banners-section">
                            <h3><i class="fas fa-flag"></i> Banners por Seção do App</h3>
                            <p>Configure banners específicos para diferentes seções da aplicação</p>
                            
                            <div class="banners-grid">
                                <div class="banner-section-card" data-section="home">
                                    <div class="banner-section-header">
                                        <h4><i class="fas fa-home"></i> Home</h4>
                                        <button class="btn btn-small btn-primary">Configurar</button>
                                    </div>
                                    <div class="banner-preview" id="homeBannerPreview">
                                        <span class="no-banner">Nenhum banner configurado</span>
                                    </div>
                                </div>

                                <div class="banner-section-card" data-section="challenges">
                                    <div class="banner-section-header">
                                        <h4><i class="fas fa-trophy"></i> Desafios</h4>
                                        <button class="btn btn-small btn-primary">Configurar</button>
                                    </div>
                                    <div class="banner-preview" id="challengesBannerPreview">
                                        <span class="no-banner">Nenhum banner configurado</span>
                                    </div>
                                </div>

                                <div class="banner-section-card" data-section="store">
                                    <div class="banner-section-header">
                                        <h4><i class="fas fa-store"></i> Loja</h4>
                                        <button class="btn btn-small btn-primary">Configurar</button>
                                    </div>
                                    <div class="banner-preview" id="storeBannerPreview">
                                        <span class="no-banner">Nenhum banner configurado</span>
                                    </div>
                                </div>

                                <div class="banner-section-card" data-section="profile">
                                    <div class="banner-section-header">
                                        <h4><i class="fas fa-user"></i> Perfil</h4>
                                        <button class="btn btn-small btn-primary">Configurar</button>
                                    </div>
                                    <div class="banner-preview" id="profileBannerPreview">
                                        <span class="no-banner">Nenhum banner configurado</span>
                                    </div>
                                </div>

                                <div class="banner-section-card" data-section="support">
                                    <div class="banner-section-header">
                                        <h4><i class="fas fa-headset"></i> Suporte</h4>
                                        <button class="btn btn-small btn-primary">Configurar</button>
                                    </div>
                                    <div class="banner-preview" id="supportBannerPreview">
                                        <span class="no-banner">Nenhum banner configurado</span>
                                    </div>
                                </div>

                                <div class="banner-section-card" data-section="premium">
                                    <div class="banner-section-header">
                                        <h4><i class="fas fa-crown"></i> Premium</h4>
                                        <button class="btn btn-small btn-primary">Configurar</button>
                                    </div>
                                    <div class="banner-preview" id="premiumBannerPreview">
                                        <span class="no-banner">Nenhum banner configurado</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Templates Tab -->
                    <div class="carousel-tab-content" id="carouselTemplatesTab">
                        <div class="templates-section">
                            <div class="section-controls">
                                <div class="controls-left">
                                    <button class="btn btn-primary" id="createTemplateBtn">
                                        <i class="fas fa-plus"></i>
                                        Criar Template
                                    </button>
                                    <button class="btn btn-secondary" id="importTemplateBtn">
                                        <i class="fas fa-download"></i>
                                        Importar Template
                                    </button>
                                </div>
                                <div class="controls-right">
                                    <div class="template-filters">
                                        <select id="templateCategoryFilter">
                                            <option value="">Todas as categorias</option>
                                            <option value="motivation">🔥 Motivação</option>
                                            <option value="health">🏃‍♀️ Saúde</option>
                                            <option value="fitness">💪 Fitness</option>
                                            <option value="nutrition">🥗 Nutrição</option>
                                            <option value="mental">🧠 Bem-estar Mental</option>
                                            <option value="offers">🎁 Ofertas</option>
                                            <option value="events">📅 Eventos</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="templates-grid" id="templatesGrid">
                                <!-- Templates will be populated here -->
                            </div>
                        </div>
                    </div>

                    <!-- Visual Editor Tab -->
                    <div class="carousel-tab-content" id="carouselEditorTab">
                        <div class="editor-section">
                            <div class="editor-toolbar">
                                <div class="toolbar-group">
                                    <button class="tool-btn" id="editorUploadBtn" title="Upload de Imagem">
                                        <i class="fas fa-upload"></i>
                                    </button>
                                    <button class="tool-btn" id="editorTextBtn" title="Adicionar Texto">
                                        <i class="fas fa-font"></i>
                                    </button>
                                    <button class="tool-btn" id="editorShapesBtn" title="Formas">
                                        <i class="fas fa-shapes"></i>
                                    </button>
                                    <button class="tool-btn" id="editorFiltersBtn" title="Filtros">
                                        <i class="fas fa-magic"></i>
                                    </button>
                                </div>
                                <div class="toolbar-group">
                                    <button class="tool-btn" id="editorUndoBtn" title="Desfazer">
                                        <i class="fas fa-undo"></i>
                                    </button>
                                    <button class="tool-btn" id="editorRedoBtn" title="Refazer">
                                        <i class="fas fa-redo"></i>
                                    </button>
                                </div>
                                <div class="toolbar-group">
                                    <button class="btn btn-secondary" id="editorPreviewBtn">
                                        <i class="fas fa-eye"></i>
                                        Preview
                                    </button>
                                    <button class="btn btn-primary" id="editorSaveBtn">
                                        <i class="fas fa-save"></i>
                                        Salvar
                                    </button>
                                </div>
                            </div>

                            <div class="editor-workspace">
                                <div class="editor-canvas-container">
                                    <canvas id="visualEditor" width="800" height="400"></canvas>
                                </div>
                                <div class="editor-properties">
                                    <h4>Propriedades</h4>
                                    <div class="property-group">
                                        <label>Dimensões:</label>
                                        <div class="dimension-inputs">
                                            <input type="number" id="canvasWidth" value="800" placeholder="Largura">
                                            <span>×</span>
                                            <input type="number" id="canvasHeight" value="400" placeholder="Altura">
                                        </div>
                                    </div>
                                    <div class="property-group">
                                        <label>Filtros:</label>
                                        <div class="filter-controls">
                                            <label>Brilho:</label>
                                            <input type="range" id="brightnessSlider" min="0" max="200" value="100">
                                            <label>Contraste:</label>
                                            <input type="range" id="contrastSlider" min="0" max="200" value="100">
                                            <label>Saturação:</label>
                                            <input type="range" id="saturationSlider" min="0" max="200" value="100">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Analytics Tab -->
                    <div class="carousel-tab-content" id="carouselAnalyticsTab">
                        <div class="analytics-section">
                            <div class="analytics-controls">
                                <div class="date-range-picker">
                                    <label>Período:</label>
                                    <select id="analyticsDateRange">
                                        <option value="7">Últimos 7 dias</option>
                                        <option value="30" selected>Últimos 30 dias</option>
                                        <option value="90">Últimos 90 dias</option>
                                        <option value="custom">Personalizado</option>
                                    </select>
                                    <input type="date" id="analyticsDateFrom" style="display: none;">
                                    <input type="date" id="analyticsDateTo" style="display: none;">
                                </div>
                            </div>

                            <!-- Performance Overview -->
                            <div class="analytics-grid">
                                <div class="analytics-card">
                                    <h4><i class="fas fa-chart-line"></i> Performance Geral</h4>
                                    <div class="chart-container">
                                        <canvas id="performanceChart" width="400" height="200"></canvas>
                                    </div>
                                </div>

                                <div class="analytics-card">
                                    <h4><i class="fas fa-images"></i> Imagens Mais Visualizadas</h4>
                                    <div class="top-images-list" id="topImagesList">
                                        <!-- Top images will be populated here -->
                                    </div>
                                </div>

                                <div class="analytics-card">
                                    <h4><i class="fas fa-mouse-pointer"></i> Taxa de Cliques por Imagem</h4>
                                    <div class="chart-container">
                                        <canvas id="clickRateChart" width="400" height="200"></canvas>
                                    </div>
                                </div>

                                <div class="analytics-card">
                                    <h4><i class="fas fa-clock"></i> Horários de Maior Engajamento</h4>
                                    <div class="chart-container">
                                        <canvas id="engagementTimeChart" width="400" height="200"></canvas>
                                    </div>
                                </div>
                            </div>

                            <!-- Detailed Analytics Table -->
                            <div class="detailed-analytics">
                                <h4>Análise Detalhada por Imagem</h4>
                                <div class="analytics-table-container">
                                    <table class="analytics-table">
                                        <thead>
                                            <tr>
                                                <th>🖼️ Imagem</th>
                                                <th>👁️ Visualizações</th>
                                                <th>🖱️ Cliques</th>
                                                <th>📊 CTR</th>
                                                <th>⏱️ Tempo Médio</th>
                                                <th>📱 Dispositivo</th>
                                                <th>📅 Última Atualização</th>
                                            </tr>
                                        </thead>
                                        <tbody id="analyticsTableBody">
                                            <!-- Analytics data will be populated here -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="store">
                    <div class="content-header">
                        <h2 data-i18n="store">🛍️ Loja (Tienda)</h2>
                        <p data-i18n="store-description">Gerencie produtos digitais à venda</p>
                    </div>
                    
                    <!-- Store Stats -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-shopping-bag"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="storeActiveProducts">0</h3>
                                <p>Produtos Ativos</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-crown"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="storePremiumProducts">0</h3>
                                <p>Produtos Premium</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-star"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="storeFeaturedProducts">0</h3>
                                <p>Produtos Destaque</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-box"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="storeTotalProducts">0</h3>
                                <p>Total de Produtos</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Store Controls -->
                    <div class="section-controls">
                        <div class="controls-left">
                            <button class="btn btn-primary" id="createStoreProductBtn">
                                <i class="fas fa-plus"></i>
                                Adicionar Novo Produto
                            </button>
                            <button class="btn btn-secondary" id="exportStoreProductsBtn">
                                <i class="fas fa-download"></i>
                                Exportar Lista
                            </button>
                        </div>
                        <div class="controls-right">
                            <div class="search-container">
                                <input type="text" id="storeSearchInput" placeholder="Buscar produtos...">
                                <i class="fas fa-search"></i>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Store Filters -->
                    <div class="filters-container">
                        <div class="filter-group">
                            <label for="storeLanguageFilter">Idioma:</label>
                            <select id="storeLanguageFilter">
                                <option value="">Todos</option>
                                <option value="es">🇪🇸 Español</option>
                                <option value="pt">🇧🇷 Português</option>
                                <option value="en">🇺🇸 English</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="storeTypeFilter">Tipo:</label>
                            <select id="storeTypeFilter">
                                <option value="">Todos</option>
                                <option value="ebook">📖 eBook</option>
                                <option value="combo">📦 Combo</option>
                                <option value="planner">📋 Planner Premium</option>
                                <option value="guide">📚 Guia Especial</option>
                                <option value="bonus">🎁 Bônus</option>
                                <option value="other">🔗 Outro</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="storeStatusFilter">Status:</label>
                            <select id="storeStatusFilter">
                                <option value="">Todos</option>
                                <option value="active">✅ Ativo</option>
                                <option value="inactive">❌ Inativo</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="storeVisibilityFilter">Visibilidade:</label>
                            <select id="storeVisibilityFilter">
                                <option value="">Todos</option>
                                <option value="free">🆓 Gratuito</option>
                                <option value="premium">👑 Premium</option>
                                <option value="both">👥 Ambos</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- View Toggle -->
                    <div class="view-toggle">
                        <button class="view-btn active" id="storeCardViewBtn" data-view="cards">
                            <i class="fas fa-th-large"></i>
                            Cards
                        </button>
                        <button class="view-btn" id="storeTableViewBtn" data-view="table">
                            <i class="fas fa-list"></i>
                            Tabela
                        </button>
                    </div>
                    
                    <!-- Store Products Container -->
                    <div class="store-container">
                        <!-- Cards View -->
                        <div class="store-grid" id="storeGrid">
                            <!-- Store product cards will be populated here -->
                        </div>
                        
                        <!-- Table View -->
                        <div class="store-table-container" id="storeTableContainer" style="display: none;">
                            <table class="store-table" id="storeTable">
                                <thead>
                                    <tr>
                                        <th>🛍️ Produto</th>
                                        <th>🗣️ Idioma</th>
                                        <th>💰 Preço</th>
                                        <th>📦 Tipo</th>
                                        <th>👥 Visibilidade</th>
                                        <th>⭐ Destaque</th>
                                        <th>✅ Status</th>
                                        <th>⚙️ Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="storeTableBody">
                                    <!-- Store products will be populated here -->
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="table-loading" id="storeLoading">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>Carregando produtos...</p>
                        </div>
                        
                        <div class="no-products" id="noStoreProductsMessage" style="display: none;">
                            <i class="fas fa-store"></i>
                            <h3>Nenhum produto encontrado</h3>
                            <p>Não há produtos cadastrados ou que correspondam aos filtros selecionados.</p>
                            <button class="btn btn-primary" onclick="storeManager.openCreateProductModal()">
                                <i class="fas fa-plus"></i>
                                Criar Primeiro Produto
                            </button>
                        </div>
                    </div>
                    
                    <!-- Pagination -->
                    <div class="pagination-container">
                        <div class="pagination-info">
                            <span id="storePaginationInfo">Mostrando 0 de 0 produtos</span>
                        </div>
                        <div class="pagination-controls">
                            <button class="btn btn-small" id="storePrevPageBtn" disabled>
                                <i class="fas fa-chevron-left"></i>
                                Anterior
                            </button>
                            <span class="page-numbers" id="storePageNumbers"></span>
                            <button class="btn btn-small" id="storeNextPageBtn" disabled>
                                Próximo
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="sales">
                    <div class="content-header">
                        <h2 data-i18n="sales">💰 Vendas - Kiwify</h2>
                        <p data-i18n="sales-description">Gerencie vendas e integrações via Webhook</p>
                    </div>
                    
                    <!-- Sales Stats -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-calendar-alt"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="salesThisMonth">0</h3>
                                <p>Vendas no Mês</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="approvedSales">0</h3>
                                <p>Vendas Aprovadas</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-dollar-sign"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="totalRevenue">$0.00</h3>
                                <p>Total Arrecadado</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-trophy"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="bestSellingProduct">-</h3>
                                <p>Produto Mais Vendido</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Webhook Integration Section -->
                    <div class="webhook-section">
                        <div class="webhook-card">
                            <div class="webhook-header">
                                <h3><i class="fas fa-plug"></i> Integração Webhook Kiwify</h3>
                                <div class="webhook-status" id="webhookStatus">
                                    <span class="status-indicator disconnected"></span>
                                    <span class="status-text">Desconectado</span>
                                </div>
                            </div>
                            <div class="webhook-body">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="webhookUrl">URL do Webhook *</label>
                                        <input type="url" id="webhookUrl" placeholder="https://api.kiwify.com/webhook/your-endpoint" value="">
                                        <small class="form-help">Cole aqui a URL do webhook fornecida pela Kiwify</small>
                                    </div>
                                    <div class="webhook-actions">
                                        <button class="btn btn-secondary" id="testWebhookBtn">
                                            <i class="fas fa-flask"></i>
                                            Testar Conexão
                                        </button>
                                        <button class="btn btn-primary" id="saveWebhookBtn">
                                            <i class="fas fa-save"></i>
                                            Salvar
                                        </button>
                                    </div>
                                </div>
                                <div class="webhook-options">
                                    <div class="checkbox-group">
                                        <label class="checkbox-label">
                                            <input type="checkbox" id="autoCaptureSales" checked>
                                            <span class="checkbox-custom"></span>
                                            🔄 Capturar automaticamente novos pedidos
                                        </label>
                                    </div>
                                    <div class="checkbox-group">
                                        <label class="checkbox-label">
                                            <input type="checkbox" id="captureRefunds" checked>
                                            <span class="checkbox-custom"></span>
                                            💸 Capturar reembolsos e cancelamentos
                                        </label>
                                    </div>
                                    <div class="checkbox-group">
                                        <label class="checkbox-label">
                                            <input type="checkbox" id="autoUpgradePlan" checked>
                                            <span class="checkbox-custom"></span>
                                            👑 Liberar acesso Premium automaticamente
                                        </label>
                                    </div>
                                    <div class="checkbox-group">
                                        <label class="checkbox-label">
                                            <input type="checkbox" id="sendNotifications" checked>
                                            <span class="checkbox-custom"></span>
                                            🔔 Disparar notificações de boas-vindas
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Sales Controls -->
                    <div class="section-controls">
                        <div class="controls-left">
                            <button class="btn btn-primary" id="refreshSalesBtn">
                                <i class="fas fa-sync-alt"></i>
                                Atualizar Vendas
                            </button>
                            <button class="btn btn-secondary" id="exportSalesBtn">
                                <i class="fas fa-download"></i>
                                Exportar CSV
                            </button>
                            <button class="btn btn-info" id="addManualSaleBtn">
                                <i class="fas fa-plus"></i>
                                Adicionar Venda Manual
                            </button>
                        </div>
                        <div class="controls-right">
                            <div class="search-container">
                                <input type="text" id="salesSearchInput" placeholder="Buscar por nome ou email...">
                                <i class="fas fa-search"></i>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Sales Filters -->
                    <div class="filters-container">
                        <div class="filter-group">
                            <label for="salesStatusFilter">Status:</label>
                            <select id="salesStatusFilter">
                                <option value="">Todos</option>
                                <option value="approved">✅ Aprovado</option>
                                <option value="pending">⏳ Pendente</option>
                                <option value="refunded">💸 Reembolsado</option>
                                <option value="cancelled">❌ Cancelado</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="salesProductFilter">Produto:</label>
                            <select id="salesProductFilter">
                                <option value="">Todos os produtos</option>
                                <!-- Produtos serão populados dinamicamente -->
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="salesPlanFilter">Plano:</label>
                            <select id="salesPlanFilter">
                                <option value="">Todos</option>
                                <option value="premium">👑 Premium</option>
                                <option value="free">🆓 Gratuito</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="salesDateFromFilter">Data Início:</label>
                            <input type="date" id="salesDateFromFilter">
                        </div>
                        <div class="filter-group">
                            <label for="salesDateToFilter">Data Fim:</label>
                            <input type="date" id="salesDateToFilter">
                        </div>
                    </div>
                    
                    <!-- Sales Table -->
                    <div class="sales-container">
                        <div class="sales-table-container">
                            <table class="sales-table" id="salesTable">
                                <thead>
                                    <tr>
                                        <th>👤 Cliente</th>
                                        <th>📧 E-mail</th>
                                        <th>🛍️ Produto</th>
                                        <th>💰 Valor</th>
                                        <th>📅 Data</th>
                                        <th>🏪 Origem</th>
                                        <th>📊 Status</th>
                                        <th>🗣️ Idioma</th>
                                        <th>👑 Plano</th>
                                        <th>⚙️ Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="salesTableBody">
                                    <!-- Sales will be populated here -->
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="table-loading" id="salesLoading">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>Carregando vendas...</p>
                        </div>
                        
                        <div class="no-sales" id="noSalesMessage" style="display: none;">
                            <i class="fas fa-shopping-cart"></i>
                            <h3>Nenhuma venda encontrada</h3>
                            <p>Não há vendas registradas ou que correspondam aos filtros selecionados.</p>
                            <button class="btn btn-primary" onclick="salesManager.openManualSaleModal()">
                                <i class="fas fa-plus"></i>
                                Adicionar Primeira Venda
                            </button>
                        </div>
                    </div>
                    
                    <!-- Pagination -->
                    <div class="pagination-container">
                        <div class="pagination-info">
                            <span id="salesPaginationInfo">Mostrando 0 de 0 vendas</span>
                        </div>
                        <div class="pagination-controls">
                            <button class="btn btn-small" id="salesPrevPageBtn" disabled>
                                <i class="fas fa-chevron-left"></i>
                                Anterior
                            </button>
                            <span class="page-numbers" id="salesPageNumbers"></span>
                            <button class="btn btn-small" id="salesNextPageBtn" disabled>
                                Próximo
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="notifications">
                    <div class="content-header">
                        <h2 data-i18n="notifications">🔔 Notificações Push</h2>
                        <p data-i18n="notifications-description">Programe, segmente e dispare notificações PWA</p>
                    </div>
                    
                    <!-- Notifications Stats -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-paper-plane"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="notificationsSent">0</h3>
                                <p>Enviadas Hoje</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="notificationsScheduled">0</h3>
                                <p>Programadas</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="subscribedUsers">0</h3>
                                <p>Usuários Inscritos</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-mouse-pointer"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="clickThroughRate">0%</h3>
                                <p>Taxa de Clique</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Usage Recommendations -->
                    <div class="recommendations-section">
                        <div class="recommendations-card">
                            <h3><i class="fas fa-lightbulb"></i> Recomendações de Uso</h3>
                            <div class="recommendations-grid">
                                <div class="recommendation-item">
                                    <i class="fas fa-mobile-alt"></i>
                                    <span>Use títulos curtos e diretos para melhor visualização no celular</span>
                                </div>
                                <div class="recommendation-item">
                                    <i class="fas fa-ban"></i>
                                    <span>Evite spam — o ideal são no máximo 2 notificações por dia</span>
                                </div>
                                <div class="recommendation-item">
                                    <i class="fas fa-clock"></i>
                                    <span>Envie notificações entre 9h-21h para melhor engajamento</span>
                                </div>
                                <div class="recommendation-item">
                                    <i class="fas fa-globe"></i>
                                    <span>Personalize por idioma para melhor conversão</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Notifications Controls -->
                    <div class="section-controls">
                        <div class="controls-left">
                            <button class="btn btn-primary" id="createNotificationBtn">
                                <i class="fas fa-plus"></i>
                                Criar Nova Notificação
                            </button>
                            <button class="btn btn-secondary" id="templatesBtn">
                                <i class="fas fa-file-alt"></i>
                                Modelos Salvos
                            </button>
                            <button class="btn btn-info" id="exportNotificationsBtn">
                                <i class="fas fa-download"></i>
                                Exportar Relatório
                            </button>
                        </div>
                        <div class="controls-right">
                            <div class="search-container">
                                <input type="text" id="notificationsSearchInput" placeholder="Buscar notificações...">
                                <i class="fas fa-search"></i>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Notifications Filters -->
                    <div class="filters-container">
                        <div class="filter-group">
                            <label for="notificationsStatusFilter">Status:</label>
                            <select id="notificationsStatusFilter">
                                <option value="">Todos</option>
                                <option value="scheduled">📅 Programada</option>
                                <option value="sent">✅ Enviada</option>
                                <option value="cancelled">❌ Cancelada</option>
                                <option value="failed">⚠️ Falhou</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="notificationsLanguageFilter">Idioma:</label>
                            <select id="notificationsLanguageFilter">
                                <option value="">Todos</option>
                                <option value="es">🇪🇸 Español</option>
                                <option value="pt">🇧🇷 Português</option>
                                <option value="en">🇺🇸 English</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="notificationsSegmentFilter">Segmento:</label>
                            <select id="notificationsSegmentFilter">
                                <option value="">Todos</option>
                                <option value="all">👥 Todos os Usuários</option>
                                <option value="free">🆓 Gratuitos</option>
                                <option value="premium">👑 Premium</option>
                                <option value="event">🎯 Por Evento</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="notificationsDateFromFilter">Data Início:</label>
                            <input type="date" id="notificationsDateFromFilter">
                        </div>
                        <div class="filter-group">
                            <label for="notificationsDateToFilter">Data Fim:</label>
                            <input type="date" id="notificationsDateToFilter">
                        </div>
                    </div>
                    
                    <!-- Notifications Table -->
                    <div class="notifications-container">
                        <div class="notifications-table-container">
                            <table class="notifications-table" id="notificationsTable">
                                <thead>
                                    <tr>
                                        <th>📋 Título</th>
                                        <th>💬 Mensagem</th>
                                        <th>📅 Data/Hora</th>
                                        <th>🗣️ Idioma</th>
                                        <th>👥 Segmento</th>
                                        <th>📊 Status</th>
                                        <th>📈 Estatísticas</th>
                                        <th>⚙️ Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="notificationsTableBody">
                                    <!-- Notifications will be populated here -->
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="table-loading" id="notificationsLoading">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>Carregando notificações...</p>
                        </div>
                        
                        <div class="no-notifications" id="noNotificationsMessage" style="display: none;">
                            <i class="fas fa-bell-slash"></i>
                            <h3>Nenhuma notificação encontrada</h3>
                            <p>Não há notificações cadastradas ou que correspondam aos filtros selecionados.</p>
                            <button class="btn btn-primary" onclick="notificationsManager.openCreateNotificationModal()">
                                <i class="fas fa-plus"></i>
                                Criar Primeira Notificação
                            </button>
                        </div>
                    </div>
                    
                    <!-- Pagination -->
                    <div class="pagination-container">
                        <div class="pagination-info">
                            <span id="notificationsPaginationInfo">Mostrando 0 de 0 notificações</span>
                        </div>
                        <div class="pagination-controls">
                            <button class="btn btn-small" id="notificationsPrevPageBtn" disabled>
                                <i class="fas fa-chevron-left"></i>
                                Anterior
                            </button>
                            <span class="page-numbers" id="notificationsPageNumbers"></span>
                            <button class="btn btn-small" id="notificationsNextPageBtn" disabled>
                                Próximo
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="integrations">
                    <div class="content-header">
                        <h2 data-i18n="integrations">🔌 Integrações e APIs</h2>
                        <p data-i18n="integrations-description">Configure e teste conexões externas do sistema</p>
                    </div>
                    
                    <!-- Integration Status Overview -->
                    <div class="integration-overview">
                        <div class="overview-stats">
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-plug"></i>
                                </div>
                                <div class="stat-content">
                                    <h4 id="activeIntegrations">0</h4>
                                    <p>Integrações Ativas</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                                <div class="stat-content">
                                    <h4 id="workingIntegrations">0</h4>
                                    <p>Funcionando</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-exclamation-triangle"></i>
                                </div>
                                <div class="stat-content">
                                    <h4 id="failedIntegrations">0</h4>
                                    <p>Com Erro</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div class="stat-content">
                                    <h4 id="lastSync">-</h4>
                                    <p>Última Sincronização</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Integrations Grid -->
                    <div class="integrations-grid">
                        <!-- OpenAI Integration -->
                        <div class="integration-block">
                            <div class="integration-header">
                                <div class="integration-info">
                                    <i class="fas fa-robot"></i>
                                    <div>
                                        <h3>OpenAI</h3>
                                        <p>Suporte com IA e automações inteligentes</p>
                                    </div>
                                </div>
                                <div class="integration-status">
                                    <span class="status-badge disconnected" id="openaiStatus">Desconectado</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="openaiToggle">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                            </div>
                            <div class="integration-content" id="openaiContent">
                                <form id="openaiForm">
                                    <div class="form-group">
                                        <label for="openaiApiKey">Chave de API da OpenAI *</label>
                                        <div class="input-with-tooltip">
                                            <input type="password" id="openaiApiKey" name="apiKey" placeholder="sk-...">
                                            <div class="tooltip">
                                                <i class="fas fa-info-circle"></i>
                                                <span class="tooltip-text">Encontre sua chave em platform.openai.com/api-keys</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="openaiTemperature">Temperatura da Resposta</label>
                                            <select id="openaiTemperature" name="temperature">
                                                <option value="0.1">0.1 - Muito Conservadora</option>
                                                <option value="0.3">0.3 - Conservadora</option>
                                                <option value="0.5" selected>0.5 - Equilibrada</option>
                                                <option value="0.7">0.7 - Criativa</option>
                                                <option value="1.0">1.0 - Muito Criativa</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label for="openaiTone">Tom de Voz Preferido</label>
                                            <select id="openaiTone" name="tone">
                                                <option value="">Padrão</option>
                                                <option value="empathetic">Empático</option>
                                                <option value="informative">Informativo</option>
                                                <option value="direct">Direto</option>
                                                <option value="friendly">Amigável</option>
                                                <option value="professional">Profissional</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="openaiLanguage">Idioma das Respostas da IA</label>
                                        <select id="openaiLanguage" name="language">
                                            <option value="es">🇪🇸 Español</option>
                                            <option value="pt" selected>🇧🇷 Português</option>
                                            <option value="en">🇺🇸 English</option>
                                        </select>
                                    </div>
                                    <div class="integration-actions">
                                        <button type="button" class="btn btn-secondary" id="testOpenaiBtn">
                                            <i class="fas fa-flask"></i>
                                            Testar Conexão
                                        </button>
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-save"></i>
                                            Salvar
                                        </button>
                                    </div>
                                </form>
                                <div class="integration-logs" id="openaiLogs">
                                    <h4><i class="fas fa-list"></i> Logs Recentes</h4>
                                    <div class="logs-content">
                                        <div class="log-item">
                                            <span class="log-time">--:--</span>
                                            <span class="log-message">Aguardando configuração...</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Kiwify Integration -->
                        <div class="integration-block">
                            <div class="integration-header">
                                <div class="integration-info">
                                    <i class="fas fa-shopping-cart"></i>
                                    <div>
                                        <h3>Kiwify</h3>
                                        <p>Integração de vendas e pagamentos</p>
                                    </div>
                                </div>
                                <div class="integration-status">
                                    <span class="status-badge disconnected" id="kiwifyStatus">Desconectado</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="kiwifyToggle">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                            </div>
                            <div class="integration-content" id="kiwifyContent">
                                <form id="kiwifyForm">
                                    <div class="form-group">
                                        <label for="kiwifyApiKey">Chave da API da Kiwify *</label>
                                        <div class="input-with-tooltip">
                                            <input type="password" id="kiwifyApiKey" name="apiKey" placeholder="kw_...">
                                            <div class="tooltip">
                                                <i class="fas fa-info-circle"></i>
                                                <span class="tooltip-text">Acesse Configurações > Integrações no painel Kiwify</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="kiwifySalesWebhook">URL do Webhook de Vendas</label>
                                        <input type="url" id="kiwifySalesWebhook" name="salesWebhook" placeholder="https://seu-dominio.com/webhook/sales">
                                    </div>
                                    <div class="form-group">
                                        <label for="kiwifyRefundWebhook">URL do Webhook de Reembolso</label>
                                        <input type="url" id="kiwifyRefundWebhook" name="refundWebhook" placeholder="https://seu-dominio.com/webhook/refunds">
                                    </div>
                                    <div class="form-group">
                                        <label for="kiwifySecurityToken">Token de Segurança</label>
                                        <input type="password" id="kiwifySecurityToken" name="securityToken" placeholder="Token para validação de webhooks">
                                    </div>
                                    <div class="integration-actions">
                                        <button type="button" class="btn btn-secondary" id="testKiwifyBtn">
                                            <i class="fas fa-flask"></i>
                                            Testar Webhook
                                        </button>
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-save"></i>
                                            Salvar
                                        </button>
                                    </div>
                                </form>
                                <div class="integration-logs" id="kiwifyLogs">
                                    <h4><i class="fas fa-list"></i> Status da Integração</h4>
                                    <div class="logs-content">
                                        <div class="log-item">
                                            <span class="log-label">Última venda:</span>
                                            <span class="log-value">Nenhuma</span>
                                        </div>
                                        <div class="log-item">
                                            <span class="log-label">Último erro:</span>
                                            <span class="log-value">Nenhum</span>
                                        </div>
                                        <div class="log-item">
                                            <span class="log-label">Status da API:</span>
                                            <span class="log-value">Desconectado</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Zapier Integration -->
                        <div class="integration-block">
                            <div class="integration-header">
                                <div class="integration-info">
                                    <i class="fas fa-bolt"></i>
                                    <div>
                                        <h3>Zapier</h3>
                                        <p>Automações externas e workflows</p>
                                    </div>
                                </div>
                                <div class="integration-status">
                                    <span class="status-badge disconnected" id="zapierStatus">Inativo</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="zapierToggle">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                            </div>
                            <div class="integration-content" id="zapierContent">
                                <form id="zapierForm">
                                    <div class="form-group">
                                        <label for="zapierIncomingWebhook">Webhook Zapier (Entrada)</label>
                                        <div class="input-with-tooltip">
                                            <input type="url" id="zapierIncomingWebhook" name="incomingWebhook" placeholder="https://hooks.zapier.com/hooks/catch/...">
                                            <div class="tooltip">
                                                <i class="fas fa-info-circle"></i>
                                                <span class="tooltip-text">URL para enviar dados do Plan de Vitalidad para Zapier</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="zapierOutgoingWebhook">Webhook Zapier (Saída)</label>
                                        <div class="input-with-tooltip">
                                            <input type="url" id="zapierOutgoingWebhook" name="outgoingWebhook" placeholder="https://seu-dominio.com/webhook/zapier">
                                            <div class="tooltip">
                                                <i class="fas fa-info-circle"></i>
                                                <span class="tooltip-text">URL para receber dados do Zapier</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="zapierSecret">Token ou Secret (Opcional)</label>
                                        <input type="password" id="zapierSecret" name="secret" placeholder="Token de segurança para validação">
                                    </div>
                                    <div class="integration-actions">
                                        <button type="button" class="btn btn-secondary" id="testZapierBtn">
                                            <i class="fas fa-play"></i>
                                            Ativar Automações
                                        </button>
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-save"></i>
                                            Salvar
                                        </button>
                                    </div>
                                </form>
                                <div class="integration-logs" id="zapierLogs">
                                    <h4><i class="fas fa-list"></i> Status da Integração</h4>
                                    <div class="logs-content">
                                        <div class="log-item">
                                            <span class="log-label">Status:</span>
                                            <span class="log-value">Inativo</span>
                                        </div>
                                        <div class="log-item">
                                            <span class="log-label">Último disparo:</span>
                                            <span class="log-value">Nenhum</span>
                                        </div>
                                        <div class="log-item">
                                            <span class="log-label">Automações ativas:</span>
                                            <span class="log-value">0</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Firebase Integration -->
                        <div class="integration-block">
                            <div class="integration-header">
                                <div class="integration-info">
                                    <i class="fas fa-database"></i>
                                    <div>
                                        <h3>Firebase</h3>
                                        <p>Autenticação e banco de dados</p>
                                    </div>
                                </div>
                                <div class="integration-status">
                                    <span class="status-badge disconnected" id="firebaseStatus">Desconectado</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="firebaseToggle">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                            </div>
                            <div class="integration-content" id="firebaseContent">
                                <form id="firebaseForm">
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="firebaseApiKey">API Key *</label>
                                            <input type="password" id="firebaseApiKey" name="apiKey" placeholder="AIza...">
                                        </div>
                                        <div class="form-group">
                                            <label for="firebaseAuthDomain">Auth Domain *</label>
                                            <input type="text" id="firebaseAuthDomain" name="authDomain" placeholder="projeto.firebaseapp.com">
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="firebaseProjectId">Project ID *</label>
                                            <input type="text" id="firebaseProjectId" name="projectId" placeholder="meu-projeto">
                                        </div>
                                        <div class="form-group">
                                            <label for="firebaseMessagingSenderId">Messaging Sender ID</label>
                                            <input type="text" id="firebaseMessagingSenderId" name="messagingSenderId" placeholder="123456789">
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="firebaseAppId">App ID *</label>
                                            <input type="text" id="firebaseAppId" name="appId" placeholder="1:123:web:abc">
                                        </div>
                                        <div class="form-group">
                                            <label for="firebaseDatabaseUrl">URL do Realtime Database (Opcional)</label>
                                            <input type="url" id="firebaseDatabaseUrl" name="databaseUrl" placeholder="https://projeto-default-rtdb.firebaseio.com/">
                                        </div>
                                    </div>
                                    <div class="integration-actions">
                                        <button type="button" class="btn btn-secondary" id="testFirebaseBtn">
                                            <i class="fas fa-flask"></i>
                                            Testar Conexão
                                        </button>
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-save"></i>
                                            Salvar e Conectar
                                        </button>
                                    </div>
                                </form>
                                <div class="integration-logs" id="firebaseLogs">
                                    <h4><i class="fas fa-list"></i> Status da Conexão</h4>
                                    <div class="logs-content">
                                        <div class="log-item">
                                            <span class="log-label">Autenticação:</span>
                                            <span class="log-value">Desconectado</span>
                                        </div>
                                        <div class="log-item">
                                            <span class="log-label">Firestore:</span>
                                            <span class="log-value">Desconectado</span>
                                        </div>
                                        <div class="log-item">
                                            <span class="log-label">Realtime DB:</span>
                                            <span class="log-value">Não configurado</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Custom Integration -->
                        <div class="integration-block">
                            <div class="integration-header">
                                <div class="integration-info">
                                    <i class="fas fa-plus-circle"></i>
                                    <div>
                                        <h3>Integração Personalizada</h3>
                                        <p>Adicione outras integrações futuras</p>
                                    </div>
                                </div>
                                <div class="integration-status">
                                    <span class="status-badge disconnected" id="customStatus">Não configurado</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="customToggle">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                            </div>
                            <div class="integration-content" id="customContent">
                                <form id="customForm">
                                    <div class="form-group">
                                        <label for="customName">Nome da Integração</label>
                                        <input type="text" id="customName" name="name" placeholder="Ex: MailChimp, ConvertKit, etc.">
                                    </div>
                                    <div class="form-group">
                                        <label for="customApiKey">Chave de API</label>
                                        <input type="password" id="customApiKey" name="apiKey" placeholder="Chave da API do serviço">
                                    </div>
                                    <div class="form-group">
                                        <label for="customEndpoint">Endpoint da API</label>
                                        <input type="url" id="customEndpoint" name="endpoint" placeholder="https://api.servico.com/v1/">
                                    </div>
                                    <div class="form-group">
                                        <label for="customWebhook">URL do Webhook</label>
                                        <input type="url" id="customWebhook" name="webhook" placeholder="https://seu-dominio.com/webhook/custom">
                                    </div>
                                    <div class="integration-actions">
                                        <button type="button" class="btn btn-secondary" id="testCustomBtn">
                                            <i class="fas fa-flask"></i>
                                            Testar
                                        </button>
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-save"></i>
                                            Salvar
                                        </button>
                                    </div>
                                </form>
                                <div class="integration-logs" id="customLogs">
                                    <h4><i class="fas fa-list"></i> Logs da API</h4>
                                    <div class="logs-content">
                                        <div class="log-item">
                                            <span class="log-label">Último retorno:</span>
                                            <span class="log-value">Nenhum</span>
                                        </div>
                                        <div class="log-item">
                                            <span class="log-label">Status de falha:</span>
                                            <span class="log-value">Nenhum</span>
                                        </div>
                                        <div class="log-item">
                                            <span class="log-label">Status OK:</span>
                                            <span class="log-value">Não testado</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Integration Alerts -->
                    <div class="integration-alerts" id="integrationAlerts" style="display: none;">
                        <div class="alert alert-danger">
                            <i class="fas fa-exclamation-triangle"></i>
                            <div class="alert-content">
                                <strong>Falha de Integração!</strong>
                                <span id="integrationAlertMessage">A integração com Kiwify está falhando. Verifique as credenciais.</span>
                            </div>
                            <button class="alert-action" onclick="integrationsManager.reconnectIntegration('kiwify')">
                                <i class="fas fa-sync"></i>
                                Reconectar
                            </button>
                        </div>
                    </div>
                    
                    <!-- Export Integration Data -->
                    <div class="integration-export">
                        <div class="export-card">
                            <h3><i class="fas fa-download"></i> Exportar Dados de Conexão</h3>
                            <p>Exporte as configurações de integração para backup ou migração.</p>
                            <div class="export-actions">
                                <button class="btn btn-secondary" id="exportIntegrationsBtn">
                                    <i class="fas fa-file-export"></i>
                                    Exportar Configurações
                                </button>
                                <button class="btn btn-info" id="importIntegrationsBtn">
                                    <i class="fas fa-file-import"></i>
                                    Importar Configurações
                                </button>
                            </div>
                            <input type="file" id="importIntegrationsFile" accept=".json" style="display: none;">
                            <small class="form-help">⚠️ Disponível apenas para administradores autorizados</small>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="reports">
                    <div class="content-header">
                        <h2 data-i18n="reports">📈 Relatórios e Analytics</h2>
                        <p data-i18n="reports-description">Análises detalhadas de vendas, engajamento e performance</p>
                    </div>
                    
                    <!-- Alerts Section -->
                    <div class="alerts-section" id="alertsSection" style="display: none;">
                        <div class="alert alert-warning">
                            <i class="fas fa-exclamation-triangle"></i>
                            <div class="alert-content">
                                <strong>Atenção!</strong>
                                <span id="alertMessage">Detectada queda de 40% nas visualizações dos bônus nos últimos 7 dias.</span>
                            </div>
                            <button class="alert-close" onclick="reportsManager.closeAlert()">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Filters and Controls -->
                    <div class="reports-controls">
                        <div class="controls-left">
                            <div class="filter-group">
                                <label for="reportsDateFilter">Período:</label>
                                <select id="reportsDateFilter">
                                    <option value="7">Últimos 7 dias</option>
                                    <option value="30" selected>Últimos 30 dias</option>
                                    <option value="90">Últimos 90 dias</option>
                                    <option value="custom">Período personalizado</option>
                                </select>
                            </div>
                            <div class="filter-group" id="customDateGroup" style="display: none;">
                                <input type="date" id="reportsDateFrom">
                                <span>até</span>
                                <input type="date" id="reportsDateTo">
                            </div>
                            <div class="filter-group">
                                <label for="reportsLanguageFilter">Idioma:</label>
                                <select id="reportsLanguageFilter">
                                    <option value="">Todos</option>
                                    <option value="es">🇪🇸 Español</option>
                                    <option value="pt">🇧🇷 Português</option>
                                    <option value="en">🇺🇸 English</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label for="reportsUserTypeFilter">Tipo de Usuário:</label>
                                <select id="reportsUserTypeFilter">
                                    <option value="">Todos</option>
                                    <option value="free">🆓 Gratuito</option>
                                    <option value="premium">👑 Premium</option>
                                </select>
                            </div>
                        </div>
                        <div class="controls-right">
                            <button class="btn btn-secondary" id="saveReportBtn">
                                <i class="fas fa-star"></i>
                                Salvar como Favorito
                            </button>
                            <button class="btn btn-info" id="exportExcelBtn">
                                <i class="fas fa-file-excel"></i>
                                Exportar Excel
                            </button>
                            <button class="btn btn-primary" id="generatePdfBtn">
                                <i class="fas fa-file-pdf"></i>
                                Gerar PDF
                            </button>
                        </div>
                    </div>
                    
                    <!-- Reports Sections -->
                    <div class="reports-grid">
                        <!-- Sales Section -->
                        <div class="report-section">
                            <div class="section-header">
                                <h3><i class="fas fa-shopping-cart"></i> Relatório de Vendas</h3>
                                <button class="section-toggle" onclick="reportsManager.toggleSection('sales')">
                                    <i class="fas fa-chevron-up"></i>
                                </button>
                            </div>
                            <div class="section-content" id="salesSection">
                                <div class="section-stats">
                                    <div class="stat-card">
                                        <div class="stat-icon">
                                            <i class="fas fa-dollar-sign"></i>
                                        </div>
                                        <div class="stat-content">
                                            <h4 id="totalRevenue">$0</h4>
                                            <p>Receita Total</p>
                                        </div>
                                    </div>
                                    <div class="stat-card">
                                        <div class="stat-icon">
                                            <i class="fas fa-shopping-bag"></i>
                                        </div>
                                        <div class="stat-content">
                                            <h4 id="totalSales">0</h4>
                                            <p>Total de Vendas</p>
                                        </div>
                                    </div>
                                    <div class="stat-card">
                                        <div class="stat-icon">
                                            <i class="fas fa-crown"></i>
                                        </div>
                                        <div class="stat-content">
                                            <h4 id="bestSellingProduct">-</h4>
                                            <p>Produto Mais Vendido</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="charts-container">
                                    <div class="chart-card">
                                        <h4>Vendas por Produto (Últimos 30 dias)</h4>
                                        <canvas id="salesByProductChart" width="400" height="200"></canvas>
                                    </div>
                                    <div class="chart-card">
                                        <h4>Vendas por Idioma</h4>
                                        <canvas id="salesByLanguageChart" width="400" height="200"></canvas>
                                    </div>
                                </div>
                                
                                <div class="data-table">
                                    <h4>Receita por Plano</h4>
                                    <table class="reports-table">
                                        <thead>
                                            <tr>
                                                <th>Plano</th>
                                                <th>Vendas</th>
                                                <th>Receita</th>
                                                <th>% do Total</th>
                                            </tr>
                                        </thead>
                                        <tbody id="revenueByPlanTable">
                                            <!-- Data will be populated here -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Engagement Section -->
                        <div class="report-section">
                            <div class="section-header">
                                <h3><i class="fas fa-trophy"></i> Engajamento com Desafios</h3>
                                <button class="section-toggle" onclick="reportsManager.toggleSection('engagement')">
                                    <i class="fas fa-chevron-up"></i>
                                </button>
                            </div>
                            <div class="section-content" id="engagementSection">
                                <div class="section-stats">
                                    <div class="stat-card">
                                        <div class="stat-icon">
                                            <i class="fas fa-users"></i>
                                        </div>
                                        <div class="stat-content">
                                            <h4 id="mostPopularChallenge">-</h4>
                                            <p>Desafio Mais Popular</p>
                                        </div>
                                    </div>
                                    <div class="stat-card">
                                        <div class="stat-icon">
                                            <i class="fas fa-percentage"></i>
                                        </div>
                                        <div class="stat-content">
                                            <h4 id="highestCompletionRate">0%</h4>
                                            <p>Maior Taxa de Conclusão</p>
                                        </div>
                                    </div>
                                    <div class="stat-card">
                                        <div class="stat-icon">
                                            <i class="fas fa-calendar-day"></i>
                                        </div>
                                        <div class="stat-content">
                                            <h4 id="avgDaysCompleted">0</h4>
                                            <p>Média de Dias Concluídos</p>
                                        </div>
                                    </div>
                                    <div class="stat-card">
                                        <div class="stat-icon">
                                            <i class="fas fa-clock"></i>
                                        </div>
                                        <div class="stat-content">
                                            <h4 id="activeUsers24h">0</h4>
                                            <p>Usuários Ativos (24h)</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="charts-container">
                                    <div class="chart-card">
                                        <h4>Inscritos por Desafio</h4>
                                        <canvas id="challengeSubscriptionsChart" width="400" height="200"></canvas>
                                    </div>
                                    <div class="chart-card">
                                        <h4>Taxa de Conclusão por Desafio</h4>
                                        <canvas id="challengeCompletionChart" width="400" height="200"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Digital Products Section -->
                        <div class="report-section">
                            <div class="section-header">
                                <h3><i class="fas fa-book"></i> Acessos a Produtos Digitais</h3>
                                <button class="section-toggle" onclick="reportsManager.toggleSection('products')">
                                    <i class="fas fa-chevron-up"></i>
                                </button>
                            </div>
                            <div class="section-content" id="productsSection">
                                <div class="section-stats">
                                    <div class="stat-card">
                                        <div class="stat-icon">
                                            <i class="fas fa-eye"></i>
                                        </div>
                                        <div class="stat-content">
                                            <h4 id="totalProductViews">0</h4>
                                            <p>Total de Acessos</p>
                                        </div>
                                    </div>
                                    <div class="stat-card">
                                        <div class="stat-icon">
                                            <i class="fas fa-star"></i>
                                        </div>
                                        <div class="stat-content">
                                            <h4 id="mostAccessedProduct">-</h4>
                                            <p>Mais Acessado da Semana</p>
                                        </div>
                                    </div>
                                    <div class="stat-card">
                                        <div class="stat-icon">
                                            <i class="fas fa-book-reader"></i>
                                        </div>
                                        <div class="stat-content">
                                            <h4 id="readingRate">0%</h4>
                                            <p>Taxa de Leitura</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="charts-container">
                                    <div class="chart-card">
                                        <h4>Acessos por eBook/Bônus</h4>
                                        <canvas id="productAccessChart" width="400" height="200"></canvas>
                                    </div>
                                    <div class="chart-card">
                                        <h4>Gratuitos vs Premium</h4>
                                        <canvas id="accessByPlanChart" width="400" height="200"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Bonus Section -->
                        <div class="report-section">
                            <div class="section-header">
                                <h3><i class="fas fa-gift"></i> Relatório de Bônus</h3>
                                <button class="section-toggle" onclick="reportsManager.toggleSection('bonus')">
                                    <i class="fas fa-chevron-up"></i>
                                </button>
                            </div>
                            <div class="section-content" id="bonusSection">
                                <div class="section-stats">
                                    <div class="stat-card">
                                        <div class="stat-icon">
                                            <i class="fas fa-download"></i>
                                        </div>
                                        <div class="stat-content">
                                            <h4 id="mostDownloadedBonus">-</h4>
                                            <p>Bônus Mais Baixado</p>
                                        </div>
                                    </div>
                                    <div class="stat-card">
                                        <div class="stat-icon">
                                            <i class="fas fa-unlock"></i>
                                        </div>
                                        <div class="stat-content">
                                            <h4 id="totalUnlocks">0</h4>
                                            <p>Total de Desbloqueios</p>
                                        </div>
                                    </div>
                                    <div class="stat-card">
                                        <div class="stat-icon">
                                            <i class="fas fa-heart"></i>
                                        </div>
                                        <div class="stat-content">
                                            <h4 id="highestEngagementBonus">-</h4>
                                            <p>Maior Engajamento</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="charts-container">
                                    <div class="chart-card">
                                        <h4>Downloads por Bônus</h4>
                                        <canvas id="bonusDownloadsChart" width="400" height="200"></canvas>
                                    </div>
                                    <div class="chart-card">
                                        <h4>Engajamento por Bônus</h4>
                                        <canvas id="bonusEngagementChart" width="400" height="200"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Saved Reports -->
                    <div class="saved-reports-section">
                        <h3><i class="fas fa-star"></i> Relatórios Favoritos</h3>
                        <div class="saved-reports-grid" id="savedReportsGrid">
                            <!-- Saved reports will be populated here -->
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="autoresponder">
                    <div class="content-header">
                        <h2 data-i18n="autoresponder">📬 Autoresponder</h2>
                        <p data-i18n="autoresponder-description">Crie e gerencie e-mails automáticos para leads e compradores</p>
                    </div>
                    
                    <!-- Autoresponder Overview -->
                    <div class="autoresponder-overview">
                        <div class="autoresponder-stats" id="autoresponderStats">
                            <!-- Stats will be populated by JavaScript -->
                        </div>
                    </div>
                    
                    <!-- Autoresponder Container -->
                    <div class="autoresponder-container">
                        <!-- Email Creation Section -->
                        <div class="autoresponder-section">
                            <div class="autoresponder-section-header emails">
                                <h3><i class="fas fa-envelope"></i> Cadastro de E-mails Automáticos</h3>
                                <button class="create-email-btn" id="createEmailBtn">
                                    <i class="fas fa-plus"></i>
                                    Criar Novo E-mail Automático
                                </button>
                            </div>
                            <div class="autoresponder-section-content">
                                <!-- Search and Filters -->
                                <div class="search-filters">
                                    <div class="search-box">
                                        <i class="fas fa-search"></i>
                                        <input type="text" id="emailSearch" placeholder="Buscar por assunto ou título...">
                                    </div>
                                    <select class="filter-select" id="statusFilter">
                                        <option value="all">Todos os Status</option>
                                        <option value="active">Ativos</option>
                                        <option value="inactive">Inativos</option>
                                    </select>
                                    <select class="filter-select" id="languageFilter">
                                        <option value="all">Todos os Idiomas</option>
                                        <option value="spanish">Español</option>
                                        <option value="portuguese">Português</option>
                                        <option value="english">English</option>
                                    </select>
                                    <select class="filter-select" id="triggerFilter">
                                        <option value="all">Todos os Gatilhos</option>
                                        <option value="immediate">Imediato</option>
                                        <option value="after_register">Após Cadastro</option>
                                        <option value="after_purchase">Após Compra</option>
                                        <option value="weekly">Semanal</option>
                                    </select>
                                </div>
                                
                                <!-- Email List -->
                                <div class="email-list" id="emailList">
                                    <!-- Email items will be populated by JavaScript -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Automation Events Section -->
                        <div class="autoresponder-section">
                            <div class="autoresponder-section-header automations">
                                <h3><i class="fas fa-cogs"></i> Automação por Eventos</h3>
                            </div>
                            <div class="autoresponder-section-content">
                                <div class="automation-events" id="automationsList">
                                    <!-- Automation events will be populated by JavaScript -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Integration Settings Section -->
                        <div class="autoresponder-section">
                            <div class="autoresponder-section-header integrations">
                                <h3><i class="fas fa-plug"></i> Integrações Externas</h3>
                            </div>
                            <div class="autoresponder-section-content">
                                <div class="integration-grid" id="integrationsList">
                                    <!-- Integration cards will be populated by JavaScript -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Statistics Dashboard -->
                        <div class="autoresponder-section">
                            <div class="autoresponder-section-header">
                                <h3><i class="fas fa-chart-bar"></i> Estatísticas por E-mail</h3>
                            </div>
                            <div class="autoresponder-section-content">
                                <div class="stats-dashboard">
                                    <div class="stats-chart">
                                        <h4>Taxa de Abertura por Idioma</h4>
                                        <div class="chart-placeholder">
                                            Gráfico de taxa de abertura por idioma
                                        </div>
                                    </div>
                                    <div class="stats-chart">
                                        <h4>E-mails Enviados (Últimos 30 dias)</h4>
                                        <div class="chart-placeholder">
                                            Gráfico de linha de e-mails enviados
                                        </div>
                                    </div>
                                    <div class="stats-chart">
                                        <h4>Performance por Gatilho</h4>
                                        <div class="chart-placeholder">
                                            Gráfico de barras por tipo de gatilho
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Email Creation/Edit Modal -->
                    <div class="email-modal" id="emailModal">
                        <div class="email-modal-content">
                            <div class="email-modal-header">
                                <h3 id="emailModalTitle">Criar Novo E-mail Automático</h3>
                                <button class="btn btn-secondary" onclick="autoresponderManager.closeEmailModal()">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            <div class="email-modal-body">
                                <form id="emailForm">
                                    <div class="form-group">
                                        <label for="emailTitle">Título Interno *</label>
                                        <input type="text" id="emailTitle" name="title" required placeholder="Ex: Boas-vindas - Novo Usuário">
                                        <small class="form-help">Nome interno para identificar o e-mail (não visível para o usuário)</small>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="emailSubject">Assunto do E-mail *</label>
                                        <input type="text" id="emailSubject" name="subject" required placeholder="Ex: ¡Bienvenido al Plan de Vitalidad! 🌟">
                                        <small class="form-help">Assunto que aparecerá na caixa de entrada do usuário</small>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="emailLanguage">Idioma do E-mail</label>
                                        <select id="emailLanguage" name="language" required>
                                            <option value="spanish">🇪🇸 Español</option>
                                            <option value="portuguese">🇧🇷 Português</option>
                                            <option value="english">🇺🇸 English</option>
                                        </select>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label>Corpo do E-mail *</label>
                                        <div class="rich-text-editor">
                                            <div class="editor-toolbar">
                                                <button type="button" class="editor-btn" data-command="bold" title="Negrito">
                                                    <i class="fas fa-bold"></i>
                                                </button>
                                                <button type="button" class="editor-btn" data-command="italic" title="Itálico">
                                                    <i class="fas fa-italic"></i>
                                                </button>
                                                <button type="button" class="editor-btn" data-command="underline" title="Sublinhado">
                                                    <i class="fas fa-underline"></i>
                                                </button>
                                                <div class="editor-separator"></div>
                                                <button type="button" class="editor-btn" data-command="insertUnorderedList" title="Lista">
                                                    <i class="fas fa-list-ul"></i>
                                                </button>
                                                <button type="button" class="editor-btn" data-command="insertOrderedList" title="Lista Numerada">
                                                    <i class="fas fa-list-ol"></i>
                                                </button>
                                                <div class="editor-separator"></div>
                                                <button type="button" class="editor-btn" data-command="createLink" title="Link">
                                                    <i class="fas fa-link"></i>
                                                </button>
                                                <button type="button" class="editor-btn" data-command="unlink" title="Remover Link">
                                                    <i class="fas fa-unlink"></i>
                                                </button>
                                            </div>
                                            <div class="editor-content" contenteditable="true" 
                                                 placeholder="Digite o conteúdo do seu e-mail aqui..."></div>
                                        </div>
                                        <small class="form-help">Use a barra de ferramentas para formatar o texto</small>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label>Disparar Para</label>
                                        <div class="target-selector">
                                            <div class="target-option">
                                                <input type="radio" name="target" value="all_subscribers" id="target_all">
                                                <div class="radio-custom"></div>
                                                <div class="option-info">
                                                    <h4>Todos os Inscritos</h4>
                                                    <p>Enviar para todos os usuários cadastrados</p>
                                                </div>
                                            </div>
                                            <div class="target-option">
                                                <input type="radio" name="target" value="buyers_only" id="target_buyers">
                                                <div class="radio-custom"></div>
                                                <div class="option-info">
                                                    <h4>Apenas Compradores</h4>
                                                    <p>Apenas usuários que compraram produtos</p>
                                                </div>
                                            </div>
                                            <div class="target-option">
                                                <input type="radio" name="target" value="free_users" id="target_free">
                                                <div class="radio-custom"></div>
                                                <div class="option-info">
                                                    <h4>Apenas Usuários Gratuitos</h4>
                                                    <p>Usuários que não fizeram compras</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label>Agendamento</label>
                                        <div class="schedule-selector">
                                            <div class="schedule-option">
                                                <input type="radio" name="schedule" value="immediate" id="schedule_immediate">
                                                <div class="radio-custom"></div>
                                                <div class="option-info">
                                                    <h4>Imediato</h4>
                                                    <p>Enviar assim que o gatilho for ativado</p>
                                                </div>
                                            </div>
                                            <div class="schedule-option">
                                                <input type="radio" name="schedule" value="after_register" id="schedule_register">
                                                <div class="radio-custom"></div>
                                                <div class="option-info">
                                                    <h4>Após Inscrição</h4>
                                                    <p>Disparar após X dias da inscrição</p>
                                                </div>
                                            </div>
                                            <div class="schedule-option">
                                                <input type="radio" name="schedule" value="after_purchase" id="schedule_purchase">
                                                <div class="radio-custom"></div>
                                                <div class="option-info">
                                                    <h4>Após Venda Confirmada</h4>
                                                    <p>Disparar após confirmação de compra</p>
                                                </div>
                                            </div>
                                            <div class="schedule-option">
                                                <input type="radio" name="schedule" value="weekly" id="schedule_weekly">
                                                <div class="radio-custom"></div>
                                                <div class="option-info">
                                                    <h4>Periodicidade</h4>
                                                    <p>Enviar semanalmente ou mensalmente</p>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="schedule-details" id="after_register-details">
                                            <div class="form-row">
                                                <div class="form-group">
                                                    <label>Dias após inscrição</label>
                                                    <input type="number" min="0" max="365" value="1" placeholder="1">
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="schedule-details" id="after_purchase-details">
                                            <div class="form-row">
                                                <div class="form-group">
                                                    <label>Minutos após compra</label>
                                                    <input type="number" min="0" max="1440" value="30" placeholder="30">
                                                    <small class="form-help">0 = imediato, 60 = 1 hora, 1440 = 1 dia</small>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="schedule-details" id="weekly-details">
                                            <div class="form-row">
                                                <div class="form-group">
                                                    <label>Frequência</label>
                                                    <select>
                                                        <option value="weekly">Semanal</option>
                                                        <option value="monthly">Mensal</option>
                                                    </select>
                                                </div>
                                                <div class="form-group">
                                                    <label>Dia da semana</label>
                                                    <select>
                                                        <option value="monday">Segunda-feira</option>
                                                        <option value="tuesday">Terça-feira</option>
                                                        <option value="wednesday">Quarta-feira</option>
                                                        <option value="thursday">Quinta-feira</option>
                                                        <option value="friday">Sexta-feira</option>
                                                        <option value="saturday">Sábado</option>
                                                        <option value="sunday">Domingo</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <div class="email-modal-footer">
                                <button class="btn btn-secondary" onclick="autoresponderManager.closeEmailModal()">
                                    <i class="fas fa-times"></i>
                                    Cancelar
                                </button>
                                <button class="btn btn-primary" onclick="autoresponderManager.saveEmail()">
                                    <i class="fas fa-save"></i>
                                    Salvar E-mail
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="app-customization">
                    <div class="content-header">
                        <h2 data-i18n="app-customization">🎨 Personalização do App</h2>
                        <p data-i18n="app-customization-description">Configure a identidade visual e layout do aplicativo PWA</p>
                    </div>
                    
                    <!-- Customization Overview -->
                    <div class="customization-overview">
                        <div class="overview-stats">
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-palette"></i>
                                </div>
                                <div class="stat-content">
                                    <h4 id="customThemeStatus">Tema Padrão</h4>
                                    <p>Status do Tema</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-mobile-alt"></i>
                                </div>
                                <div class="stat-content">
                                    <h4 id="layoutModelStatus">Cards</h4>
                                    <p>Modelo de Layout</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-language"></i>
                                </div>
                                <div class="stat-content">
                                    <h4 id="primaryLanguageStatus">Español</h4>
                                    <p>Idioma Principal</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-save"></i>
                                </div>
                                <div class="stat-content">
                                    <h4 id="lastSavedStatus">Não Salvo</h4>
                                    <p>Última Alteração</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Customization Sections -->
                    <div class="customization-container">
                        <div class="customization-left">
                            <!-- Visual Identity Section -->
                            <div class="customization-section">
                                <div class="section-header">
                                    <h3><i class="fas fa-image"></i> Identidade Visual</h3>
                                </div>
                                <div class="section-content">
                                    <div class="form-group">
                                        <label for="appName">Nome do App</label>
                                        <input type="text" id="appName" placeholder="Plan de Vitalidad" maxlength="30">
                                        <small class="form-help">Nome exibido na tela de instalação (máx. 30 caracteres)</small>
                                    </div>
                                    
                                    <div class="upload-grid">
                                        <div class="upload-item">
                                            <label>Logotipo (PNG transparente)</label>
                                            <div class="upload-area" id="logoUpload">
                                                <div class="upload-placeholder">
                                                    <i class="fas fa-image"></i>
                                                    <p>Clique para fazer upload</p>
                                                    <small>PNG, máx. 2MB</small>
                                                </div>
                                                <input type="file" id="logoFile" accept=".png" style="display: none;">
                                                <div class="upload-preview" id="logoPreview" style="display: none;">
                                                    <img id="logoImg" src="" alt="Logo">
                                                    <button class="remove-upload" id="removeLogo">
                                                        <i class="fas fa-times"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="upload-item">
                                            <label>Ícone PWA (512x512px)</label>
                                            <div class="upload-area" id="iconUpload">
                                                <div class="upload-placeholder">
                                                    <i class="fas fa-mobile-alt"></i>
                                                    <p>Clique para fazer upload</p>
                                                    <small>PNG/JPG, 512x512px</small>
                                                </div>
                                                <input type="file" id="iconFile" accept=".png,.jpg,.jpeg" style="display: none;">
                                                <div class="upload-preview" id="iconPreview" style="display: none;">
                                                    <img id="iconImg" src="" alt="Ícone">
                                                    <button class="remove-upload" id="removeIcon">
                                                        <i class="fas fa-times"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="upload-item">
                                            <label>Splash Screen (opcional)</label>
                                            <div class="upload-area" id="splashUpload">
                                                <div class="upload-placeholder">
                                                    <i class="fas fa-desktop"></i>
                                                    <p>Clique para fazer upload</p>
                                                    <small>PNG/JPG, máx. 3MB</small>
                                                </div>
                                                <input type="file" id="splashFile" accept=".png,.jpg,.jpeg" style="display: none;">
                                                <div class="upload-preview" id="splashPreview" style="display: none;">
                                                    <img id="splashImg" src="" alt="Splash">
                                                    <button class="remove-upload" id="removeSplash">
                                                        <i class="fas fa-times"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Color Palette Section -->
                            <div class="customization-section">
                                <div class="section-header">
                                    <h3><i class="fas fa-palette"></i> Paleta de Cores</h3>
                                    <button class="btn btn-secondary btn-small" id="resetColorsBtn">
                                        <i class="fas fa-undo"></i>
                                        Restaurar Padrão
                                    </button>
                                </div>
                                <div class="section-content">
                                    <div class="color-grid">
                                        <div class="color-item">
                                            <label for="primaryColor">Cor Principal</label>
                                            <div class="color-input-wrapper">
                                                <input type="color" id="primaryColor" value="#10B981">
                                                <input type="text" id="primaryColorText" value="#10B981" placeholder="#10B981">
                                            </div>
                                            <small>Botões, destaques, elementos principais</small>
                                        </div>
                                        
                                        <div class="color-item">
                                            <label for="secondaryColor">Cor Secundária</label>
                                            <div class="color-input-wrapper">
                                                <input type="color" id="secondaryColor" value="#6B7280">
                                                <input type="text" id="secondaryColorText" value="#6B7280" placeholder="#6B7280">
                                            </div>
                                            <small>Textos secundários, ícones</small>
                                        </div>
                                        
                                        <div class="color-item">
                                            <label for="backgroundColor">Cor de Fundo</label>
                                            <div class="color-input-wrapper">
                                                <input type="color" id="backgroundColor" value="#F9FAFB">
                                                <input type="text" id="backgroundColorText" value="#F9FAFB" placeholder="#F9FAFB">
                                            </div>
                                            <small>Fundo geral do aplicativo</small>
                                        </div>
                                        
                                        <div class="color-item">
                                            <label for="titleColor">Cor dos Títulos</label>
                                            <div class="color-input-wrapper">
                                                <input type="color" id="titleColor" value="#1F2937">
                                                <input type="text" id="titleColorText" value="#1F2937" placeholder="#1F2937">
                                            </div>
                                            <small>Títulos, cabeçalhos principais</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Style Elements Section -->
                            <div class="customization-section">
                                <div class="section-header">
                                    <h3><i class="fas fa-cogs"></i> Estilo dos Elementos</h3>
                                </div>
                                <div class="section-content">
                                    <div class="form-group">
                                        <label>Fonte Principal</label>
                                        <div class="font-selector">
                                            <select id="fontFamily">
                                                <option value="Inter">Inter (Padrão)</option>
                                                <option value="Poppins">Poppins</option>
                                                <option value="Roboto">Roboto</option>
                                                <option value="Open Sans">Open Sans</option>
                                                <option value="Lato">Lato</option>
                                                <option value="Montserrat">Montserrat</option>
                                            </select>
                                            <div class="font-preview" id="fontPreview">
                                                <p>Exemplo de texto com a fonte selecionada</p>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label>Estilo de Botões</label>
                                        <div class="button-style-selector">
                                            <div class="button-option active" data-style="rounded">
                                                <div class="button-preview rounded">Arredondados</div>
                                                <span>Arredondados</span>
                                            </div>
                                            <div class="button-option" data-style="square">
                                                <div class="button-preview square">Retos</div>
                                                <span>Retos</span>
                                            </div>
                                            <div class="button-option" data-style="shadow">
                                                <div class="button-preview shadow">Com Sombra</div>
                                                <span>Com Sombra</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="checkbox-label">
                                            <input type="checkbox" id="enableAnimations" checked>
                                            <span class="checkbox-custom"></span>
                                            Ativar animações e transições suaves
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Home Layout Section -->
                            <div class="customization-section">
                                <div class="section-header">
                                    <h3><i class="fas fa-home"></i> Layout da Home</h3>
                                </div>
                                <div class="section-content">
                                    <div class="layout-selector">
                                        <div class="layout-option active" data-layout="cards">
                                            <div class="layout-preview">
                                                <div class="preview-header"></div>
                                                <div class="preview-cards">
                                                    <div class="preview-card"></div>
                                                    <div class="preview-card"></div>
                                                    <div class="preview-card"></div>
                                                    <div class="preview-card"></div>
                                                </div>
                                            </div>
                                            <div class="layout-info">
                                                <h4>Estilo Cards</h4>
                                                <p>Banners e seções em cards</p>
                                            </div>
                                        </div>
                                        
                                        <div class="layout-option" data-layout="list">
                                            <div class="layout-preview">
                                                <div class="preview-header"></div>
                                                <div class="preview-list">
                                                    <div class="preview-item">
                                                        <div class="preview-icon"></div>
                                                        <div class="preview-text"></div>
                                                    </div>
                                                    <div class="preview-item">
                                                        <div class="preview-icon"></div>
                                                        <div class="preview-text"></div>
                                                    </div>
                                                    <div class="preview-item">
                                                        <div class="preview-icon"></div>
                                                        <div class="preview-text"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="layout-info">
                                                <h4>Estilo Lista</h4>
                                                <p>Ícones verticais em lista</p>
                                            </div>
                                        </div>
                                        
                                        <div class="layout-option" data-layout="grid">
                                            <div class="layout-preview">
                                                <div class="preview-header"></div>
                                                <div class="preview-grid">
                                                    <div class="preview-block"></div>
                                                    <div class="preview-block"></div>
                                                    <div class="preview-block"></div>
                                                    <div class="preview-block"></div>
                                                    <div class="preview-block"></div>
                                                    <div class="preview-block"></div>
                                                </div>
                                            </div>
                                            <div class="layout-info">
                                                <h4>Estilo Grade</h4>
                                                <p>Mosaico de blocos</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Primary Language Section -->
                            <div class="customization-section">
                                <div class="section-header">
                                    <h3><i class="fas fa-language"></i> Idioma Principal do App</h3>
                                </div>
                                <div class="section-content">
                                    <div class="language-selector-custom">
                                        <div class="language-option-custom active" data-lang="es">
                                            <div class="language-flag">🇪🇸</div>
                                            <div class="language-info">
                                                <h4>Español</h4>
                                                <p>Idioma padrão para novos usuários</p>
                                            </div>
                                        </div>
                                        
                                        <div class="language-option-custom" data-lang="pt">
                                            <div class="language-flag">🇧🇷</div>
                                            <div class="language-info">
                                                <h4>Português</h4>
                                                <p>Idioma padrão para novos usuários</p>
                                            </div>
                                        </div>
                                        
                                        <div class="language-option-custom" data-lang="en">
                                            <div class="language-flag">🇺🇸</div>
                                            <div class="language-info">
                                                <h4>English</h4>
                                                <p>Idioma padrão para novos usuários</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="language-note">
                                        <i class="fas fa-info-circle"></i>
                                        <p>O idioma principal será usado no primeiro carregamento do app PWA. Usuários poderão alterar no menu lateral.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Save Section -->
                            <div class="customization-actions">
                                <button class="btn btn-primary btn-large" id="saveCustomizationBtn">
                                    <i class="fas fa-save"></i>
                                    Salvar Personalização
                                </button>
                            </div>
                        </div>
                        
                        <!-- Live Preview Section -->
                        <div class="customization-right">
                            <div class="preview-section">
                                <div class="preview-header">
                                    <h3><i class="fas fa-eye"></i> Preview do App</h3>
                                    <div class="preview-controls">
                                        <button class="preview-device active" data-device="mobile">
                                            <i class="fas fa-mobile-alt"></i>
                                        </button>
                                        <button class="preview-device" data-device="tablet">
                                            <i class="fas fa-tablet-alt"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="preview-container">
                                    <div class="preview-device-frame mobile" id="previewFrame">
                                        <div class="preview-screen" id="previewScreen">
                                            <div class="preview-app">
                                                <div class="preview-app-header">
                                                    <div class="preview-logo">
                                                        <img id="previewLogo" src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🌱</text></svg>" alt="Logo">
                                                    </div>
                                                    <div class="preview-app-title" id="previewAppName">Plan de Vitalidad</div>
                                                </div>
                                                
                                                <div class="preview-content" id="previewContent">
                                                    <!-- Cards Layout -->
                                                    <div class="preview-layout cards active" id="previewCards">
                                                        <div class="preview-banner"></div>
                                                        <div class="preview-cards-grid">
                                                            <div class="preview-card-item">
                                                                <div class="preview-card-icon"></div>
                                                                <div class="preview-card-text"></div>
                                                            </div>
                                                            <div class="preview-card-item">
                                                                <div class="preview-card-icon"></div>
                                                                <div class="preview-card-text"></div>
                                                            </div>
                                                            <div class="preview-card-item">
                                                                <div class="preview-card-icon"></div>
                                                                <div class="preview-card-text"></div>
                                                            </div>
                                                            <div class="preview-card-item">
                                                                <div class="preview-card-icon"></div>
                                                                <div class="preview-card-text"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <!-- List Layout -->
                                                    <div class="preview-layout list" id="previewList">
                                                        <div class="preview-list-items">
                                                            <div class="preview-list-item">
                                                                <div class="preview-list-icon"></div>
                                                                <div class="preview-list-text"></div>
                                                                <div class="preview-list-arrow"></div>
                                                            </div>
                                                            <div class="preview-list-item">
                                                                <div class="preview-list-icon"></div>
                                                                <div class="preview-list-text"></div>
                                                                <div class="preview-list-arrow"></div>
                                                            </div>
                                                            <div class="preview-list-item">
                                                                <div class="preview-list-icon"></div>
                                                                <div class="preview-list-text"></div>
                                                                <div class="preview-list-arrow"></div>
                                                            </div>
                                                            <div class="preview-list-item">
                                                                <div class="preview-list-icon"></div>
                                                                <div class="preview-list-text"></div>
                                                                <div class="preview-list-arrow"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <!-- Grid Layout -->
                                                    <div class="preview-layout grid" id="previewGrid">
                                                        <div class="preview-grid-items">
                                                            <div class="preview-grid-item"></div>
                                                            <div class="preview-grid-item"></div>
                                                            <div class="preview-grid-item"></div>
                                                            <div class="preview-grid-item"></div>
                                                            <div class="preview-grid-item"></div>
                                                            <div class="preview-grid-item"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div class="preview-bottom-nav">
                                                    <div class="preview-nav-item active">
                                                        <div class="preview-nav-icon"></div>
                                                    </div>
                                                    <div class="preview-nav-item">
                                                        <div class="preview-nav-icon"></div>
                                                    </div>
                                                    <div class="preview-nav-item">
                                                        <div class="preview-nav-icon"></div>
                                                    </div>
                                                    <div class="preview-nav-item">
                                                        <div class="preview-nav-icon"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="gamification">
                    <div class="content-header">
                        <h2 data-i18n="gamification">🎮 Gamificação</h2>
                        <p data-i18n="gamification-description">Sistema completo de pontos, conquistas e recompensas</p>
                    </div>
                    
                    <!-- Gamification Overview Stats -->
                    <div class="gamification-overview">
                        <div class="overview-stats">
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-star"></i>
                                </div>
                                <div class="stat-content">
                                    <h4 id="totalPointsAwarded">0</h4>
                                    <p>Pontos Distribuídos</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-trophy"></i>
                                </div>
                                <div class="stat-content">
                                    <h4 id="totalAchievements">0</h4>
                                    <p>Conquistas Ativas</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-medal"></i>
                                </div>
                                <div class="stat-content">
                                    <h4 id="totalUnlockedAchievements">0</h4>
                                    <p>Conquistas Desbloqueadas</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-gift"></i>
                                </div>
                                <div class="stat-content">
                                    <h4 id="totalRewards">0</h4>
                                    <p>Recompensas Disponíveis</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Gamification Tabs -->
                    <div class="gamification-tabs">
                        <button class="gamification-tab active" data-section="rules">
                            <i class="fas fa-cog"></i>
                            Regras de Pontuação
                        </button>
                        <button class="gamification-tab" data-section="achievements">
                            <i class="fas fa-trophy"></i>
                            Conquistas e Selos
                        </button>
                        <button class="gamification-tab" data-section="progress">
                            <i class="fas fa-chart-line"></i>
                            Progresso dos Usuários
                        </button>
                        <button class="gamification-tab" data-section="rewards">
                            <i class="fas fa-gift"></i>
                            Sistema de Recompensas
                        </button>
                        <button class="gamification-tab" data-section="ranking">
                            <i class="fas fa-crown"></i>
                            Ranking
                        </button>
                    </div>
                    
                    <!-- Rules Section -->
                    <div class="gamification-section active" id="rulesSection">
                        <div class="section-header">
                            <h3><i class="fas fa-cog"></i> Regras de Pontuação</h3>
                            <button class="btn btn-primary" id="createRuleBtn">
                                <i class="fas fa-plus"></i>
                                Adicionar Nova Regra
                            </button>
                        </div>
                        
                        <div class="rules-container">
                            <div class="rules-grid" id="rulesGrid">
                                <!-- Rules will be populated here -->
                            </div>
                            
                            <div class="no-rules" id="noRulesMessage" style="display: none;">
                                <i class="fas fa-cog"></i>
                                <h4>Nenhuma regra configurada</h4>
                                <p>Crie regras de pontuação para engajar seus usuários.</p>
                                <button class="btn btn-primary" onclick="gamificationManager.openCreateRuleModal()">
                                    <i class="fas fa-plus"></i>
                                    Criar Primeira Regra
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Achievements Section -->
                    <div class="gamification-section" id="achievementsSection">
                        <div class="section-header">
                            <h3><i class="fas fa-trophy"></i> Conquistas e Selos</h3>
                            <button class="btn btn-primary" id="createAchievementBtn">
                                <i class="fas fa-plus"></i>
                                Criar Nova Conquista
                            </button>
                        </div>
                        
                        <div class="achievements-container">
                            <div class="achievements-grid" id="achievementsGrid">
                                <!-- Achievements will be populated here -->
                            </div>
                            
                            <div class="no-achievements" id="noAchievementsMessage" style="display: none;">
                                <i class="fas fa-trophy"></i>
                                <h4>Nenhuma conquista criada</h4>
                                <p>Crie conquistas para motivar seus usuários.</p>
                                <button class="btn btn-primary" onclick="gamificationManager.openCreateAchievementModal()">
                                    <i class="fas fa-plus"></i>
                                    Criar Primeira Conquista
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Progress Section -->
                    <div class="gamification-section" id="progressSection">
                        <div class="section-header">
                            <h3><i class="fas fa-chart-line"></i> Progresso dos Usuários</h3>
                            <div class="section-controls">
                                <button class="btn btn-secondary" id="exportProgressBtn">
                                    <i class="fas fa-download"></i>
                                    Exportar Progresso
                                </button>
                                <button class="btn btn-info" id="refreshProgressBtn">
                                    <i class="fas fa-sync"></i>
                                    Atualizar
                                </button>
                            </div>
                        </div>
                        
                        <!-- Progress Filters -->
                        <div class="progress-filters">
                            <div class="filter-group">
                                <label for="progressUserFilter">Usuário:</label>
                                <input type="text" id="progressUserFilter" placeholder="Nome ou e-mail...">
                            </div>
                            <div class="filter-group">
                                <label for="progressLanguageFilter">Idioma:</label>
                                <select id="progressLanguageFilter">
                                    <option value="">Todos</option>
                                    <option value="es">🇪🇸 Español</option>
                                    <option value="pt">🇧🇷 Português</option>
                                    <option value="en">🇺🇸 English</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label for="progressPlanFilter">Plano:</label>
                                <select id="progressPlanFilter">
                                    <option value="">Todos</option>
                                    <option value="free">🆓 Gratuito</option>
                                    <option value="premium">👑 Premium</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label for="progressAchievementFilter">Conquista:</label>
                                <select id="progressAchievementFilter">
                                    <option value="">Todas</option>
                                    <!-- Will be populated dynamically -->
                                </select>
                            </div>
                        </div>
                        
                        <div class="progress-container">
                            <div class="progress-table-container">
                                <table class="progress-table" id="progressTable">
                                    <thead>
                                        <tr>
                                            <th>👤 Usuário</th>
                                            <th>⭐ Pontuação</th>
                                            <th>🏆 Conquistas</th>
                                            <th>📊 Progresso</th>
                                            <th>🕒 Última Atividade</th>
                                            <th>⚙️ Ações</th>
                                        </tr>
                                    </thead>
                                    <tbody id="progressTableBody">
                                        <!-- Progress data will be populated here -->
                                    </tbody>
                                </table>
                            </div>
                            
                            <div class="no-progress" id="noProgressMessage" style="display: none;">
                                <i class="fas fa-chart-line"></i>
                                <h4>Nenhum progresso encontrado</h4>
                                <p>Não há dados de gamificação para exibir.</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Rewards Section -->
                    <div class="gamification-section" id="rewardsSection">
                        <div class="section-header">
                            <h3><i class="fas fa-gift"></i> Sistema de Recompensas</h3>
                            <button class="btn btn-primary" id="createRewardBtn">
                                <i class="fas fa-plus"></i>
                                Criar Nova Recompensa
                            </button>
                        </div>
                        
                        <div class="rewards-container">
                            <div class="rewards-grid" id="rewardsGrid">
                                <!-- Rewards will be populated here -->
                            </div>
                            
                            <div class="no-rewards" id="noRewardsMessage" style="display: none;">
                                <i class="fas fa-gift"></i>
                                <h4>Nenhuma recompensa configurada</h4>
                                <p>Crie recompensas para motivar seus usuários.</p>
                                <button class="btn btn-primary" onclick="gamificationManager.openCreateRewardModal()">
                                    <i class="fas fa-plus"></i>
                                    Criar Primeira Recompensa
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Ranking Section -->
                    <div class="gamification-section" id="rankingSection">
                        <div class="section-header">
                            <h3><i class="fas fa-crown"></i> Ranking de Usuários</h3>
                            <div class="section-controls">
                                <select id="rankingPeriodFilter">
                                    <option value="week">Esta Semana</option>
                                    <option value="month" selected>Este Mês</option>
                                    <option value="year">Este Ano</option>
                                    <option value="all">Todos os Tempos</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="ranking-container">
                            <div class="podium-container">
                                <div class="podium">
                                    <div class="podium-place second" id="secondPlace">
                                        <div class="podium-user">
                                            <div class="podium-avatar">2</div>
                                            <div class="podium-name">-</div>
                                            <div class="podium-points">0 pts</div>
                                        </div>
                                        <div class="podium-base silver">2º</div>
                                    </div>
                                    <div class="podium-place first" id="firstPlace">
                                        <div class="podium-user">
                                            <div class="podium-avatar">👑</div>
                                            <div class="podium-name">-</div>
                                            <div class="podium-points">0 pts</div>
                                        </div>
                                        <div class="podium-base gold">1º</div>
                                    </div>
                                    <div class="podium-place third" id="thirdPlace">
                                        <div class="podium-user">
                                            <div class="podium-avatar">3</div>
                                            <div class="podium-name">-</div>
                                            <div class="podium-points">0 pts</div>
                                        </div>
                                        <div class="podium-base bronze">3º</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="ranking-list" id="rankingList">
                                <!-- Ranking list will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="general-settings">
                    <div class="content-header">
                        <h2 data-i18n="general-settings">⚙️ Configurações Gerais</h2>
                        <p data-i18n="general-settings-description">Configure todas as opções globais da plataforma</p>
                    </div>
                    
                    <!-- General Settings Overview -->
                    <div class="general-settings-overview">
                        <div class="overview-stats">
                            <div class="stat-card platform">
                                <div class="stat-icon">🏢</div>
                                <div class="stat-content">
                                    <h4 id="platformStatus">Ativo</h4>
                                    <p>Status da Plataforma</p>
                                </div>
                            </div>
                            <div class="stat-card security">
                                <div class="stat-icon">🔒</div>
                                <div class="stat-content">
                                    <h4 id="securityLevel">Alto</h4>
                                    <p>Nível de Segurança</p>
                                </div>
                            </div>
                            <div class="stat-card integrations">
                                <div class="stat-icon">🔗</div>
                                <div class="stat-content">
                                    <h4 id="activeIntegrations">5</h4>
                                    <p>Integrações Ativas</p>
                                </div>
                            </div>
                            <div class="stat-card backup">
                                <div class="stat-icon">💾</div>
                                <div class="stat-content">
                                    <h4 id="lastBackup">Hoje</h4>
                                    <p>Último Backup</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Quick Actions Bar -->
                    <div class="quick-actions-bar">
                        <button class="quick-action-btn" onclick="generalSettingsManager.exportSettings()">
                            <i class="fas fa-download"></i>
                            <span>Exportar Configurações</span>
                        </button>
                        <button class="quick-action-btn" onclick="generalSettingsManager.importSettings()">
                            <i class="fas fa-upload"></i>
                            <span>Importar Configurações</span>
                        </button>
                        <button class="quick-action-btn" onclick="generalSettingsManager.resetToDefaults()">
                            <i class="fas fa-undo"></i>
                            <span>Restaurar Padrões</span>
                        </button>
                        <button class="quick-action-btn" onclick="generalSettingsManager.testAllSystems()">
                            <i class="fas fa-stethoscope"></i>
                            <span>Testar Sistemas</span>
                        </button>
                    </div>
                    
                    <!-- Settings Categories Grid -->
                    <div class="settings-categories-grid">
                        <!-- Platform Settings -->
                        <div class="settings-category" data-category="platform">
                            <div class="category-header">
                                <div class="category-icon">🏢</div>
                                <div class="category-info">
                                    <h3>Configurações da Plataforma</h3>
                                    <p>Informações gerais e identificação</p>
                                </div>
                                <div class="category-status">
                                    <span class="status-indicator active"></span>
                                </div>
                            </div>
                            <div class="category-content">
                                <div class="form-group">
                                    <label for="platformName">Nome da Plataforma</label>
                                    <input type="text" id="platformName" value="Plan de Vitalidad" placeholder="Nome da sua plataforma">
                                </div>
                                <div class="form-group">
                                    <label for="platformDescription">Descrição/Tagline</label>
                                    <input type="text" id="platformDescription" value="Transforme sua vida com hábitos saudáveis" placeholder="Slogan ou descrição curta">
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="platformTimezone">Timezone Padrão</label>
                                        <select id="platformTimezone">
                                            <option value="America/Sao_Paulo">🇧🇷 América/São_Paulo (GMT-3)</option>
                                            <option value="Europe/Madrid">🇪🇸 Europa/Madrid (GMT+1)</option>
                                            <option value="America/New_York">🇺🇸 América/Nova_York (GMT-5)</option>
                                            <option value="Europe/London">🇬🇧 Europa/Londres (GMT+0)</option>
                                            <option value="America/Mexico_City">🇲🇽 América/México (GMT-6)</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="platformCurrency">Moeda Padrão</label>
                                        <select id="platformCurrency">
                                            <option value="USD">💵 USD - Dólar Americano</option>
                                            <option value="EUR">💶 EUR - Euro</option>
                                            <option value="BRL">💰 BRL - Real Brasileiro</option>
                                            <option value="MXN">🪙 MXN - Peso Mexicano</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="platformUrl">URL Base da Plataforma</label>
                                    <input type="url" id="platformUrl" value="https://antonio2101nj.github.io/Plan-de-Vitalidad/" placeholder="https://seudominio.com">
                                </div>
                            </div>
                        </div>
                        
                        <!-- Language and Localization -->
                        <div class="settings-category" data-category="localization">
                            <div class="category-header">
                                <div class="category-icon">🌍</div>
                                <div class="category-info">
                                    <h3>Idioma e Localização</h3>
                                    <p>Configurações regionais e idiomas</p>
                                </div>
                                <div class="category-status">
                                    <span class="status-indicator active"></span>
                                </div>
                            </div>
                            <div class="category-content">
                                <div class="form-group">
                                    <label>Idiomas Disponíveis</label>
                                    <div class="language-toggles">
                                        <label class="toggle-option">
                                            <input type="checkbox" id="lang_spanish" checked>
                                            <span class="toggle-slider"></span>
                                            <span class="toggle-label">🇪🇸 Español</span>
                                        </label>
                                        <label class="toggle-option">
                                            <input type="checkbox" id="lang_portuguese" checked>
                                            <span class="toggle-slider"></span>
                                            <span class="toggle-label">🇧🇷 Português</span>
                                        </label>
                                        <label class="toggle-option">
                                            <input type="checkbox" id="lang_english" checked>
                                            <span class="toggle-slider"></span>
                                            <span class="toggle-label">🇺🇸 English</span>
                                        </label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="defaultLanguage">Idioma Padrão</label>
                                    <select id="defaultLanguage">
                                        <option value="es">🇪🇸 Español</option>
                                        <option value="pt">🇧🇷 Português</option>
                                        <option value="en">🇺🇸 English</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="autoDetectLanguage" checked>
                                        <span class="checkbox-custom"></span>
                                        Detectar idioma automaticamente por IP
                                    </label>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="dateFormat">Formato de Data</label>
                                        <select id="dateFormat">
                                            <option value="DD/MM/YYYY">DD/MM/YYYY (Brasil/Europa)</option>
                                            <option value="MM/DD/YYYY">MM/DD/YYYY (EUA)</option>
                                            <option value="YYYY-MM-DD">YYYY-MM-DD (ISO)</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="timeFormat">Formato de Hora</label>
                                        <select id="timeFormat">
                                            <option value="24h">24 horas (15:30)</option>
                                            <option value="12h">12 horas (3:30 PM)</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- User Settings -->
                        <div class="settings-category" data-category="users">
                            <div class="category-header">
                                <div class="category-icon">👥</div>
                                <div class="category-info">
                                    <h3>Configurações de Usuários</h3>
                                    <p>Registro, autenticação e políticas</p>
                                </div>
                                <div class="category-status">
                                    <span class="status-indicator active"></span>
                                </div>
                            </div>
                            <div class="category-content">
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="allowRegistration" checked>
                                        <span class="checkbox-custom"></span>
                                        Permitir registro automático de usuários
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="requireEmailVerification" checked>
                                        <span class="checkbox-custom"></span>
                                        Exigir verificação de e-mail
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="manualApproval">
                                        <span class="checkbox-custom"></span>
                                        Aprovação manual de novos usuários
                                    </label>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="minPasswordLength">Tamanho Mínimo da Senha</label>
                                        <input type="number" id="minPasswordLength" value="6" min="4" max="20">
                                        <small>Entre 4 e 20 caracteres</small>
                                    </div>
                                    <div class="form-group">
                                        <label for="sessionTimeout">Tempo de Sessão (horas)</label>
                                        <input type="number" id="sessionTimeout" value="24" min="1" max="168">
                                        <small>Auto-logout após inatividade</small>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="maxDevices">Máximo de Dispositivos Simultâneos</label>
                                    <input type="number" id="maxDevices" value="3" min="1" max="10">
                                    <small>Quantos dispositivos um usuário pode usar ao mesmo tempo</small>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Payment Settings -->
                        <div class="settings-category" data-category="payments">
                            <div class="category-header">
                                <div class="category-icon">💳</div>
                                <div class="category-info">
                                    <h3>Configurações de Pagamento</h3>
                                    <p>Gateways, moedas e políticas</p>
                                </div>
                                <div class="category-status">
                                    <span class="status-indicator warning"></span>
                                </div>
                            </div>
                            <div class="category-content">
                                <div class="form-group">
                                    <label for="defaultGateway">Gateway Padrão</label>
                                    <select id="defaultGateway">
                                        <option value="kiwify">Kiwify</option>
                                        <option value="stripe">Stripe</option>
                                        <option value="paypal">PayPal</option>
                                        <option value="mercadopago">Mercado Pago</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Moedas Aceitas</label>
                                    <div class="currency-toggles">
                                        <label class="toggle-option">
                                            <input type="checkbox" id="currency_usd" checked>
                                            <span class="toggle-slider"></span>
                                            <span class="toggle-label">💵 USD</span>
                                        </label>
                                        <label class="toggle-option">
                                            <input type="checkbox" id="currency_eur" checked>
                                            <span class="toggle-slider"></span>
                                            <span class="toggle-label">💶 EUR</span>
                                        </label>
                                        <label class="toggle-option">
                                            <input type="checkbox" id="currency_brl" checked>
                                            <span class="toggle-slider"></span>
                                            <span class="toggle-label">💰 BRL</span>
                                        </label>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="refundPolicy">Política de Reembolso (dias)</label>
                                        <input type="number" id="refundPolicy" value="7" min="0" max="365">
                                    </div>
                                    <div class="form-group">
                                        <label for="paymentRetries">Tentativas de Cobrança</label>
                                        <input type="number" id="paymentRetries" value="3" min="1" max="10">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="webhookUrl">URL de Webhook</label>
                                    <input type="url" id="webhookUrl" placeholder="https://seudominio.com/webhook/payment">
                                    <small>Para receber notificações de pagamento</small>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Email Settings -->
                        <div class="settings-category" data-category="email">
                            <div class="category-header">
                                <div class="category-icon">📧</div>
                                <div class="category-info">
                                    <h3>Configurações de E-mail</h3>
                                    <p>SMTP, templates e limites</p>
                                </div>
                                <div class="category-status">
                                    <span class="status-indicator active"></span>
                                </div>
                            </div>
                            <div class="category-content">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="senderName">Nome do Remetente</label>
                                        <input type="text" id="senderName" value="Plan de Vitalidad" placeholder="Nome que aparece no e-mail">
                                    </div>
                                    <div class="form-group">
                                        <label for="senderEmail">E-mail do Remetente</label>
                                        <input type="email" id="senderEmail" value="noreply@plandevitalidad.com" placeholder="email@seudominio.com">
                                    </div>
                                </div>
                                <div class="smtp-config">
                                    <h5><i class="fas fa-server"></i> Configuração SMTP (Opcional)</h5>
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="smtpHost">Servidor SMTP</label>
                                            <input type="text" id="smtpHost" placeholder="smtp.gmail.com">
                                        </div>
                                        <div class="form-group">
                                            <label for="smtpPort">Porta</label>
                                            <input type="number" id="smtpPort" value="587" placeholder="587">
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="smtpUsername">Usuário SMTP</label>
                                            <input type="text" id="smtpUsername" placeholder="seu@email.com">
                                        </div>
                                        <div class="form-group">
                                            <label for="smtpPassword">Senha SMTP</label>
                                            <input type="password" id="smtpPassword" placeholder="••••••••">
                                        </div>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="emailLimitHour">Limite por Hora</label>
                                        <input type="number" id="emailLimitHour" value="100" min="1">
                                        <small>E-mails enviados por hora</small>
                                    </div>
                                    <div class="form-group">
                                        <label for="emailLimitDay">Limite por Dia</label>
                                        <input type="number" id="emailLimitDay" value="1000" min="1">
                                        <small>E-mails enviados por dia</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Security Settings -->
                        <div class="settings-category" data-category="security">
                            <div class="category-header">
                                <div class="category-icon">🔒</div>
                                <div class="category-info">
                                    <h3>Segurança e Privacidade</h3>
                                    <p>2FA, logs e compliance</p>
                                </div>
                                <div class="category-status">
                                    <span class="status-indicator active"></span>
                                </div>
                            </div>
                            <div class="category-content">
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="require2FA" checked>
                                        <span class="checkbox-custom"></span>
                                        Exigir 2FA para administradores
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="enableLogs" checked>
                                        <span class="checkbox-custom"></span>
                                        Registrar logs de atividade
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="gdprCompliance" checked>
                                        <span class="checkbox-custom"></span>
                                        Conformidade LGPD/GDPR
                                    </label>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="logRetention">Retenção de Logs (dias)</label>
                                        <input type="number" id="logRetention" value="90" min="1" max="365">
                                    </div>
                                    <div class="form-group">
                                        <label for="backupFrequency">Frequência de Backup</label>
                                        <select id="backupFrequency">
                                            <option value="daily">Diário</option>
                                            <option value="weekly">Semanal</option>
                                            <option value="monthly">Mensal</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="blockedIPs">IPs Bloqueados</label>
                                    <textarea id="blockedIPs" placeholder="192.168.1.1&#10;10.0.0.1" rows="3"></textarea>
                                    <small>Um IP por linha</small>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Save Actions -->
                    <div class="settings-save-actions">
                        <div class="save-actions-left">
                            <button class="btn btn-secondary" onclick="generalSettingsManager.previewChanges()">
                                <i class="fas fa-eye"></i>
                                Visualizar Mudanças
                            </button>
                            <button class="btn btn-warning" onclick="generalSettingsManager.resetCategory()">
                                <i class="fas fa-undo"></i>
                                Restaurar Seção
                            </button>
                        </div>
                        <div class="save-actions-right">
                            <button class="btn btn-primary btn-large" onclick="generalSettingsManager.saveAllSettings()">
                                <i class="fas fa-save"></i>
                                Salvar Todas as Configurações
                            </button>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="support">
                    <div class="content-header">
                        <h2 data-i18n="support">🤖 Central de Suporte com IA</h2>
                        <p data-i18n="support-description">Sistema inteligente para responder dúvidas dos usuários com IA ou suporte manual</p>
                    </div>
                    
                    <!-- Support Overview Stats -->
                    <div class="support-overview">
                        <div class="support-stats">
                            <div class="stat-card ai">
                                <div class="stat-icon">
                                    <i class="fas fa-robot"></i>
                                </div>
                                <div class="stat-content">
                                    <h4 id="aiResponses">0</h4>
                                    <p>Respostas por IA</p>
                                </div>
                            </div>
                            <div class="stat-card manual">
                                <div class="stat-icon">
                                    <i class="fas fa-user-tie"></i>
                                </div>
                                <div class="stat-content">
                                    <h4 id="manualResponses">0</h4>
                                    <p>Respostas Manuais</p>
                                </div>
                            </div>
                            <div class="stat-card pending">
                                <div class="stat-icon">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div class="stat-content">
                                    <h4 id="pendingTickets">0</h4>
                                    <p>Aguardando Resposta</p>
                                </div>
                            </div>
                            <div class="stat-card resolved">
                                <div class="stat-icon">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                                <div class="stat-content">
                                    <h4 id="resolvedTickets">0</h4>
                                    <p>Tickets Resolvidos</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-star"></i>
                                </div>
                                <div class="stat-content">
                                    <h4 id="satisfactionRating">0</h4>
                                    <p>Satisfação Média</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-ticket-alt"></i>
                                </div>
                                <div class="stat-content">
                                    <h4 id="totalTickets">0</h4>
                                    <p>Total de Tickets</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Support Configuration and Inbox -->
                    <div class="support-container">
                        <!-- AI Configuration Section -->
                        <div class="support-section">
                            <div class="support-section-header ai">
                                <h3><i class="fas fa-brain"></i> Configuração da IA</h3>
                                <button class="btn btn-light btn-small" id="saveSettingsBtn">
                                    <i class="fas fa-save"></i> Salvar
                                </button>
                            </div>
                            <div class="support-section-content">
                                <div class="ai-config-grid">
                                    <!-- AI Toggle -->
                                    <div class="ai-toggle" id="aiToggle">
                                        <div class="ai-toggle-info">
                                            <h4>Ativar IA como Padrão</h4>
                                            <p>Responder automaticamente com inteligência artificial</p>
                                            <div class="api-status" id="apiStatus">
                                                <i class="fas fa-times-circle"></i> API Desconectada
                                            </div>
                                        </div>
                                        <div class="toggle-switch" id="aiToggleSwitch"></div>
                                    </div>
                                    
                                    <!-- API Configuration -->
                                    <div class="form-group">
                                        <label>Conexão OpenAI</label>
                                        <div class="form-row">
                                            <button class="btn btn-secondary" id="testApiBtn">
                                                <i class="fas fa-plug"></i> Testar Conexão
                                            </button>
                                        </div>
                                        <small class="form-help">API Key será carregada automaticamente das integrações</small>
                                    </div>
                                    
                                    <!-- Response Language -->
                                    <div class="form-group">
                                        <label for="responseLanguage">Idioma Padrão das Respostas</label>
                                        <select id="responseLanguage">
                                            <option value="es">🇪🇸 Español</option>
                                            <option value="pt">🇧🇷 Português</option>
                                            <option value="en">🇺🇸 English</option>
                                        </select>
                                    </div>
                                    
                                    <!-- AI Tone -->
                                    <div class="form-group">
                                        <label>Tom da IA</label>
                                        <div class="tone-selector">
                                            <div class="tone-option active" data-tone="empathetic">
                                                <i class="fas fa-heart"></i>
                                                <span>Empático</span>
                                            </div>
                                            <div class="tone-option" data-tone="technical">
                                                <i class="fas fa-cogs"></i>
                                                <span>Técnico</span>
                                            </div>
                                            <div class="tone-option" data-tone="direct">
                                                <i class="fas fa-bolt"></i>
                                                <span>Direto</span>
                                            </div>
                                            <div class="tone-option" data-tone="cultural">
                                                <i class="fas fa-globe"></i>
                                                <span>Cultural</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Training Data -->
                                    <div class="form-group">
                                        <label>Treinamento Base da IA</label>
                                        <div class="training-editor">
                                            <div class="training-editor-header">
                                                <h5><i class="fas fa-database"></i> Base de Conhecimento</h5>
                                                <div class="training-stats">
                                                    <span id="wordCount">0 palavras</span>
                                                    <span id="charCount">0 caracteres</span>
                                                    <span id="lineCount">0 linhas</span>
                                                </div>
                                            </div>
                                            <div class="training-editor-content">
                                                <textarea id="trainingData" placeholder="Cole aqui o conteúdo dos seus produtos (transcrições de eBooks, resumos de bônus, explicações de desafios, termos de política, FAQ, etc.) para treinar a IA com informações específicas do seu negócio...

Exemplo:
- Nosso eBook principal fala sobre alimentação saudável...
- Os desafios premium incluem exercícios de 30 dias...
- Nossa política de reembolso é de 7 dias...
- Para problemas técnicos, primeiro orientar a reiniciar o app..."></textarea>
                                            </div>
                                        </div>
                                        <small class="form-help">Quanto mais específico e detalhado, melhores serão as respostas da IA</small>
                                    </div>
                                    
                                    <!-- Limits -->
                                    <div class="form-group">
                                        <label>Limites de Resposta</label>
                                        <div class="limits-grid">
                                            <div class="form-group">
                                                <label for="dailyLimit">Limite Diário Total</label>
                                                <input type="number" id="dailyLimit" min="1" max="1000" value="50">
                                                <small>Máximo de respostas IA por dia</small>
                                            </div>
                                            <div class="form-group">
                                                <label for="userLimit">Limite por Usuário</label>
                                                <input type="number" id="userLimit" min="1" max="50" value="10">
                                                <small>Máximo por usuário/dia</small>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Auto Response -->
                                    <div class="form-group">
                                        <label class="checkbox-label">
                                            <input type="checkbox" id="autoResponse" checked>
                                            <span class="checkbox-custom"></span>
                                            Resposta automática instantânea
                                            <small>Responder imediatamente quando uma mensagem for recebida</small>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Manual Support Section -->
                        <div class="support-section">
                            <div class="support-section-header manual">
                                <h3><i class="fas fa-headset"></i> Suporte Manual</h3>
                                <div class="inbox-filters">
                                    <button class="filter-btn active" data-filter="all">Todos</button>
                                    <button class="filter-btn" data-filter="pending">Pendentes</button>
                                    <button class="filter-btn" data-filter="responded">Respondidos</button>
                                    <button class="filter-btn" data-filter="escalated">Encaminhados</button>
                                </div>
                            </div>
                            <div class="support-section-content">
                                <div class="support-inbox" id="supportInbox">
                                    <!-- Tickets will be populated here -->
                                    <div class="loading">
                                        <i class="fas fa-spinner fa-spin"></i>
                                        Carregando tickets...
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Statistics Dashboard -->
                    <div class="support-stats-dashboard">
                        <div class="stats-chart">
                            <h4><i class="fas fa-chart-line"></i> Tendência de Tickets</h4>
                            <div class="chart-placeholder">
                                Gráfico de tickets por período
                            </div>
                        </div>
                        <div class="stats-chart">
                            <h4><i class="fas fa-chart-pie"></i> Tópicos Mais Perguntados</h4>
                            <div class="chart-placeholder">
                                Gráfico de categorias de dúvidas
                            </div>
                        </div>
                        <div class="stats-chart">
                            <h4><i class="fas fa-clock"></i> Tempo Médio de Resposta</h4>
                            <div class="chart-placeholder">
                                Análise de performance do suporte
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Response Editor Modal -->
                <div class="response-editor" id="responseEditor">
                    <div class="response-editor-modal">
                        <div class="response-editor-header">
                            <h3><i class="fas fa-reply"></i> Responder Ticket</h3>
                            <button class="btn btn-light btn-small" id="closeResponseEditor">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="response-editor-content">
                            <!-- Original Message -->
                            <div class="original-message" id="originalMessage">
                                <!-- Will be populated dynamically -->
                            </div>
                            
                            <!-- Conversation History -->
                            <div class="conversation-history" id="conversationHistory">
                                <!-- Will be populated dynamically -->
                            </div>
                            
                            <!-- Response Tools -->
                            <div class="response-tools">
                                <button class="btn btn-secondary btn-small" id="aiSuggestResponse">
                                    <i class="fas fa-magic"></i> Sugerir Resposta IA
                                </button>
                                <button class="btn btn-secondary btn-small" id="translateResponse">
                                    <i class="fas fa-language"></i> Traduzir
                                </button>
                            </div>
                            
                            <!-- Quick Responses -->
                            <div class="quick-responses">
                                <h5><i class="fas fa-bolt"></i> Respostas Rápidas</h5>
                                <div class="quick-response-grid" id="quickResponseGrid">
                                    <!-- Will be populated dynamically -->
                                </div>
                            </div>
                            
                            <!-- Response Text Area -->
                            <textarea class="response-textarea" id="responseTextarea" placeholder="Digite sua resposta aqui..."></textarea>
                            
                            <!-- FAQ Integration -->
                            <div class="faq-integration">
                                <h5><i class="fas fa-question-circle"></i> Adicionar ao FAQ</h5>
                                <p>Esta resposta pode ser útil para outros usuários? Considere adicionar ao FAQ.</p>
                            </div>
                            
                            <!-- Response Actions -->
                            <div class="response-actions">
                                <div class="response-actions-left">
                                    <button class="btn btn-warning btn-small" id="escalateTicket">
                                        <i class="fas fa-arrow-up"></i> Encaminhar
                                    </button>
                                    <button class="btn btn-info btn-small" id="addToFaq">
                                        <i class="fas fa-plus"></i> Adicionar ao FAQ
                                    </button>
                                </div>
                                <div class="response-actions-right">
                                    <button class="btn btn-success btn-small" id="markResolved">
                                        <i class="fas fa-check"></i> Marcar como Resolvido
                                    </button>
                                    <button class="btn btn-primary" id="sendResponse">
                                        <i class="fas fa-paper-plane"></i> Enviar Resposta
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Overlay for mobile -->
    <div class="overlay" id="overlay"></div>
    
    <!-- User Modals -->
    <!-- Create/Edit User Modal -->
    <div class="modal" id="userModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="userModalTitle">Criar Novo Usuário</h3>
                <button class="modal-close" id="userModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="userForm">
                    <input type="hidden" id="userId" name="userId">
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="userName">Nome Completo *</label>
                            <input type="text" id="userName" name="name" required>
                        </div>
                        <div class="form-group">
                            <label for="userEmail">E-mail *</label>
                            <input type="email" id="userEmail" name="email" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="userCountry">País</label>
                            <select id="userCountry" name="country">
                                <option value="">Selecione o país</option>
                                <option value="BR">🇧🇷 Brasil</option>
                                <option value="ES">🇪🇸 Espanha</option>
                                <option value="MX">🇲🇽 México</option>
                                <option value="AR">🇦🇷 Argentina</option>
                                <option value="CO">🇨🇴 Colômbia</option>
                                <option value="PE">🇵🇪 Peru</option>
                                <option value="CL">🇨🇱 Chile</option>
                                <option value="US">🇺🇸 Estados Unidos</option>
                                <option value="CA">🇨🇦 Canadá</option>
                                <option value="PT">🇵🇹 Portugal</option>
                                <option value="Other">🌍 Outro</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="userLanguage">Idioma Preferido *</label>
                            <select id="userLanguage" name="language" required>
                                <option value="es">🇪🇸 Español</option>
                                <option value="pt">🇧🇷 Português</option>
                                <option value="en">🇺🇸 English</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="userPlan">Plano *</label>
                            <select id="userPlan" name="plan" required>
                                <option value="free">Gratuito</option>
                                <option value="premium">Premium</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="userStatus">Status *</label>
                            <select id="userStatus" name="status" required>
                                <option value="active">Ativo</option>
                                <option value="inactive">Inativo</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group" id="passwordGroup">
                        <label for="userPassword">Senha *</label>
                        <input type="password" id="userPassword" name="password" required>
                        <small class="form-help">Mínimo 6 caracteres</small>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="userModalCancel">Cancelar</button>
                <button type="submit" class="btn btn-primary" id="userModalSave" form="userForm">
                    <i class="fas fa-save"></i>
                    Salvar
                </button>
            </div>
        </div>
    </div>
    
    <!-- Confirm Delete Modal -->
    <div class="modal" id="confirmDeleteModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Confirmar Exclusão</h3>
                <button class="modal-close" id="confirmDeleteClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="confirm-delete-content">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h4>Tem certeza que deseja excluir este usuário?</h4>
                    <p>Esta ação não pode ser desfeita. Todos os dados do usuário serão permanentemente removidos.</p>
                    <div class="user-info">
                        <strong id="deleteUserName"></strong>
                        <span id="deleteUserEmail"></span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="confirmDeleteCancel">Cancelar</button>
                <button type="button" class="btn btn-danger" id="confirmDeleteConfirm">
                    <i class="fas fa-trash"></i>
                    Excluir Usuário
                </button>
            </div>
        </div>
    </div>
    
    <!-- Product Modals -->
    <!-- Create/Edit Product Modal -->
    <div class="modal large" id="productModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="productModalTitle">Adicionar Novo Produto</h3>
                <button class="modal-close" id="productModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="productForm">
                    <input type="hidden" id="productId" name="productId">
                    
                    <!-- Basic Information -->
                    <div class="form-section">
                        <h4><i class="fas fa-info-circle"></i> Informações Básicas</h4>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="productName">Nome do Produto *</label>
                                <input type="text" id="productName" name="name" required placeholder="Ex: Guia de Alimentação Saudável">
                            </div>
                            <div class="form-group">
                                <label for="productLanguage">Idioma Principal *</label>
                                <select id="productLanguage" name="language" required>
                                    <option value="">Selecione o idioma</option>
                                    <option value="es">🇪🇸 Español</option>
                                    <option value="pt">🇧🇷 Português</option>
                                    <option value="en">🇺🇸 English</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="productDescription">Descrição *</label>
                            <div class="rich-text-editor">
                                <div class="editor-toolbar">
                                    <button type="button" class="editor-btn" data-command="bold" title="Negrito">
                                        <i class="fas fa-bold"></i>
                                    </button>
                                    <button type="button" class="editor-btn" data-command="italic" title="Itálico">
                                        <i class="fas fa-italic"></i>
                                    </button>
                                    <button type="button" class="editor-btn" data-command="underline" title="Sublinhado">
                                        <i class="fas fa-underline"></i>
                                    </button>
                                    <div class="editor-separator"></div>
                                    <button type="button" class="editor-btn" data-command="insertUnorderedList" title="Lista">
                                        <i class="fas fa-list-ul"></i>
                                    </button>
                                    <button type="button" class="editor-btn" data-command="insertOrderedList" title="Lista Numerada">
                                        <i class="fas fa-list-ol"></i>
                                    </button>
                                </div>
                                <div class="editor-content" id="productDescription" contenteditable="true" placeholder="Descreva o produto em detalhes..."></div>
                            </div>
                            <input type="hidden" id="productDescriptionHidden" name="description">
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="productType">Categoria *</label>
                                <select id="productType" name="type" required>
                                    <option value="">Selecione a categoria</option>
                                    <option value="ebook">📖 eBook</option>
                                    <option value="video">🎥 Vídeo</option>
                                    <option value="audio">🎵 Áudio</option>
                                    <option value="planner">📋 Planner</option>
                                    <option value="guide">📚 Guia</option>
                                    <option value="bonus">🎁 Bônus</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="productVisibility">Visibilidade *</label>
                                <select id="productVisibility" name="visibility" required>
                                    <option value="">Selecione a visibilidade</option>
                                    <option value="free">🆓 Usuários Gratuitos</option>
                                    <option value="premium">👑 Usuários Premium</option>
                                    <option value="both">👥 Ambos</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="productTags">Tags</label>
                            <div class="tags-input-container">
                                <input type="text" id="productTagsInput" placeholder="Digite uma tag e pressione Enter">
                                <div class="tags-list" id="productTagsList"></div>
                            </div>
                            <input type="hidden" id="productTags" name="tags">
                            <small class="form-help">Ex: alimentação, bem-estar, emagrecimento, saúde</small>
                        </div>
                    </div>
                    
                    <!-- File Uploads -->
                    <div class="form-section">
                        <h4><i class="fas fa-cloud-upload-alt"></i> Arquivos e Imagens</h4>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="productCover">Imagem de Capa</label>
                                <div class="file-upload-area" id="coverUploadArea">
                                    <input type="file" id="productCover" name="cover" accept="image/*" style="display: none;">
                                    <div class="upload-placeholder">
                                        <i class="fas fa-image"></i>
                                        <p>Clique para selecionar imagem de capa</p>
                                        <small>PNG, JPG até 5MB</small>
                                    </div>
                                    <div class="upload-preview" id="coverPreview" style="display: none;">
                                        <img id="coverPreviewImg" src="" alt="Preview">
                                        <button type="button" class="remove-file" onclick="removeFile('cover')">
                                            <i class="fas fa-times"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="productMockup">Imagem de Mockup (Opcional)</label>
                                <div class="file-upload-area" id="mockupUploadArea">
                                    <input type="file" id="productMockup" name="mockup" accept="image/*" style="display: none;">
                                    <div class="upload-placeholder">
                                        <i class="fas fa-mobile-alt"></i>
                                        <p>Clique para selecionar mockup</p>
                                        <small>PNG, JPG até 5MB</small>
                                    </div>
                                    <div class="upload-preview" id="mockupPreview" style="display: none;">
                                        <img id="mockupPreviewImg" src="" alt="Preview">
                                        <button type="button" class="remove-file" onclick="removeFile('mockup')">
                                            <i class="fas fa-times"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="productFile">Arquivo Principal *</label>
                            <div class="file-upload-area" id="fileUploadArea">
                                <input type="file" id="productFile" name="file" accept=".pdf,.mp4,.mp3,.zip" style="display: none;">
                                <div class="upload-placeholder">
                                    <i class="fas fa-file-upload"></i>
                                    <p>Clique para selecionar arquivo principal</p>
                                    <small>PDF, MP4, MP3, ZIP até 100MB</small>
                                </div>
                                <div class="upload-preview" id="filePreview" style="display: none;">
                                    <div class="file-info">
                                        <i class="fas fa-file" id="fileIcon"></i>
                                        <div class="file-details">
                                            <span class="file-name" id="fileName"></span>
                                            <span class="file-size" id="fileSize"></span>
                                        </div>
                                    </div>
                                    <button type="button" class="remove-file" onclick="removeFile('file')">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Status -->
                    <div class="form-section">
                        <h4><i class="fas fa-toggle-on"></i> Status e Publicação</h4>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="productStatus">Status *</label>
                                <select id="productStatus" name="status" required>
                                    <option value="active">✅ Ativo</option>
                                    <option value="inactive">❌ Inativo</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="productPublishDate">Data de Publicação</label>
                                <input type="date" id="productPublishDate" name="publishDate">
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="productModalCancel">Cancelar</button>
                <button type="submit" class="btn btn-primary" id="productModalSave" form="productForm">
                    <i class="fas fa-save"></i>
                    Salvar Produto
                </button>
            </div>
        </div>
    </div>
    
    <!-- Confirm Delete Product Modal -->
    <div class="modal" id="confirmDeleteProductModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Confirmar Exclusão</h3>
                <button class="modal-close" id="confirmDeleteProductClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="confirm-delete-content">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h4>Tem certeza que deseja excluir este produto?</h4>
                    <p>Esta ação não pode ser desfeita. O produto será removido permanentemente do sistema e não aparecerá mais no app dos usuários.</p>
                    <div class="product-info">
                        <strong id="deleteProductName"></strong>
                        <span id="deleteProductType"></span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="confirmDeleteProductCancel">Cancelar</button>
                <button type="button" class="btn btn-danger" id="confirmDeleteProductConfirm">
                    <i class="fas fa-trash"></i>
                    Excluir Produto
                </button>
            </div>
        </div>
    </div>
    
    <!-- Bonus Modals -->
    <!-- Create/Edit Bonus Modal -->
    <div class="modal large" id="bonusModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="bonusModalTitle">Adicionar Novo Bônus</h3>
                <button class="modal-close" id="bonusModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="bonusForm">
                    <input type="hidden" id="bonusId" name="bonusId">
                    
                    <!-- Basic Information -->
                    <div class="form-section">
                        <h4><i class="fas fa-info-circle"></i> Informações Básicas</h4>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="bonusName">Nome do Bônus *</label>
                                <input type="text" id="bonusName" name="name" required placeholder="Ex: Planner de 30 Dias para Transformação">
                            </div>
                            <div class="form-group">
                                <label for="bonusLanguage">Idioma *</label>
                                <select id="bonusLanguage" name="language" required>
                                    <option value="">Selecione o idioma</option>
                                    <option value="es">🇪🇸 Español</option>
                                    <option value="pt">🇧🇷 Português</option>
                                    <option value="en">🇺🇸 English</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="bonusDescription">Descrição Curta *</label>
                            <textarea id="bonusDescription" name="description" required placeholder="Descreva brevemente o que este bônus oferece..." rows="3"></textarea>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="bonusType">Tipo de Bônus *</label>
                                <select id="bonusType" name="type" required>
                                    <option value="">Selecione o tipo</option>
                                    <option value="planner">📋 Planner</option>
                                    <option value="mini-guide">📖 Mini Guia</option>
                                    <option value="challenge">🏆 Desafio Extra</option>
                                    <option value="checklist">✅ Checklist</option>
                                    <option value="calendar">📅 Calendário</option>
                                    <option value="other">📄 Outro</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="bonusVisibility">Visibilidade *</label>
                                <select id="bonusVisibility" name="visibility" required>
                                    <option value="">Selecione a visibilidade</option>
                                    <option value="free">🆓 Usuários Gratuitos</option>
                                    <option value="premium">👑 Usuários Premium</option>
                                    <option value="both">👥 Ambos</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Release Configuration -->
                    <div class="form-section">
                        <h4><i class="fas fa-clock"></i> Configuração de Liberação</h4>
                        
                        <div class="form-group">
                            <label for="bonusReleaseType">Tipo de Liberação *</label>
                            <select id="bonusReleaseType" name="releaseType" required>
                                <option value="">Selecione o tipo</option>
                                <option value="immediate">⚡ Imediata após cadastro</option>
                                <option value="delayed">⏰ Após X dias da inscrição</option>
                                <option value="scheduled">📅 Em data específica</option>
                            </select>
                        </div>
                        
                        <div class="form-group" id="delayDaysGroup" style="display: none;">
                            <label for="bonusDelayDays">Liberar após quantos dias?</label>
                            <input type="number" id="bonusDelayDays" name="delayDays" min="1" max="365" placeholder="Ex: 7">
                            <small class="form-help">Número de dias após a inscrição do usuário</small>
                        </div>
                        
                        <div class="form-group" id="scheduledDateGroup" style="display: none;">
                            <label for="bonusScheduledDate">Data de Liberação</label>
                            <input type="datetime-local" id="bonusScheduledDate" name="scheduledDate">
                            <small class="form-help">Data e hora específica para liberação</small>
                        </div>
                    </div>
                    
                    <!-- File Uploads -->
                    <div class="form-section">
                        <h4><i class="fas fa-cloud-upload-alt"></i> Arquivos e Imagens</h4>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="bonusImage">Imagem de Apresentação</label>
                                <div class="file-upload-area" id="bonusImageUploadArea">
                                    <input type="file" id="bonusImage" name="image" accept="image/*" style="display: none;">
                                    <div class="upload-placeholder">
                                        <i class="fas fa-image"></i>
                                        <p>Clique para selecionar banner/mockup</p>
                                        <small>PNG, JPG até 5MB</small>
                                    </div>
                                    <div class="upload-preview" id="bonusImagePreview" style="display: none;">
                                        <img id="bonusImagePreviewImg" src="" alt="Preview">
                                        <button type="button" class="remove-file" onclick="removeBonusFile('image')">
                                            <i class="fas fa-times"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="bonusFile">Arquivo Principal *</label>
                                <div class="file-upload-area" id="bonusFileUploadArea">
                                    <input type="file" id="bonusFile" name="file" accept=".pdf,.mp4,.jpg,.jpeg,.png,.zip" style="display: none;">
                                    <div class="upload-placeholder">
                                        <i class="fas fa-file-upload"></i>
                                        <p>Clique para selecionar arquivo</p>
                                        <small>PDF, MP4, Imagem, ZIP até 100MB</small>
                                    </div>
                                    <div class="upload-preview" id="bonusFilePreview" style="display: none;">
                                        <div class="file-info">
                                            <i class="fas fa-file" id="bonusFileIcon"></i>
                                            <div class="file-details">
                                                <span class="file-name" id="bonusFileName"></span>
                                                <span class="file-size" id="bonusFileSize"></span>
                                            </div>
                                        </div>
                                        <button type="button" class="remove-file" onclick="removeBonusFile('file')">
                                            <i class="fas fa-times"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Status -->
                    <div class="form-section">
                        <h4><i class="fas fa-toggle-on"></i> Status</h4>
                        
                        <div class="form-group">
                            <label for="bonusStatus">Status *</label>
                            <select id="bonusStatus" name="status" required>
                                <option value="active">✅ Ativo</option>
                                <option value="inactive">❌ Inativo</option>
                            </select>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="bonusModalCancel">Cancelar</button>
                <button type="submit" class="btn btn-primary" id="bonusModalSave" form="bonusForm">
                    <i class="fas fa-save"></i>
                    Salvar Bônus
                </button>
            </div>
        </div>
    </div>
    
    <!-- Confirm Delete Bonus Modal -->
    <div class="modal" id="confirmDeleteBonusModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Confirmar Exclusão</h3>
                <button class="modal-close" id="confirmDeleteBonusClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="confirm-delete-content">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h4>Tem certeza que deseja excluir este bônus?</h4>
                    <p>Esta ação não pode ser desfeita. O bônus será removido permanentemente do sistema e não aparecerá mais no app dos usuários.</p>
                    <div class="bonus-info">
                        <strong id="deleteBonusName"></strong>
                        <span id="deleteBonusType"></span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="confirmDeleteBonusCancel">Cancelar</button>
                <button type="button" class="btn btn-danger" id="confirmDeleteBonusConfirm">
                    <i class="fas fa-trash"></i>
                    Excluir Bônus
                </button>
            </div>
        </div>
    </div>

    <!-- Challenge Modals -->
    <!-- Notifications Modals -->
    <!-- Create/Edit Notification Modal -->
    <div class="modal large" id="notificationModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="notificationModalTitle">Criar Nova Notificação</h3>
                <button class="modal-close" id="notificationModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="notificationForm">
                    <input type="hidden" id="notificationId" name="notificationId">
                    
                    <div class="form-section">
                        <h4><i class="fas fa-info-circle"></i> Informações Básicas</h4>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="notificationInternalTitle">Título Interno *</label>
                                <input type="text" id="notificationInternalTitle" name="internalTitle" required placeholder="Ex: Lembrete dia 3 do desafio">
                                <small class="form-help">Para identificação interna - não será exibido aos usuários</small>
                            </div>
                            <div class="form-group">
                                <label for="notificationLanguage">Idioma *</label>
                                <select id="notificationLanguage" name="language" required>
                                    <option value="">Selecione o idioma</option>
                                    <option value="es">🇪🇸 Español</option>
                                    <option value="pt">🇧🇷 Português</option>
                                    <option value="en">🇺🇸 English</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="notificationTitle">Título da Notificação *</label>
                            <input type="text" id="notificationTitle" name="title" required placeholder="Ex: ¡Es hora de tu desafío!" maxlength="50">
                            <div class="char-counter">
                                <span id="titleCharCount">0</span>/50 caracteres
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="notificationMessage">Mensagem *</label>
                            <textarea id="notificationMessage" name="message" required placeholder="Ex: ¡No olvides completar tu actividad del día 3!" maxlength="140" rows="3"></textarea>
                            <div class="char-counter">
                                <span id="messageCharCount">0</span>/140 caracteres
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h4><i class="fas fa-cog"></i> Configurações</h4>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <div class="checkbox-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="notificationSound" name="sound" checked>
                                        <span class="checkbox-custom"></span>
                                        🔊 Incluir som na notificação
                                        <small>Reproduz som padrão do sistema</small>
                                    </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="notificationLink">Link Interno (Opcional)</label>
                                <select id="notificationLink" name="link">
                                    <option value="">Nenhum link</option>
                                    <option value="/challenges">🏆 Desafios</option>
                                    <option value="/products">🛍️ Produtos</option>
                                    <option value="/bonus">🎁 Bônus</option>
                                    <option value="/profile">👤 Perfil</option>
                                    <option value="/store">🏪 Loja</option>
                                    <option value="custom">🔗 Link Personalizado</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group" id="customLinkGroup" style="display: none;">
                            <label for="notificationCustomLink">URL Personalizada</label>
                            <input type="url" id="notificationCustomLink" name="customLink" placeholder="https://exemplo.com/pagina">
                        </div>
                        
                        <div class="form-group">
                            <label for="notificationImage">Imagem (Opcional)</label>
                            <div class="file-upload-area" id="notificationImageUploadArea">
                                <input type="file" id="notificationImage" name="image" accept="image/*" style="display: none;">
                                <div class="upload-placeholder">
                                    <i class="fas fa-image"></i>
                                    <p>Clique para selecionar imagem</p>
                                    <small>PNG, JPG até 2MB (recomendado: 512x512px)</small>
                                </div>
                                <div class="upload-preview" id="notificationImagePreview" style="display: none;">
                                    <img id="notificationImagePreviewImg" src="" alt="Preview">
                                    <button type="button" class="remove-file" onclick="notificationsManager.removeFile('image')">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h4><i class="fas fa-users"></i> Segmentação</h4>
                        
                        <div class="form-group">
                            <label for="notificationSegment">Público Alvo *</label>
                            <select id="notificationSegment" name="segment" required>
                                <option value="">Selecione o segmento</option>
                                <option value="all">👥 Todos os usuários</option>
                                <option value="free">🆓 Apenas usuários gratuitos</option>
                                <option value="premium">👑 Apenas usuários premium</option>
                                <option value="event">🎯 Por evento/comportamento</option>
                            </select>
                        </div>
                        
                        <div class="form-group" id="eventSegmentGroup" style="display: none;">
                            <label for="notificationEvent">Evento/Comportamento</label>
                            <select id="notificationEvent" name="event">
                                <option value="">Selecione o evento</option>
                                <option value="challenge_day_1">✅ Concluiu Dia 1 do desafio</option>
                                <option value="challenge_day_3">✅ Concluiu Dia 3 do desafio</option>
                                <option value="challenge_day_7">✅ Concluiu Dia 7 do desafio</option>
                                <option value="downloaded_planner">📋 Baixou um planner</option>
                                <option value="purchased_product">🛍️ Comprou um produto</option>
                                <option value="inactive_3_days">😴 Não acessou há 3 dias</option>
                                <option value="inactive_7_days">😴 Não acessou há 7 dias</option>
                                <option value="new_user">🆕 Usuário novo (primeiras 24h)</option>
                                <option value="birthday">🎂 Aniversário do usuário</option>
                            </select>
                        </div>
                        
                        <div class="segment-preview" id="segmentPreview">
                            <div class="preview-content">
                                <i class="fas fa-users"></i>
                                <span id="segmentCount">Selecione um segmento para ver a estimativa</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h4><i class="fas fa-clock"></i> Agendamento</h4>
                        
                        <div class="form-group">
                            <label for="notificationScheduleType">Tipo de Envio *</label>
                            <select id="notificationScheduleType" name="scheduleType" required>
                                <option value="">Selecione o tipo</option>
                                <option value="immediate">⚡ Enviar imediatamente</option>
                                <option value="scheduled">📅 Agendar para data específica</option>
                            </select>
                        </div>
                        
                        <div class="form-group" id="scheduledDateGroup" style="display: none;">
                            <label for="notificationScheduledDate">Data e Hora do Envio</label>
                            <input type="datetime-local" id="notificationScheduledDate" name="scheduledDate">
                            <small class="form-help">A notificação será enviada automaticamente nesta data</small>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h4><i class="fas fa-save"></i> Salvar como Modelo</h4>
                        
                        <div class="form-group">
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="saveAsTemplate" name="saveAsTemplate">
                                    <span class="checkbox-custom"></span>
                                    💾 Salvar como modelo para reutilizar
                                    <small>Permite usar esta notificação como base para futuras campanhas</small>
                                </label>
                            </div>
                        </div>
                        
                        <div class="form-group" id="templateNameGroup" style="display: none;">
                            <label for="templateName">Nome do Modelo</label>
                            <input type="text" id="templateName" name="templateName" placeholder="Ex: Lembrete Desafio Diário">
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="notificationModalCancel">Cancelar</button>
                <button type="button" class="btn btn-info" id="notificationPreviewBtn">
                    <i class="fas fa-eye"></i>
                    Visualizar
                </button>
                <button type="submit" class="btn btn-primary" id="notificationModalSave" form="notificationForm">
                    <i class="fas fa-save"></i>
                    Salvar e Agendar
                </button>
            </div>
        </div>
    </div>
    
    <!-- Notification Preview Modal -->
    <div class="modal medium" id="notificationPreviewModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Visualização da Notificação</h3>
                <button class="modal-close" id="notificationPreviewModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="preview-section">
                    <h4><i class="fas fa-mobile-alt"></i> Como aparecerá no dispositivo</h4>
                    
                    <div class="notification-preview-container">
                        <div class="notification-preview-mobile">
                            <div class="notification-preview-item">
                                <div class="notification-icon">
                                    <img id="previewIcon" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23007bff'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z'/%3E%3C/svg%3E" alt="App Icon">
                                </div>
                                <div class="notification-content">
                                    <div class="notification-title" id="previewTitle">Título da Notificação</div>
                                    <div class="notification-message" id="previewMessage">Mensagem da notificação aparecerá aqui</div>
                                    <div class="notification-time">agora</div>
                                </div>
                                <div class="notification-sound-indicator" id="previewSoundIndicator" style="display: none;">
                                    <i class="fas fa-volume-up"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="preview-details">
                    <h4><i class="fas fa-info-circle"></i> Detalhes do Envio</h4>
                    <div class="detail-grid">
                        <div class="detail-item">
                            <label>Idioma:</label>
                            <span id="previewLanguage">-</span>
                        </div>
                        <div class="detail-item">
                            <label>Segmento:</label>
                            <span id="previewSegment">-</span>
                        </div>
                        <div class="detail-item">
                            <label>Usuários estimados:</label>
                            <span id="previewUserCount">-</span>
                        </div>
                        <div class="detail-item">
                            <label>Agendamento:</label>
                            <span id="previewSchedule">-</span>
                        </div>
                        <div class="detail-item">
                            <label>Link:</label>
                            <span id="previewLink">-</span>
                        </div>
                        <div class="detail-item">
                            <label>Som:</label>
                            <span id="previewSound">-</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="notificationPreviewModalCancel">Fechar</button>
                <button type="button" class="btn btn-primary" id="sendFromPreviewBtn">
                    <i class="fas fa-paper-plane"></i>
                    Confirmar e Enviar
                </button>
            </div>
        </div>
    </div>
    
    <!-- Notification Statistics Modal -->
    <div class="modal large" id="notificationStatsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="notificationStatsModalTitle">Estatísticas da Notificação</h3>
                <button class="modal-close" id="notificationStatsModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="stats-overview">
                    <div class="stats-cards">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-paper-plane"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="statsSent">0</h3>
                                <p>Enviadas</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="statsDelivered">0</h3>
                                <p>Entregues</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-mouse-pointer"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="statsClicked">0</h3>
                                <p>Cliques</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-percentage"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="statsClickRate">0%</h3>
                                <p>Taxa de Clique</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="stats-breakdown">
                    <div class="breakdown-section">
                        <h4><i class="fas fa-mobile-alt"></i> Por Dispositivo</h4>
                        <div class="device-stats">
                            <div class="device-stat">
                                <span class="device-label">📱 Mobile</span>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="mobileProgress" style="width: 0%"></div>
                                </div>
                                <span class="device-percentage" id="mobilePercentage">0%</span>
                            </div>
                            <div class="device-stat">
                                <span class="device-label">💻 Desktop</span>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="desktopProgress" style="width: 0%"></div>
                                </div>
                                <span class="device-percentage" id="desktopPercentage">0%</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="breakdown-section">
                        <h4><i class="fas fa-clock"></i> Horário de Cliques</h4>
                        <canvas id="clickTimeChart" width="400" height="200"></canvas>
                    </div>
                </div>
                
                <div class="delivery-status">
                    <h4><i class="fas fa-list"></i> Status de Entrega</h4>
                    <div class="status-table-container">
                        <table class="status-table">
                            <thead>
                                <tr>
                                    <th>Status</th>
                                    <th>Quantidade</th>
                                    <th>Percentual</th>
                                </tr>
                            </thead>
                            <tbody id="deliveryStatusTableBody">
                                <!-- Status data will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="notificationStatsModalCancel">Fechar</button>
                <button type="button" class="btn btn-primary" id="exportStatsBtn">
                    <i class="fas fa-download"></i>
                    Exportar Relatório
                </button>
            </div>
        </div>
    </div>
    
    <!-- Templates Modal -->
    <div class="modal large" id="templatesModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Modelos de Notificação</h3>
                <button class="modal-close" id="templatesModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="templates-grid" id="templatesGrid">
                    <!-- Templates will be populated here -->
                </div>
                
                <div class="no-templates" id="noTemplatesMessage" style="display: none;">
                    <i class="fas fa-file-alt"></i>
                    <h3>Nenhum modelo salvo</h3>
                    <p>Você ainda não salvou nenhum modelo de notificação.</p>
                    <button class="btn btn-primary" onclick="notificationsManager.closeTemplatesModal()">
                        <i class="fas fa-plus"></i>
                        Criar Primeira Notificação
                    </button>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="templatesModalCancel">Fechar</button>
            </div>
        </div>
    </div>

    <!-- Sales Modals -->
    <!-- Manual Sale Modal -->
    <div class="modal large" id="manualSaleModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="manualSaleModalTitle">Adicionar Venda Manual</h3>
                <button class="modal-close" id="manualSaleModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="manualSaleForm">
                    <input type="hidden" id="manualSaleId" name="saleId">
                    
                    <div class="form-section">
                        <h4><i class="fas fa-user"></i> Dados do Cliente</h4>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="manualSaleCustomerName">Nome do Cliente *</label>
                                <input type="text" id="manualSaleCustomerName" name="customerName" required placeholder="Ex: Maria Silva">
                            </div>
                            <div class="form-group">
                                <label for="manualSaleCustomerEmail">E-mail do Cliente *</label>
                                <input type="email" id="manualSaleCustomerEmail" name="customerEmail" required placeholder="maria@email.com">
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h4><i class="fas fa-shopping-cart"></i> Dados da Venda</h4>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="manualSaleProduct">Produto Adquirido *</label>
                                <select id="manualSaleProduct" name="product" required>
                                    <option value="">Selecione o produto</option>
                                    <!-- Produtos serão populados dinamicamente -->
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="manualSaleValue">Valor da Venda *</label>
                                <div class="price-input-container">
                                    <select id="manualSaleCurrency" name="currency" required>
                                        <option value="USD">💵 USD</option>
                                        <option value="EUR">💶 EUR</option>
                                        <option value="BRL">💳 BRL</option>
                                    </select>
                                    <input type="number" id="manualSaleValue" name="value" step="0.01" min="0" required placeholder="0.00">
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="manualSaleDate">Data da Compra *</label>
                                <input type="datetime-local" id="manualSaleDate" name="saleDate" required>
                            </div>
                            <div class="form-group">
                                <label for="manualSaleOrigin">Origem da Venda *</label>
                                <select id="manualSaleOrigin" name="origin" required>
                                    <option value="">Selecione a origem</option>
                                    <option value="kiwify">🥝 Kiwify</option>
                                    <option value="stripe">💳 Stripe</option>
                                    <option value="paypal">🅿️ PayPal</option>
                                    <option value="manual">📝 Manual</option>
                                    <option value="other">🔗 Outro</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="manualSaleStatus">Status do Pagamento *</label>
                                <select id="manualSaleStatus" name="status" required>
                                    <option value="approved">✅ Aprovado</option>
                                    <option value="pending">⏳ Pendente</option>
                                    <option value="refunded">💸 Reembolsado</option>
                                    <option value="cancelled">❌ Cancelado</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="manualSaleLanguage">Idioma do Produto *</label>
                                <select id="manualSaleLanguage" name="language" required>
                                    <option value="es">🇪🇸 Español</option>
                                    <option value="pt">🇧🇷 Português</option>
                                    <option value="en">🇺🇸 English</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="manualSaleUpgradePlan" name="upgradePlan" checked>
                                    <span class="checkbox-custom"></span>
                                    👑 Liberar acesso Premium para este cliente
                                    <small>O cliente receberá automaticamente acesso aos recursos premium</small>
                                </label>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="manualSaleModalCancel">Cancelar</button>
                <button type="submit" class="btn btn-primary" id="manualSaleModalSave" form="manualSaleForm">
                    <i class="fas fa-save"></i>
                    Salvar Venda
                </button>
            </div>
        </div>
    </div>
    
    <!-- Sale Details Modal -->
    <div class="modal large" id="saleDetailsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="saleDetailsModalTitle">Detalhes da Venda</h3>
                <button class="modal-close" id="saleDetailsModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="sale-details-content">
                    <div class="sale-info-grid">
                        <div class="sale-info-card">
                            <h4><i class="fas fa-user"></i> Cliente</h4>
                            <div class="info-item">
                                <label>Nome:</label>
                                <span id="detailCustomerName">-</span>
                            </div>
                            <div class="info-item">
                                <label>E-mail:</label>
                                <span id="detailCustomerEmail">-</span>
                            </div>
                            <div class="info-item">
                                <label>Plano Atual:</label>
                                <span id="detailCustomerPlan">-</span>
                            </div>
                        </div>
                        
                        <div class="sale-info-card">
                            <h4><i class="fas fa-shopping-cart"></i> Venda</h4>
                            <div class="info-item">
                                <label>Produto:</label>
                                <span id="detailProduct">-</span>
                            </div>
                            <div class="info-item">
                                <label>Valor:</label>
                                <span id="detailValue">-</span>
                            </div>
                            <div class="info-item">
                                <label>Data:</label>
                                <span id="detailDate">-</span>
                            </div>
                        </div>
                        
                        <div class="sale-info-card">
                            <h4><i class="fas fa-info-circle"></i> Informações</h4>
                            <div class="info-item">
                                <label>Origem:</label>
                                <span id="detailOrigin">-</span>
                            </div>
                            <div class="info-item">
                                <label>Status:</label>
                                <span id="detailStatus">-</span>
                            </div>
                            <div class="info-item">
                                <label>Idioma:</label>
                                <span id="detailLanguage">-</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="sale-actions-section">
                        <h4><i class="fas fa-cogs"></i> Ações Disponíveis</h4>
                        <div class="action-buttons">
                            <button class="btn btn-success" id="upgradeToPremiumBtn">
                                <i class="fas fa-crown"></i>
                                Liberar Premium
                            </button>
                            <button class="btn btn-info" id="sendWelcomeNotificationBtn">
                                <i class="fas fa-bell"></i>
                                Enviar Notificação
                            </button>
                            <button class="btn btn-warning" id="refundSaleBtn">
                                <i class="fas fa-undo"></i>
                                Processar Reembolso
                            </button>
                            <button class="btn btn-secondary" id="resendAccessBtn">
                                <i class="fas fa-paper-plane"></i>
                                Reenviar Acesso
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="saleDetailsModalCancel">Fechar</button>
                <button type="button" class="btn btn-primary" id="editSaleBtn">
                    <i class="fas fa-edit"></i>
                    Editar Venda
                </button>
            </div>
        </div>
    </div>

    <!-- Store Product Modals -->
    <!-- Create/Edit Store Product Modal -->
    <div class="modal extra-large" id="storeProductModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="storeProductModalTitle">Adicionar Novo Produto</h3>
                <button class="modal-close" id="storeProductModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="storeProductForm">
                    <input type="hidden" id="storeProductId" name="productId">
                    
                    <!-- Basic Information -->
                    <div class="form-section">
                        <h4><i class="fas fa-info-circle"></i> Informações Básicas</h4>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="storeProductName">Nome do Produto *</label>
                                <input type="text" id="storeProductName" name="name" required placeholder="Ex: Guia Completo de Alimentação Saudável">
                            </div>
                            <div class="form-group">
                                <label for="storeProductLanguage">Idioma Principal *</label>
                                <select id="storeProductLanguage" name="language" required>
                                    <option value="">Selecione o idioma</option>
                                    <option value="es">🇪🇸 Español</option>
                                    <option value="pt">🇧🇷 Português</option>
                                    <option value="en">🇺🇸 English</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="storeProductDescription">Breve Descrição *</label>
                            <textarea id="storeProductDescription" name="description" rows="4" required placeholder="Descreva o produto de forma atrativa para o cliente..."></textarea>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="storeProductType">Tipo do Produto *</label>
                                <select id="storeProductType" name="type" required>
                                    <option value="">Selecione o tipo</option>
                                    <option value="ebook">📖 eBook</option>
                                    <option value="combo">📦 Combo</option>
                                    <option value="planner">📋 Planner Premium</option>
                                    <option value="guide">📚 Guia Especial</option>
                                    <option value="bonus">🎁 Bônus</option>
                                    <option value="other">🔗 Outro</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="storeProductPrice">Preço do Produto *</label>
                                <div class="price-input-container">
                                    <select id="storeProductCurrency" name="currency" required>
                                        <option value="USD">💵 USD</option>
                                        <option value="EUR">💶 EUR</option>
                                        <option value="BRL">💳 BRL</option>
                                    </select>
                                    <input type="number" id="storeProductPrice" name="price" step="0.01" min="0" required placeholder="0.00">
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="storeProductVisibility">Visibilidade *</label>
                                <select id="storeProductVisibility" name="visibility" required>
                                    <option value="">Selecione a visibilidade</option>
                                    <option value="free">🆓 Usuários Gratuitos</option>
                                    <option value="premium">👑 Usuários Premium</option>
                                    <option value="both">👥 Ambos</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="storeProductSaleLink">Link Externo para Compra *</label>
                                <input type="url" id="storeProductSaleLink" name="saleLink" required placeholder="https://kiwify.com/seu-produto ou https://stripe.com/checkout">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Images Upload -->
                    <div class="form-section">
                        <h4><i class="fas fa-images"></i> Imagens do Produto</h4>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="storeProductCover">Imagem de Apresentação *</label>
                                <div class="file-upload-area" id="storeProductCoverUploadArea">
                                    <input type="file" id="storeProductCover" name="cover" accept="image/*" style="display: none;">
                                    <div class="upload-placeholder">
                                        <i class="fas fa-image"></i>
                                        <p>Clique para selecionar imagem principal</p>
                                        <small>PNG, JPG até 5MB (recomendado: 800x600px)</small>
                                    </div>
                                    <div class="upload-preview" id="storeProductCoverPreview" style="display: none;">
                                        <img id="storeProductCoverPreviewImg" src="" alt="Preview">
                                        <button type="button" class="remove-file" onclick="storeManager.removeFile('cover')">
                                            <i class="fas fa-times"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="storeProductMockup">Imagem Adicional (Opcional)</label>
                                <div class="file-upload-area" id="storeProductMockupUploadArea">
                                    <input type="file" id="storeProductMockup" name="mockup" accept="image/*" style="display: none;">
                                    <div class="upload-placeholder">
                                        <i class="fas fa-mobile-alt"></i>
                                        <p>Clique para selecionar imagem adicional</p>
                                        <small>PNG, JPG até 5MB (para carrossel)</small>
                                    </div>
                                    <div class="upload-preview" id="storeProductMockupPreview" style="display: none;">
                                        <img id="storeProductMockupPreviewImg" src="" alt="Preview">
                                        <button type="button" class="remove-file" onclick="storeManager.removeFile('mockup')">
                                            <i class="fas fa-times"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Product Settings -->
                    <div class="form-section">
                        <h4><i class="fas fa-cog"></i> Configurações do Produto</h4>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="storeProductStatus">Status *</label>
                                <select id="storeProductStatus" name="status" required>
                                    <option value="active">✅ Ativo</option>
                                    <option value="inactive">❌ Inativo</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <div class="checkbox-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="storeProductFeatured" name="featured">
                                        <span class="checkbox-custom"></span>
                                        ⭐ Marcar como Destaque
                                        <small>Produto aparecerá em destaque na home do app</small>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="storeProductModalCancel">Cancelar</button>
                <button type="submit" class="btn btn-primary" id="storeProductModalSave" form="storeProductForm">
                    <i class="fas fa-save"></i>
                    Salvar Produto
                </button>
            </div>
        </div>
    </div>
    
    <!-- Confirm Delete Store Product Modal -->
    <div class="modal" id="confirmDeleteStoreProductModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Confirmar Exclusão</h3>
                <button class="modal-close" id="confirmDeleteStoreProductClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="confirm-delete-content">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h4>Tem certeza que deseja excluir este produto?</h4>
                    <p>Esta ação não pode ser desfeita. O produto será removido permanentemente da loja e não estará mais disponível para compra.</p>
                    <div class="product-info">
                        <strong id="deleteStoreProductName"></strong>
                        <span id="deleteStoreProductType"></span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="confirmDeleteStoreProductCancel">Cancelar</button>
                <button type="button" class="btn btn-danger" id="confirmDeleteStoreProductConfirm">
                    <i class="fas fa-trash"></i>
                    Excluir Produto
                </button>
            </div>
        </div>
    </div>

    <!-- Create/Edit Challenge Modal -->
    <div class="modal extra-large" id="challengeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="challengeModalTitle">Criar Novo Desafio</h3>
                <button class="modal-close" id="challengeModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="challengeForm">
                    <input type="hidden" id="challengeId" name="challengeId">
                    
                    <!-- Basic Information -->
                    <div class="form-section">
                        <h4><i class="fas fa-info-circle"></i> Informações Básicas</h4>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="challengeName">Nome do Desafio *</label>
                                <input type="text" id="challengeName" name="name" required placeholder="Ex: Desafio 30 Dias para Transformação">
                            </div>
                            <div class="form-group">
                                <label for="challengeLanguage">Idioma *</label>
                                <select id="challengeLanguage" name="language" required>
                                    <option value="">Selecione o idioma</option>
                                    <option value="es">🇪🇸 Español</option>
                                    <option value="pt">🇧🇷 Português</option>
                                    <option value="en">🇺🇸 English</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="challengeDescription">Descrição *</label>
                            <textarea id="challengeDescription" name="description" required placeholder="Descreva o desafio, seus objetivos e benefícios..." rows="4"></textarea>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="challengeDuration">Duração (dias) *</label>
                                <input type="number" id="challengeDuration" name="duration" required min="1" max="365" placeholder="Ex: 30">
                            </div>
                            <div class="form-group">
                                <label for="challengeVisibility">Visibilidade *</label>
                                <select id="challengeVisibility" name="visibility" required>
                                    <option value="">Selecione a visibilidade</option>
                                    <option value="free">🆓 Usuários Gratuitos</option>
                                    <option value="premium">👑 Usuários Premium</option>
                                    <option value="both">👥 Ambos</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="challengeProgressUnlockable">
                                    <input type="checkbox" id="challengeProgressUnlockable" name="progressUnlockable">
                                    Progresso Desbloqueável
                                </label>
                                <small class="form-help">Libera o próximo dia apenas após completar o atual</small>
                            </div>
                            <div class="form-group">
                                <label for="challengeStatus">Status *</label>
                                <select id="challengeStatus" name="status" required>
                                    <option value="active">✅ Ativo</option>
                                    <option value="inactive">❌ Inativo</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Release Configuration -->
                    <div class="form-section">
                        <h4><i class="fas fa-clock"></i> Configuração de Liberação</h4>
                        
                        <div class="form-group">
                            <label for="challengeReleaseType">Tipo de Liberação *</label>
                            <select id="challengeReleaseType" name="releaseType" required>
                                <option value="">Selecione o tipo</option>
                                <option value="immediate">⚡ Imediata após cadastro</option>
                                <option value="delayed">⏰ Após X dias da inscrição</option>
                                <option value="scheduled">📅 Em data específica</option>
                            </select>
                        </div>
                        
                        <div class="form-group" id="challengeDelayDaysGroup" style="display: none;">
                            <label for="challengeDelayDays">Liberar após quantos dias?</label>
                            <input type="number" id="challengeDelayDays" name="delayDays" min="1" max="365" placeholder="Ex: 7">
                            <small class="form-help">Número de dias após a inscrição do usuário</small>
                        </div>
                        
                        <div class="form-group" id="challengeScheduledDateGroup" style="display: none;">
                            <label for="challengeScheduledDate">Data de Liberação</label>
                            <input type="datetime-local" id="challengeScheduledDate" name="scheduledDate">
                            <small class="form-help">Data e hora específica para liberação</small>
                        </div>
                    </div>
                    
                    <!-- Image Upload -->
                    <div class="form-section">
                        <h4><i class="fas fa-image"></i> Imagem de Apresentação</h4>
                        
                        <div class="form-group">
                            <label for="challengeImage">Imagem do Desafio</label>
                            <div class="file-upload-area" id="challengeImageUploadArea">
                                <input type="file" id="challengeImage" name="image" accept="image/*" style="display: none;">
                                <div class="upload-placeholder">
                                    <i class="fas fa-image"></i>
                                    <p>Clique para selecionar imagem do desafio</p>
                                    <small>PNG, JPG até 5MB</small>
                                </div>
                                <div class="upload-preview" id="challengeImagePreview" style="display: none;">
                                    <img id="challengeImagePreviewImg" src="" alt="Preview">
                                    <button type="button" class="remove-file" onclick="removeChallengeFile('image')">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="challengeModalCancel">Cancelar</button>
                <button type="submit" class="btn btn-primary" id="challengeModalSave" form="challengeForm">
                    <i class="fas fa-save"></i>
                    Salvar e Configurar Dias
                </button>
            </div>
        </div>
    </div>
    
    <!-- Challenge Days Configuration Modal -->
    <div class="modal extra-large" id="challengeDaysModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="challengeDaysModalTitle">Configurar Conteúdo Diário</h3>
                <button class="modal-close" id="challengeDaysModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="challenge-days-header">
                    <h4 id="challengeDaysName">Nome do Desafio</h4>
                    <p id="challengeDaysDuration">Duração: 0 dias</p>
                </div>
                
                <div class="days-navigation">
                    <button class="btn btn-small" id="prevDayBtn" disabled>
                        <i class="fas fa-chevron-left"></i>
                        Dia Anterior
                    </button>
                    <span class="current-day-info">
                        Dia <span id="currentDayNumber">1</span> de <span id="totalDaysNumber">1</span>
                    </span>
                    <button class="btn btn-small" id="nextDayBtn">
                        Próximo Dia
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
                
                <form id="challengeDayForm">
                    <input type="hidden" id="dayNumber" name="dayNumber">
                    <input type="hidden" id="parentChallengeId" name="challengeId">
                    
                    <div class="form-section">
                        <h4><i class="fas fa-calendar-day"></i> Conteúdo do Dia</h4>
                        
                        <div class="form-group">
                            <label for="dayTitle">Título do Dia *</label>
                            <input type="text" id="dayTitle" name="title" required placeholder="Ex: Preparação Mental">
                        </div>
                        
                        <div class="form-group">
                            <label for="dayContent">Instrução do Dia *</label>
                            <textarea id="dayContent" name="content" required placeholder="Descreva as atividades, exercícios ou reflexões do dia..." rows="6"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="dayMotivationalPhrase">Frase de Incentivo *</label>
                            <input type="text" id="dayMotivationalPhrase" name="motivationalPhrase" required placeholder="Ex: ¡Buen trabajo! Sigue así.">
                            <small class="form-help">Frase que aparece quando o usuário marca como concluído</small>
                        </div>
                        
                        <div class="form-group">
                            <label for="dayMedia">Mídia Motivacional (Opcional)</label>
                            <div class="file-upload-area" id="dayMediaUploadArea">
                                <input type="file" id="dayMedia" name="media" accept="image/*,video/*,audio/*" style="display: none;">
                                <div class="upload-placeholder">
                                    <i class="fas fa-play-circle"></i>
                                    <p>Clique para adicionar imagem, vídeo ou áudio</p>
                                    <small>PNG, JPG, MP4, MP3 até 50MB</small>
                                </div>
                                <div class="upload-preview" id="dayMediaPreview" style="display: none;">
                                    <div class="media-info">
                                        <i class="fas fa-file" id="dayMediaIcon"></i>
                                        <div class="media-details">
                                            <span class="media-name" id="dayMediaName"></span>
                                            <span class="media-size" id="dayMediaSize"></span>
                                        </div>
                                    </div>
                                    <button type="button" class="remove-file" onclick="removeChallengeFile('dayMedia')">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="challengeDaysModalCancel">Fechar</button>
                <button type="button" class="btn btn-primary" id="saveDayBtn">
                    <i class="fas fa-save"></i>
                    Salvar Dia
                </button>
                <button type="button" class="btn btn-success" id="finishChallengeBtn">
                    <i class="fas fa-check"></i>
                    Finalizar Desafio
                </button>
            </div>
        </div>
    </div>
    
    <!-- Challenge Progress Modal -->
    <div class="modal large" id="challengeProgressModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="challengeProgressModalTitle">Progresso do Desafio</h3>
                <button class="modal-close" id="challengeProgressModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="challenge-progress-header">
                    <h4 id="progressChallengeName">Nome do Desafio</h4>
                    <div class="progress-stats">
                        <div class="progress-stat">
                            <span class="stat-label">Participantes:</span>
                            <span class="stat-value" id="progressParticipants">0</span>
                        </div>
                        <div class="progress-stat">
                            <span class="stat-label">Taxa de Conclusão:</span>
                            <span class="stat-value" id="progressCompletionRate">0%</span>
                        </div>
                        <div class="progress-stat">
                            <span class="stat-label">Média de Dias:</span>
                            <span class="stat-value" id="progressAverageDays">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="progress-chart">
                    <canvas id="progressChart" width="400" height="200"></canvas>
                </div>
                
                <div class="participants-list">
                    <h5>Participantes Ativos</h5>
                    <div class="participants-table-container">
                        <table class="participants-table">
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>Progresso</th>
                                    <th>Dias Concluídos</th>
                                    <th>Último Acesso</th>
                                </tr>
                            </thead>
                            <tbody id="participantsTableBody">
                                <!-- Participants will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="challengeProgressModalCancel">Fechar</button>
                <button type="button" class="btn btn-primary" id="exportProgressBtn">
                    <i class="fas fa-download"></i>
                    Exportar Relatório
                </button>
            </div>
        </div>
    </div>
    
    <!-- Gamification Modals -->
    
    <!-- Create/Edit Rule Modal -->
    <div class="modal large" id="ruleModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="ruleModalTitle">Criar Nova Regra de Pontuação</h3>
                <button class="modal-close" id="ruleModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="ruleForm">
                    <input type="hidden" id="ruleId" name="ruleId">
                    
                    <div class="form-section">
                        <h4><i class="fas fa-info-circle"></i> Informações da Regra</h4>
                        
                        <div class="form-group">
                            <label for="ruleName">Nome da Ação *</label>
                            <input type="text" id="ruleName" name="name" required placeholder="Ex: Concluir o dia 1 do desafio">
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="rulePoints">Pontos Concedidos *</label>
                                <input type="number" id="rulePoints" name="points" required min="1" max="1000" placeholder="10">
                            </div>
                            <div class="form-group">
                                <label for="ruleFrequency">Frequência *</label>
                                <select id="ruleFrequency" name="frequency" required>
                                    <option value="">Selecione a frequência</option>
                                    <option value="once">Única vez</option>
                                    <option value="daily">Diária</option>
                                    <option value="repeat">Por repetição</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="ruleUserType">Tipo de Usuário *</label>
                                <select id="ruleUserType" name="userType" required>
                                    <option value="">Selecione o tipo</option>
                                    <option value="all">Todos</option>
                                    <option value="free">Gratuito</option>
                                    <option value="premium">Premium</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="ruleLanguage">Idioma</label>
                                <select id="ruleLanguage" name="language">
                                    <option value="">Todos os idiomas</option>
                                    <option value="es">🇪🇸 Español</option>
                                    <option value="pt">🇧🇷 Português</option>
                                    <option value="en">🇺🇸 English</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="ruleDescription">Descrição (Opcional)</label>
                            <textarea id="ruleDescription" name="description" placeholder="Descrição adicional da regra..." rows="3"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="ruleStatus">Status *</label>
                            <select id="ruleStatus" name="status" required>
                                <option value="active">✅ Ativa</option>
                                <option value="inactive">❌ Inativa</option>
                            </select>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="ruleModalCancel">Cancelar</button>
                <button type="submit" class="btn btn-primary" id="ruleModalSave" form="ruleForm">
                    <i class="fas fa-save"></i>
                    Salvar Regra
                </button>
            </div>
        </div>
    </div>
    
    <!-- Create/Edit Achievement Modal -->
    <div class="modal large" id="achievementModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="achievementModalTitle">Criar Nova Conquista</h3>
                <button class="modal-close" id="achievementModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="achievementForm">
                    <input type="hidden" id="achievementId" name="achievementId">
                    
                    <div class="form-section">
                        <h4><i class="fas fa-trophy"></i> Informações da Conquista</h4>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="achievementName">Nome da Conquista *</label>
                                <input type="text" id="achievementName" name="name" required placeholder="Ex: Desafiante Constante">
                            </div>
                            <div class="form-group">
                                <label for="achievementLanguage">Idioma *</label>
                                <select id="achievementLanguage" name="language" required>
                                    <option value="">Selecione o idioma</option>
                                    <option value="es">🇪🇸 Español</option>
                                    <option value="pt">🇧🇷 Português</option>
                                    <option value="en">🇺🇸 English</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="achievementDescription">Descrição *</label>
                            <textarea id="achievementDescription" name="description" required placeholder="Ex: Você concluiu 7 dias seguidos" rows="3"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="achievementBadge">Imagem do Selo/Medalha</label>
                            <div class="file-upload-area" id="achievementBadgeUploadArea">
                                <input type="file" id="achievementBadge" name="badge" accept="image/*" style="display: none;">
                                <div class="upload-placeholder">
                                    <i class="fas fa-medal"></i>
                                    <p>Clique para selecionar imagem do selo</p>
                                    <small>PNG, JPG até 5MB (recomendado: 200x200px)</small>
                                </div>
                                <div class="upload-preview" id="achievementBadgePreview" style="display: none;">
                                    <img id="achievementBadgePreviewImg" src="" alt="Preview">
                                    <button type="button" class="remove-file" onclick="gamificationManager.removeFile('badge')">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h4><i class="fas fa-target"></i> Critério de Desbloqueio</h4>
                        
                        <div class="form-group">
                            <label for="achievementCriteriaType">Tipo de Critério *</label>
                            <select id="achievementCriteriaType" name="criteriaType" required>
                                <option value="">Selecione o critério</option>
                                <option value="points">Pontuação acumulada</option>
                                <option value="challenges">Desafios completos</option>
                                <option value="days">Dias consecutivos</option>
                                <option value="bonus">Bônus acessados</option>
                                <option value="streak">Sequência de atividades</option>
                            </select>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="achievementCriteriaValue">Valor do Critério *</label>
                                <input type="number" id="achievementCriteriaValue" name="criteriaValue" required min="1" placeholder="Ex: 70">
                            </div>
                            <div class="form-group">
                                <label for="achievementRewardType">Tipo de Recompensa *</label>
                                <select id="achievementRewardType" name="rewardType" required>
                                    <option value="">Selecione o tipo</option>
                                    <option value="visual">Visual (apenas selo)</option>
                                    <option value="content">Destrava conteúdo</option>
                                    <option value="points">Pontos extras</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group" id="achievementRewardDetailsGroup" style="display: none;">
                            <label for="achievementRewardDetails">Detalhes da Recompensa</label>
                            <textarea id="achievementRewardDetails" name="rewardDetails" placeholder="Descreva o que será desbloqueado..." rows="2"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="achievementStatus">Status *</label>
                            <select id="achievementStatus" name="status" required>
                                <option value="active">✅ Ativa</option>
                                <option value="inactive">❌ Inativa</option>
                            </select>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="achievementModalCancel">Cancelar</button>
                <button type="submit" class="btn btn-primary" id="achievementModalSave" form="achievementForm">
                    <i class="fas fa-save"></i>
                    Salvar Conquista
                </button>
            </div>
        </div>
    </div>
    
    <!-- Create/Edit Reward Modal -->
    <div class="modal large" id="rewardModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="rewardModalTitle">Criar Nova Recompensa</h3>
                <button class="modal-close" id="rewardModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="rewardForm">
                    <input type="hidden" id="rewardId" name="rewardId">
                    
                    <div class="form-section">
                        <h4><i class="fas fa-gift"></i> Informações da Recompensa</h4>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="rewardName">Nome da Recompensa *</label>
                                <input type="text" id="rewardName" name="name" required placeholder="Ex: Planner Secreto">
                            </div>
                            <div class="form-group">
                                <label for="rewardPointsRequired">Pontuação Mínima *</label>
                                <input type="number" id="rewardPointsRequired" name="pointsRequired" required min="1" placeholder="100">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="rewardDescription">Descrição *</label>
                            <textarea id="rewardDescription" name="description" required placeholder="Descreva a recompensa..." rows="3"></textarea>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="rewardType">Tipo de Conteúdo *</label>
                                <select id="rewardType" name="type" required>
                                    <option value="">Selecione o tipo</option>
                                    <option value="pdf">📄 PDF</option>
                                    <option value="video">🎥 Vídeo</option>
                                    <option value="image">🖼️ Imagem</option>
                                    <option value="link">🔗 Link Externo</option>
                                    <option value="text">📝 Texto</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="rewardVisibility">Visibilidade *</label>
                                <select id="rewardVisibility" name="visibility" required>
                                    <option value="">Selecione a visibilidade</option>
                                    <option value="all">Todos</option>
                                    <option value="premium">Premium</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h4><i class="fas fa-upload"></i> Conteúdo da Recompensa</h4>
                        
                        <div class="form-group" id="rewardFileGroup">
                            <label for="rewardFile">Arquivo da Recompensa</label>
                            <div class="file-upload-area" id="rewardFileUploadArea">
                                <input type="file" id="rewardFile" name="file" style="display: none;">
                                <div class="upload-placeholder">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>Clique para selecionar arquivo</p>
                                    <small>PDF, MP4, JPG, PNG até 50MB</small>
                                </div>
                                <div class="upload-preview" id="rewardFilePreview" style="display: none;">
                                    <div class="file-info">
                                        <i class="fas fa-file" id="rewardFileIcon"></i>
                                        <div class="file-details">
                                            <span class="file-name" id="rewardFileName"></span>
                                            <span class="file-size" id="rewardFileSize"></span>
                                        </div>
                                    </div>
                                    <button type="button" class="remove-file" onclick="gamificationManager.removeFile('rewardFile')">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group" id="rewardLinkGroup" style="display: none;">
                            <label for="rewardLink">Link da Recompensa</label>
                            <input type="url" id="rewardLink" name="link" placeholder="https://exemplo.com/recompensa">
                        </div>
                        
                        <div class="form-group" id="rewardTextGroup" style="display: none;">
                            <label for="rewardTextContent">Conteúdo de Texto</label>
                            <textarea id="rewardTextContent" name="textContent" placeholder="Digite o conteúdo da recompensa..." rows="5"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="rewardStatus">Status *</label>
                            <select id="rewardStatus" name="status" required>
                                <option value="active">✅ Ativa</option>
                                <option value="inactive">❌ Inativa</option>
                            </select>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="rewardModalCancel">Cancelar</button>
                <button type="submit" class="btn btn-primary" id="rewardModalSave" form="rewardForm">
                    <i class="fas fa-save"></i>
                    Salvar Recompensa
                </button>
            </div>
        </div>
    </div>
    
    <!-- User Progress Detail Modal -->
    <div class="modal large" id="userProgressModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="userProgressModalTitle">Progresso Detalhado</h3>
                <button class="modal-close" id="userProgressModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="user-progress-details">
                    <div class="user-info">
                        <div class="user-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="user-details">
                            <h4 id="progressUserName">Nome do Usuário</h4>
                            <p id="progressUserEmail">email@exemplo.com</p>
                            <div class="user-stats">
                                <span class="stat">
                                    <i class="fas fa-star"></i>
                                    <span id="progressUserPoints">0</span> pontos
                                </span>
                                <span class="stat">
                                    <i class="fas fa-trophy"></i>
                                    <span id="progressUserAchievements">0</span> conquistas
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="progress-sections">
                        <div class="progress-section">
                            <h5><i class="fas fa-history"></i> Histórico de Pontos</h5>
                            <div class="points-history" id="pointsHistory">
                                <!-- Points history will be populated here -->
                            </div>
                        </div>
                        
                        <div class="progress-section">
                            <h5><i class="fas fa-medal"></i> Conquistas Desbloqueadas</h5>
                            <div class="achievements-list" id="userAchievementsList">
                                <!-- User achievements will be populated here -->
                            </div>
                        </div>
                        
                        <div class="progress-section">
                            <h5><i class="fas fa-chart-bar"></i> Progresso nos Desafios</h5>
                            <div class="challenges-progress" id="challengesProgress">
                                <!-- Challenges progress will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="userProgressModalCancel">Fechar</button>
                <button type="button" class="btn btn-primary" id="awardPointsBtn">
                    <i class="fas fa-plus"></i>
                    Conceder Pontos
                </button>
            </div>
        </div>
    </div>
    
    <!-- Award Points Modal -->
    <div class="modal" id="awardPointsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Conceder Pontos Manualmente</h3>
                <button class="modal-close" id="awardPointsModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="awardPointsForm">
                    <input type="hidden" id="awardUserId" name="userId">
                    
                    <div class="form-group">
                        <label for="awardPointsAmount">Quantidade de Pontos *</label>
                        <input type="number" id="awardPointsAmount" name="points" required min="1" max="1000" placeholder="50">
                    </div>
                    
                    <div class="form-group">
                        <label for="awardPointsReason">Motivo *</label>
                        <input type="text" id="awardPointsReason" name="reason" required placeholder="Ex: Participação especial">
                    </div>
                    
                    <div class="form-group">
                        <label for="awardPointsDescription">Descrição (Opcional)</label>
                        <textarea id="awardPointsDescription" name="description" placeholder="Descrição adicional..." rows="3"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="awardPointsModalCancel">Cancelar</button>
                <button type="submit" class="btn btn-primary" id="awardPointsModalSave" form="awardPointsForm">
                    <i class="fas fa-gift"></i>
                    Conceder Pontos
                </button>
            </div>
        </div>
    </div>
    
    <!-- Confirm Delete Gamification Modal -->
    <div class="modal" id="confirmDeleteGamificationModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Confirmar Exclusão</h3>
                <button class="modal-close" id="confirmDeleteGamificationClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="confirm-delete-content">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h4 id="deleteGamificationTitle">Tem certeza que deseja excluir?</h4>
                    <p id="deleteGamificationMessage">Esta ação não pode ser desfeita.</p>
                    <div class="item-info">
                        <strong id="deleteGamificationName"></strong>
                        <span id="deleteGamificationDetails"></span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="confirmDeleteGamificationCancel">Cancelar</button>
                <button type="button" class="btn btn-danger" id="confirmDeleteGamificationConfirm">
                    <i class="fas fa-trash"></i>
                    Excluir
                </button>
            </div>
        </div>
    </div>
    
    <!-- Content Management Modals -->
    
    <!-- Add/Edit Content Modal -->
    <div class="modal extra-large" id="contentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="contentModalTitle">Adicionar Novo Conteúdo</h3>
                <button class="modal-close" id="contentModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="contentForm">
                    <input type="hidden" id="contentId" name="contentId">
                    
                    <!-- Basic Information -->
                    <div class="form-section">
                        <h4><i class="fas fa-info-circle"></i> Informações Básicas</h4>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="contentName">Nome do Conteúdo *</label>
                                <input type="text" id="contentName" name="name" required placeholder="Ex: Planner de Alimentação Saudável">
                            </div>
                            <div class="form-group">
                                <label for="contentLanguage">Idioma Principal *</label>
                                <select id="contentLanguage" name="language" required>
                                    <option value="">Selecione o idioma</option>
                                    <option value="es">🇪🇸 Español</option>
                                    <option value="pt">🇧🇷 Português</option>
                                    <option value="en">🇺🇸 English</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="contentDescription">Descrição *</label>
                            <div class="rich-text-editor">
                                <div class="editor-toolbar">
                                    <button type="button" class="editor-btn" data-command="bold" title="Negrito">
                                        <i class="fas fa-bold"></i>
                                    </button>
                                    <button type="button" class="editor-btn" data-command="italic" title="Itálico">
                                        <i class="fas fa-italic"></i>
                                    </button>
                                    <button type="button" class="editor-btn" data-command="underline" title="Sublinhado">
                                        <i class="fas fa-underline"></i>
                                    </button>
                                    <div class="editor-separator"></div>
                                    <button type="button" class="editor-btn" data-command="insertUnorderedList" title="Lista">
                                        <i class="fas fa-list-ul"></i>
                                    </button>
                                    <button type="button" class="editor-btn" data-command="insertOrderedList" title="Lista Numerada">
                                        <i class="fas fa-list-ol"></i>
                                    </button>
                                </div>
                                <div id="contentDescription" class="editor-content" contenteditable="true" placeholder="Descreva o conteúdo, seus benefícios e como usar..."></div>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="contentCategory">Categoria *</label>
                                <select id="contentCategory" name="category" required>
                                    <option value="">Selecione a categoria</option>
                                    <option value="ebook">📚 eBook</option>
                                    <option value="planner">📋 Planner</option>
                                    <option value="lesson">🎓 Aula</option>
                                    <option value="bonus">🎁 Bônus</option>
                                    <option value="guide">📖 Guia</option>
                                    <option value="challenge">🏆 Desafio</option>
                                    <option value="recipe">🍽️ Receita</option>
                                    <option value="other">🔧 Outro</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="contentOrder">Ordem de Exibição</label>
                                <input type="number" id="contentOrder" name="order" min="1" max="999" placeholder="1">
                                <small class="form-help">Ordem em que aparecerá no app (menor número = primeiro)</small>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Media Configuration -->
                    <div class="form-section">
                        <h4><i class="fas fa-file-upload"></i> Configuração de Mídia</h4>
                        
                        <div class="form-group">
                            <label for="contentMediaType">Tipo de Mídia *</label>
                            <select id="contentMediaType" name="mediaType" required>
                                <option value="">Selecione o tipo</option>
                                <option value="file">📁 Upload de Arquivo</option>
                                <option value="link">🔗 Link Externo</option>
                            </select>
                        </div>
                        
                        <!-- File Upload Section -->
                        <div class="media-section" id="fileUploadSection" style="display: none;">
                            <div class="form-group">
                                <label for="contentFile">Arquivo Principal *</label>
                                <div class="file-upload-area" id="contentFileUploadArea">
                                    <input type="file" id="contentFile" name="file" accept=".pdf,.mp4,.mp3,.wav,.jpg,.jpeg,.png,.gif" style="display: none;">
                                    <div class="upload-placeholder">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                        <p>Clique para selecionar arquivo</p>
                                        <small>PDF, Vídeo (MP4), Áudio (MP3, WAV), Imagem (JPG, PNG, GIF) até 100MB</small>
                                    </div>
                                    <div class="upload-preview" id="contentFilePreview" style="display: none;">
                                        <div class="file-info">
                                            <i class="fas fa-file" id="contentFileIcon"></i>
                                            <div class="file-details">
                                                <span class="file-name" id="contentFileName"></span>
                                                <span class="file-size" id="contentFileSize"></span>
                                                <span class="file-type" id="contentFileType"></span>
                                            </div>
                                        </div>
                                        <button type="button" class="remove-file" onclick="contentManager.removeFile('main')">
                                            <i class="fas fa-times"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- External Link Section -->
                        <div class="media-section" id="linkSection" style="display: none;">
                            <div class="form-group">
                                <label for="contentExternalLink">Link Externo *</label>
                                <input type="url" id="contentExternalLink" name="externalLink" placeholder="https://youtube.com/watch?v=...">
                                <small class="form-help">YouTube, Vimeo, Google Drive, Dropbox, etc.</small>
                            </div>
                            
                            <div class="form-group">
                                <label for="contentLinkType">Tipo de Link</label>
                                <select id="contentLinkType" name="linkType">
                                    <option value="youtube">📺 YouTube</option>
                                    <option value="vimeo">🎬 Vimeo</option>
                                    <option value="drive">☁️ Google Drive</option>
                                    <option value="dropbox">📦 Dropbox</option>
                                    <option value="other">🔗 Outro</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Thumbnail Upload -->
                        <div class="form-group">
                            <label for="contentThumbnail">Imagem de Capa/Miniatura</label>
                            <div class="file-upload-area" id="contentThumbnailUploadArea">
                                <input type="file" id="contentThumbnail" name="thumbnail" accept="image/*" style="display: none;">
                                <div class="upload-placeholder">
                                    <i class="fas fa-image"></i>
                                    <p>Clique para selecionar imagem de capa</p>
                                    <small>JPG, PNG até 5MB (recomendado: 800x600px)</small>
                                </div>
                                <div class="upload-preview" id="contentThumbnailPreview" style="display: none;">
                                    <img id="contentThumbnailPreviewImg" src="" alt="Preview">
                                    <button type="button" class="remove-file" onclick="contentManager.removeFile('thumbnail')">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Content Settings -->
                    <div class="form-section">
                        <h4><i class="fas fa-cog"></i> Configurações de Acesso</h4>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="contentAccess">Tipo de Acesso *</label>
                                <select id="contentAccess" name="access" required>
                                    <option value="">Selecione o acesso</option>
                                    <option value="free">🆓 Gratuito</option>
                                    <option value="premium">👑 Premium</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="contentStatus">Status *</label>
                                <select id="contentStatus" name="status" required>
                                    <option value="active">✅ Ativo</option>
                                    <option value="inactive">❌ Inativo</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="contentFeatured" name="featured">
                                    <span class="checkbox-custom"></span>
                                    ⭐ Marcar como Destaque
                                    <small>Conteúdo aparecerá em destaque na home do app</small>
                                </label>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="contentDownloadable" name="downloadable">
                                    <span class="checkbox-custom"></span>
                                    📥 Permitir Download
                                    <small>Usuários poderão baixar o arquivo para acesso offline</small>
                                </label>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="contentModalCancel">Cancelar</button>
                <button type="submit" class="btn btn-primary" id="contentModalSave" form="contentForm">
                    <i class="fas fa-save"></i>
                    Salvar Conteúdo
                </button>
            </div>
        </div>
    </div>
    
    <!-- View Content Modal -->
    <div class="modal large" id="viewContentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="viewContentTitle">Visualizar Conteúdo</h3>
                <button class="modal-close" id="viewContentModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="content-viewer">
                    <div class="content-preview">
                        <div class="content-thumbnail">
                            <img id="viewContentThumbnail" src="" alt="Thumbnail">
                            <div class="content-type-badge" id="viewContentTypeBadge"></div>
                        </div>
                        <div class="content-details">
                            <h4 id="viewContentName"></h4>
                            <div class="content-meta">
                                <span class="meta-item">
                                    <i class="fas fa-language"></i>
                                    <span id="viewContentLanguage"></span>
                                </span>
                                <span class="meta-item">
                                    <i class="fas fa-folder"></i>
                                    <span id="viewContentCategory"></span>
                                </span>
                                <span class="meta-item">
                                    <i class="fas fa-crown"></i>
                                    <span id="viewContentAccess"></span>
                                </span>
                                <span class="meta-item">
                                    <i class="fas fa-eye"></i>
                                    <span id="viewContentViews">0 visualizações</span>
                                </span>
                            </div>
                            <div class="content-description" id="viewContentDescription"></div>
                            <div class="content-stats">
                                <div class="stat-item">
                                    <span class="stat-label">Data de Upload:</span>
                                    <span class="stat-value" id="viewContentDate"></span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Última Atualização:</span>
                                    <span class="stat-value" id="viewContentUpdated"></span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Ordem:</span>
                                    <span class="stat-value" id="viewContentOrder"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="viewContentModalCancel">Fechar</button>
                <button type="button" class="btn btn-info" id="previewContentBtn">
                    <i class="fas fa-external-link-alt"></i>
                    Abrir Conteúdo
                </button>
                <button type="button" class="btn btn-primary" id="editContentFromView">
                    <i class="fas fa-edit"></i>
                    Editar
                </button>
            </div>
        </div>
    </div>
    
    <!-- Confirm Delete Content Modal -->
    <div class="modal" id="confirmDeleteContentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Confirmar Exclusão</h3>
                <button class="modal-close" id="confirmDeleteContentClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="confirm-delete-content">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h4>Tem certeza que deseja excluir este conteúdo?</h4>
                    <p>Esta ação não pode ser desfeita. O conteúdo será removido permanentemente e não estará mais disponível para os usuários.</p>
                    <div class="item-info">
                        <strong id="deleteContentName"></strong>
                        <span id="deleteContentDetails"></span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="confirmDeleteContentCancel">Cancelar</button>
                <button type="button" class="btn btn-danger" id="confirmDeleteContentConfirm">
                    <i class="fas fa-trash"></i>
                    Excluir Conteúdo
                </button>
            </div>
        </div>
    </div>
    
    <!-- Reorder Contents Modal -->
    <div class="modal large" id="reorderContentsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Reordenar Conteúdos</h3>
                <button class="modal-close" id="reorderContentsModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="reorder-instructions">
                    <p><i class="fas fa-info-circle"></i> Arraste os itens para reorganizar a ordem de exibição no aplicativo.</p>
                </div>
                <div class="reorder-container">
                    <div class="reorder-list" id="reorderList">
                        <!-- Sortable content items will be populated here -->
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="reorderContentsModalCancel">Cancelar</button>
                <button type="button" class="btn btn-primary" id="saveReorderBtn">
                    <i class="fas fa-save"></i>
                    Salvar Ordem
                </button>
            </div>
        </div>
    </div>
    
    <!-- Creatives Modals -->
    
    <!-- Add/Edit Creative Modal -->
    <div class="modal large" id="creativeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="creativeModalTitle">Adicionar Novo Criativo</h3>
                <button class="modal-close" id="creativeModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="creativeForm">
                    <input type="hidden" id="creativeId" name="creativeId">
                    
                    <div class="form-section">
                        <h4><i class="fas fa-info-circle"></i> Informações do Criativo</h4>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="creativeName">Nome do Criativo *</label>
                                <input type="text" id="creativeName" name="name" required placeholder="Ex: Banner Instagram Transformação">
                            </div>
                            <div class="form-group">
                                <label for="creativeType">Tipo de Criativo *</label>
                                <select id="creativeType" name="type" required>
                                    <option value="">Selecione o tipo</option>
                                    <option value="feed">📱 Feed</option>
                                    <option value="story">📖 Story</option>
                                    <option value="carousel">🎠 Carrossel</option>
                                    <option value="mockup">📱 Mockup</option>
                                    <option value="landing">🌐 Página de Vendas</option>
                                    <option value="members">👥 Área de Membros</option>
                                    <option value="banner">🏷️ Banner</option>
                                    <option value="ad">📢 Anúncio</option>
                                    <option value="other">🔧 Outro</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="creativeLanguage">Idioma Principal *</label>
                                <select id="creativeLanguage" name="language" required>
                                    <option value="">Selecione o idioma</option>
                                    <option value="pt">🇧🇷 Português</option>
                                    <option value="es">🇪🇸 Español</option>
                                    <option value="en">🇺🇸 English</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="creativeStatus">Status *</label>
                                <select id="creativeStatus" name="status" required>
                                    <option value="active">✅ Ativo</option>
                                    <option value="inactive">❌ Inativo</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="creativeDescription">Descrição (Opcional)</label>
                            <textarea id="creativeDescription" name="description" placeholder="Descreva o criativo, campanha ou objetivo..." rows="3"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="creativeFeatured" name="featured">
                                <span class="checkbox-custom"></span>
                                ⭐ Marcar como destaque
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h4><i class="fas fa-image"></i> Upload da Imagem</h4>
                        
                        <div class="file-upload-area" id="creativeImageUploadArea">
                            <input type="file" id="creativeImage" name="image" accept="image/*" style="display: none;">
                            <div class="upload-placeholder">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <p>Clique para selecionar imagem</p>
                                <small>JPG, PNG ou GIF até 10MB</small>
                            </div>
                            <div class="upload-preview" id="creativeImagePreview" style="display: none;">
                                <img id="creativeImagePreviewImg" src="" alt="Preview">
                                <div class="image-info">
                                    <span class="image-name" id="creativeImageName"></span>
                                    <span class="image-size" id="creativeImageSize"></span>
                                </div>
                                <button type="button" class="remove-file" onclick="creativesManager.removeImage()">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="creativeModalCancel">Cancelar</button>
                <button type="submit" class="btn btn-primary" id="creativeModalSave" form="creativeForm">
                    <i class="fas fa-save"></i>
                    Salvar Criativo
                </button>
            </div>
        </div>
    </div>
    
    <!-- View Creative Modal -->
    <div class="modal large" id="viewCreativeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="viewCreativeTitle">Visualizar Criativo</h3>
                <button class="modal-close" id="viewCreativeModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="creative-viewer">
                    <div class="creative-image-container">
                        <img id="viewCreativeImage" src="" alt="Criativo">
                    </div>
                    <div class="creative-details">
                        <div class="detail-row">
                            <strong>Nome:</strong>
                            <span id="viewCreativeName"></span>
                        </div>
                        <div class="detail-row">
                            <strong>Tipo:</strong>
                            <span id="viewCreativeType"></span>
                        </div>
                        <div class="detail-row">
                            <strong>Idioma:</strong>
                            <span id="viewCreativeLanguage"></span>
                        </div>
                        <div class="detail-row">
                            <strong>Status:</strong>
                            <span id="viewCreativeStatus"></span>
                        </div>
                        <div class="detail-row">
                            <strong>Origem:</strong>
                            <span id="viewCreativeSource"></span>
                        </div>
                        <div class="detail-row">
                            <strong>Data de Upload:</strong>
                            <span id="viewCreativeDate"></span>
                        </div>
                        <div class="detail-row" id="viewCreativeDescriptionRow">
                            <strong>Descrição:</strong>
                            <span id="viewCreativeDescription"></span>
                        </div>
                        <div class="detail-row" id="viewCreativeAiDetailsRow" style="display: none;">
                            <strong>Detalhes da IA:</strong>
                            <div class="ai-details" id="viewCreativeAiDetails"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="viewCreativeModalCancel">Fechar</button>
                <button type="button" class="btn btn-primary" id="editCreativeFromView">
                    <i class="fas fa-edit"></i>
                    Editar
                </button>
                <button type="button" class="btn btn-success" id="downloadCreative">
                    <i class="fas fa-download"></i>
                    Download
                </button>
            </div>
        </div>
    </div>
    
    <!-- Confirm Delete Creative Modal -->
    <div class="modal" id="confirmDeleteCreativeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Confirmar Exclusão</h3>
                <button class="modal-close" id="confirmDeleteCreativeClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="confirm-delete-content">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h4>Tem certeza que deseja excluir este criativo?</h4>
                    <p>Esta ação não pode ser desfeita. O criativo será removido permanentemente.</p>
                    <div class="item-info">
                        <strong id="deleteCreativeName"></strong>
                        <span id="deleteCreativeDetails"></span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="confirmDeleteCreativeCancel">Cancelar</button>
                <button type="button" class="btn btn-danger" id="confirmDeleteCreativeConfirm">
                    <i class="fas fa-trash"></i>
                    Excluir
                </button>
            </div>
        </div>
    </div>
    
    <!-- AI Generation Progress Modal -->
    <div class="modal" id="aiGenerationModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Gerando Criativo com IA</h3>
            </div>
            <div class="modal-body">
                <div class="ai-generation-progress">
                    <div class="generation-steps">
                        <div class="step active" id="step1">
                            <i class="fas fa-brain"></i>
                            <span>Processando briefing...</span>
                        </div>
                        <div class="step" id="step2">
                            <i class="fas fa-magic"></i>
                            <span>Gerando prompt otimizado...</span>
                        </div>
                        <div class="step" id="step3">
                            <i class="fas fa-image"></i>
                            <span>Criando imagem com IA...</span>
                        </div>
                        <div class="step" id="step4">
                            <i class="fas fa-check"></i>
                            <span>Finalizando criativo...</span>
                        </div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="aiProgress"></div>
                    </div>
                    <p class="progress-text" id="aiProgressText">Iniciando geração...</p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelAiGeneration">
                    <i class="fas fa-times"></i>
                    Cancelar
                </button>
            </div>
        </div>
    </div>
    
    <!-- Confirm Delete Challenge Modal -->
    <div class="modal" id="confirmDeleteChallengeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Confirmar Exclusão</h3>
                <button class="modal-close" id="confirmDeleteChallengeClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="confirm-delete-content">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h4>Tem certeza que deseja excluir este desafio?</h4>
                    <p>Esta ação não pode ser desfeita. O desafio será removido permanentemente do sistema, incluindo todo o progresso dos usuários.</p>
                    <div class="challenge-info">
                        <strong id="deleteChallengeName"></strong>
                        <span id="deleteChallengeParticipants"></span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="confirmDeleteChallengeCancel">Cancelar</button>
                <button type="button" class="btn btn-danger" id="confirmDeleteChallengeConfirm">
                    <i class="fas fa-trash"></i>
                    Excluir Desafio
                </button>
            </div>
        </div>
    </div>

    <script src="auth.js"></script>
    <script src="script.js"></script>
    <script src="users-management.js"></script>
    <script src="products-management.js"></script>
    <script src="bonus-management.js"></script>
    <script src="challenges-management.js"></script>
    <script src="store-management.js"></script>
    <script src="sales-management.js"></script>
    <script src="notifications-management.js"></script>
    <script src="reports-management.js"></script>
    <script src="integrations-management.js"></script>
    <script src="gamification-management.js"></script>
    <script src="creatives-management.js"></script>
    <script src="content-management.js"></script>
    <script src="app-customization.js"></script>
    <script src="fix-customization-display.js"></script>
    <script src="support-management.js"></script>
    
    <!-- Inline JavaScript for GitHub Pages -->
    <script>
        // App Customization Inline
        class AppCustomizationInline {
            constructor() {
                this.isInitialized = false;
                this.settings = {
                    appName: 'Plan de Vitalidad',
                    primaryColor: '#10B981',
                    secondaryColor: '#6B7280',
                    backgroundColor: '#F9FAFB',
                    titleColor: '#1F2937',
                    fontFamily: 'Inter',
                    buttonStyle: 'rounded',
                    enableAnimations: true,
                    homeLayout: 'cards',
                    primaryLanguage: 'es'
                };
            }

            init() {
                if (this.isInitialized) return;
                console.log('🎨 App Customization Inline inicializado');
                this.setupEventListeners();
                this.loadSettings();
                this.isInitialized = true;
            }

            setupEventListeners() {
                // App Name
                const appNameInput = document.getElementById('appName');
                if (appNameInput) {
                    appNameInput.addEventListener('input', (e) => {
                        this.settings.appName = e.target.value;
                        this.updatePreview();
                    });
                }

                // Color inputs
                ['primaryColor', 'secondaryColor', 'backgroundColor', 'titleColor'].forEach(colorType => {
                    const colorInput = document.getElementById(colorType);
                    if (colorInput) {
                        colorInput.addEventListener('input', (e) => {
                            this.settings[colorType] = e.target.value;
                            this.updatePreview();
                        });
                    }
                });

                // Layout options
                const layoutOptions = document.querySelectorAll('.layout-option');
                layoutOptions.forEach(option => {
                    option.addEventListener('click', () => {
                        const layout = option.dataset.layout;
                        this.settings.homeLayout = layout;
                        this.updateLayoutSelection(layout);
                        this.updatePreview();
                    });
                });

                // Save button
                const saveBtn = document.getElementById('saveCustomizationBtn');
                if (saveBtn) {
                    saveBtn.addEventListener('click', () => {
                        this.saveSettings();
                        this.showNotification('Personalização salva com sucesso!', 'success');
                    });
                }
            }

            updateLayoutSelection(layout) {
                const layoutOptions = document.querySelectorAll('.layout-option');
                layoutOptions.forEach(option => {
                    option.classList.toggle('active', option.dataset.layout === layout);
                });
            }

            updatePreview() {
                const previewAppName = document.getElementById('previewAppName');
                if (previewAppName) {
                    previewAppName.textContent = this.settings.appName;
                }
            }

            loadSettings() {
                const saved = localStorage.getItem('appCustomizationSettings');
                if (saved) {
                    this.settings = { ...this.settings, ...JSON.parse(saved) };
                    this.populateForm();
                }
            }

            populateForm() {
                const appNameInput = document.getElementById('appName');
                if (appNameInput) appNameInput.value = this.settings.appName;

                ['primaryColor', 'secondaryColor', 'backgroundColor', 'titleColor'].forEach(colorType => {
                    const input = document.getElementById(colorType);
                    if (input) input.value = this.settings[colorType];
                });

                this.updateLayoutSelection(this.settings.homeLayout);
            }

            saveSettings() {
                localStorage.setItem('appCustomizationSettings', JSON.stringify(this.settings));
            }

            showNotification(message, type) {
                console.log(`${type.toUpperCase()}: ${message}`);
            }
        }

        // Support Manager Inline
        class SupportManagerInline {
            constructor() {
                this.isInitialized = false;
                this.tickets = [
                    {
                        id: 1,
                        user: 'María González',
                        email: 'maria@email.com',
                        message: '¿Cómo puedo acceder a los desafíos premium? No aparecen en mi app.',
                        date: new Date().toISOString(),
                        language: 'es',
                        status: 'pending',
                        responses: [],
                        rating: null,
                        avatar: 'MG'
                    },
                    {
                        id: 2,
                        user: 'João Silva',
                        email: 'joao@email.com',
                        message: 'Não consigo fazer download dos eBooks. Sempre dá erro.',
                        date: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString(),
                        language: 'pt',
                        status: 'responded',
                        responses: [{
                            type: 'ai',
                            message: 'Olá João! Para resolver o problema de download dos eBooks, tente: 1) Verificar conexão, 2) Reiniciar app, 3) Tentar novamente.',
                            date: new Date(Date.now() - 23 * 60 * 60 * 1000).toISOString()
                        }],
                        rating: 4,
                        avatar: 'JS'
                    }
                ];
                this.currentTicket = null;
            }

            init() {
                if (this.isInitialized) return;
                console.log('🤖 Support Manager Inline inicializado');
                this.setupEventListeners();
                this.renderTickets();
                this.updateStats();
                this.isInitialized = true;
            }

            setupEventListeners() {
                // AI Toggle
                const aiToggleSwitch = document.getElementById('aiToggleSwitch');
                if (aiToggleSwitch) {
                    aiToggleSwitch.addEventListener('click', () => {
                        aiToggleSwitch.classList.toggle('active');
                        const aiToggle = document.getElementById('aiToggle');
                        if (aiToggle) aiToggle.classList.toggle('active');
                    });
                }

                // Filter buttons
                const filterBtns = document.querySelectorAll('.filter-btn');
                filterBtns.forEach(btn => {
                    btn.addEventListener('click', () => {
                        filterBtns.forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        this.renderTickets(btn.dataset.filter);
                    });
                });

                // Close response editor
                const closeEditor = document.getElementById('closeResponseEditor');
                if (closeEditor) {
                    closeEditor.addEventListener('click', () => {
                        this.closeResponseEditor();
                    });
                }

                // Send response
                const sendResponse = document.getElementById('sendResponse');
                if (sendResponse) {
                    sendResponse.addEventListener('click', () => {
                        this.sendResponse();
                    });
                }
            }

            renderTickets(filter = 'all') {
                const inbox = document.getElementById('supportInbox');
                if (!inbox) return;

                let filteredTickets = this.tickets;
                if (filter !== 'all') {
                    filteredTickets = this.tickets.filter(t => t.status === filter);
                }

                inbox.innerHTML = '';
                
                filteredTickets.forEach(ticket => {
                    const div = document.createElement('div');
                    div.className = `support-ticket ${ticket.status}`;
                    div.innerHTML = `
                        <div class="ticket-header">
                            <div class="ticket-user">
                                <div class="user-avatar">${ticket.avatar}</div>
                                <span>${ticket.user}</span>
                            </div>
                            <div class="ticket-meta">
                                <span>${this.getLanguageFlag(ticket.language)} ${ticket.language.toUpperCase()}</span>
                                <span>${this.getTimeAgo(new Date(ticket.date))}</span>
                                <span class="ticket-status ${ticket.status}">${this.getStatusText(ticket.status)}</span>
                            </div>
                        </div>
                        <div class="ticket-message">${ticket.message}</div>
                        <div class="ticket-actions">
                            <button class="btn btn-primary btn-small" onclick="supportManagerInline.openResponseEditor(${ticket.id})">
                                <i class="fas fa-reply"></i> Responder
                            </button>
                        </div>
                    `;
                    inbox.appendChild(div);
                });
            }

            openResponseEditor(ticketId) {
                const ticket = this.tickets.find(t => t.id === ticketId);
                if (!ticket) return;

                this.currentTicket = ticket;
                const editor = document.getElementById('responseEditor');
                const originalMessage = document.getElementById('originalMessage');
                
                if (originalMessage) {
                    originalMessage.innerHTML = `
                        <h5>${ticket.user} (${ticket.email})</h5>
                        <p><strong>Pergunta original:</strong></p>
                        <p>${ticket.message}</p>
                    `;
                }
                
                if (editor) {
                    editor.classList.add('active');
                }
            }

            closeResponseEditor() {
                const editor = document.getElementById('responseEditor');
                if (editor) {
                    editor.classList.remove('active');
                }
                this.currentTicket = null;
            }

            sendResponse() {
                const textarea = document.getElementById('responseTextarea');
                if (!textarea || !textarea.value.trim() || !this.currentTicket) return;

                const response = {
                    type: 'support',
                    message: textarea.value.trim(),
                    date: new Date().toISOString()
                };

                if (!this.currentTicket.responses) {
                    this.currentTicket.responses = [];
                }
                this.currentTicket.responses.push(response);
                this.currentTicket.status = 'responded';

                const ticketIndex = this.tickets.findIndex(t => t.id === this.currentTicket.id);
                if (ticketIndex !== -1) {
                    this.tickets[ticketIndex] = this.currentTicket;
                }

                this.renderTickets();
                this.updateStats();
                this.closeResponseEditor();
                console.log('Resposta enviada com sucesso!');
            }

            updateStats() {
                const totalTickets = document.getElementById('totalTickets');
                const pendingTickets = document.getElementById('pendingTickets');
                const resolvedTickets = document.getElementById('resolvedTickets');
                const manualResponses = document.getElementById('manualResponses');

                if (totalTickets) totalTickets.textContent = this.tickets.length;
                if (pendingTickets) pendingTickets.textContent = this.tickets.filter(t => t.status === 'pending').length;
                if (resolvedTickets) resolvedTickets.textContent = this.tickets.filter(t => t.status === 'resolved').length;
                if (manualResponses) manualResponses.textContent = this.tickets.filter(t => t.responses?.some(r => r.type === 'support')).length;
            }

            getLanguageFlag(language) {
                const flags = { 'es': '🇪🇸', 'pt': '🇧🇷', 'en': '🇺🇸' };
                return flags[language] || '🌐';
            }

            getTimeAgo(date) {
                const diff = new Date() - date;
                const hours = Math.floor(diff / 3600000);
                const days = Math.floor(diff / 86400000);
                if (days > 0) return `${days}d atrás`;
                if (hours > 0) return `${hours}h atrás`;
                return 'Agora';
            }

            getStatusText(status) {
                const texts = {
                    'pending': 'Pendente',
                    'responded': 'Respondido',
                    'escalated': 'Encaminhado',
                    'resolved': 'Resolvido'
                };
                return texts[status] || status;
            }
        }

        // Autoresponder Manager Inline
        class AutoresponderManagerInline {
            constructor() {
                this.isInitialized = false;
                this.emails = JSON.parse(localStorage.getItem('autoresponder_emails') || '[]');
                this.automations = JSON.parse(localStorage.getItem('autoresponder_automations') || '[]');
                this.integrations = JSON.parse(localStorage.getItem('autoresponder_integrations') || '{}');
                this.stats = JSON.parse(localStorage.getItem('autoresponder_stats') || '{}');
                this.currentEmailId = null;
                this.currentFilter = 'all';
                this.currentSearch = '';
            }

            init() {
                if (this.isInitialized) return;
                console.log('📬 Autoresponder Manager Inline inicializado');
                this.loadExampleData();
                this.renderStats();
                this.renderEmailList();
                this.renderAutomations();
                this.renderIntegrations();
                this.bindEvents();
                this.isInitialized = true;
            }

            loadExampleData() {
                if (this.emails.length === 0) {
                    this.emails = [
                        {
                            id: 1,
                            title: 'Boas-vindas - Novo Usuário',
                            subject: '¡Bienvenido al Plan de Vitalidad! 🌟',
                            content: '<h2>¡Hola!</h2><p>Te damos la bienvenida a nuestro Plan de Vitalidad. Estamos emocionados de acompañarte en este viaje hacia una vida más saludable.</p>',
                            language: 'spanish',
                            target: 'all_subscribers',
                            schedule: 'immediate',
                            status: 'active',
                            created: new Date().toISOString(),
                            stats: { sent: 245, opened: 178, clicked: 89 }
                        },
                        {
                            id: 2,
                            title: 'Confirmação de Compra',
                            subject: 'Obrigado pela sua compra! Seu acesso está liberado',
                            content: '<h2>Parabéns!</h2><p>Sua compra foi confirmada com sucesso. Agora você tem acesso completo ao Plan de Vitalidad.</p>',
                            language: 'portuguese',
                            target: 'buyers_only',
                            schedule: 'after_purchase',
                            status: 'active',
                            created: new Date().toISOString(),
                            stats: { sent: 89, opened: 76, clicked: 54 }
                        }
                    ];

                    this.automations = [
                        { id: 1, name: 'Sequência de Boas-vindas', event: 'user_register', emails: [1], active: true, delay: 0 },
                        { id: 2, name: 'Pós-compra', event: 'purchase_confirmed', emails: [2], active: true, delay: 30 }
                    ];

                    this.integrations = {
                        mailerlite: { connected: false, apiKey: '' },
                        brevo: { connected: false, apiKey: '' },
                        convertkit: { connected: false, apiKey: '' },
                        zapier: { connected: false, webhook: '' }
                    };

                    this.stats = {
                        totalEmails: 2,
                        totalAutomations: 2,
                        totalSent: 334,
                        openRate: 73.2
                    };

                    this.saveData();
                }
            }

            saveData() {
                localStorage.setItem('autoresponder_emails', JSON.stringify(this.emails));
                localStorage.setItem('autoresponder_automations', JSON.stringify(this.automations));
                localStorage.setItem('autoresponder_integrations', JSON.stringify(this.integrations));
                localStorage.setItem('autoresponder_stats', JSON.stringify(this.stats));
            }

            renderStats() {
                const statsContainer = document.getElementById('autoresponderStats');
                if (!statsContainer) return;

                statsContainer.innerHTML = `
                    <div class="stat-card emails">
                        <div class="stat-icon">📧</div>
                        <div class="stat-content">
                            <h4>${this.stats.totalEmails || 0}</h4>
                            <p>E-mails Criados</p>
                        </div>
                    </div>
                    <div class="stat-card automations">
                        <div class="stat-icon">🔄</div>
                        <div class="stat-content">
                            <h4>${this.stats.totalAutomations || 0}</h4>
                            <p>Automações Ativas</p>
                        </div>
                    </div>
                    <div class="stat-card sent">
                        <div class="stat-icon">📤</div>
                        <div class="stat-content">
                            <h4>${this.stats.totalSent || 0}</h4>
                            <p>E-mails Enviados</p>
                        </div>
                    </div>
                    <div class="stat-card opened">
                        <div class="stat-icon">📊</div>
                        <div class="stat-content">
                            <h4>${this.stats.openRate || 0}%</h4>
                            <p>Taxa de Abertura</p>
                        </div>
                    </div>
                `;
            }

            renderEmailList() {
                const emailList = document.getElementById('emailList');
                if (!emailList) return;

                emailList.innerHTML = this.emails.map(email => `
                    <div class="email-item ${email.status}">
                        <div class="email-header">
                            <div>
                                <h4 class="email-title">${email.title}</h4>
                                <p class="email-subject">${email.subject}</p>
                            </div>
                            <div class="email-actions">
                                <button class="btn btn-sm btn-primary" onclick="autoresponderManagerInline.editEmail(${email.id})">
                                    <i class="fas fa-edit"></i> Editar
                                </button>
                                <button class="btn btn-sm ${email.status === 'active' ? 'btn-warning' : 'btn-success'}" 
                                        onclick="autoresponderManagerInline.toggleEmailStatus(${email.id})">
                                    <i class="fas fa-power-off"></i> ${email.status === 'active' ? 'Pausar' : 'Ativar'}
                                </button>
                            </div>
                        </div>
                        <div class="email-meta">
                            <span class="email-language">${this.getLanguageLabel(email.language)}</span>
                            <span class="email-trigger">${this.getTriggerLabel(email.schedule)}</span>
                            <span class="email-status ${email.status}">${email.status === 'active' ? 'Ativo' : 'Inativo'}</span>
                        </div>
                        ${email.stats ? `
                        <div class="email-stats">
                            <span><i class="fas fa-paper-plane"></i> ${email.stats.sent} enviados</span>
                            <span><i class="fas fa-envelope-open"></i> ${email.stats.opened} abertos</span>
                            <span><i class="fas fa-percentage"></i> ${Math.round((email.stats.opened / email.stats.sent) * 100)}% abertura</span>
                        </div>
                        ` : ''}
                    </div>
                `).join('');
            }

            renderAutomations() {
                const automationsList = document.getElementById('automationsList');
                if (!automationsList) return;

                const events = [
                    { id: 'user_register', name: 'Novo usuário se cadastra', description: 'Disparado quando um usuário cria uma conta' },
                    { id: 'purchase_confirmed', name: 'Compra confirmada', description: 'Disparado quando uma compra é confirmada na Kiwify' },
                    { id: 'product_unlocked', name: 'Produto desbloqueado', description: 'Disparado quando um produto específico é liberado' },
                    { id: 'challenge_completed', name: 'Desafio concluído', description: 'Disparado quando um usuário completa um desafio' }
                ];

                automationsList.innerHTML = events.map(event => {
                    const automation = this.automations.find(a => a.event === event.id);
                    const isActive = automation && automation.active;
                    
                    return `
                        <div class="event-item ${isActive ? 'active' : ''}">
                            <div class="event-header">
                                <div class="event-info">
                                    <h4>${event.name}</h4>
                                    <p>${event.description}</p>
                                </div>
                                <div class="event-toggle ${isActive ? 'active' : ''}" 
                                     onclick="autoresponderManagerInline.toggleAutomation('${event.id}')"></div>
                            </div>
                        </div>
                    `;
                }).join('');
            }

            renderIntegrations() {
                const integrationsList = document.getElementById('integrationsList');
                if (!integrationsList) return;

                const integrations = [
                    { id: 'mailerlite', name: 'MailerLite', icon: '📧', description: 'Plataforma de email marketing' },
                    { id: 'brevo', name: 'Brevo (Sendinblue)', icon: '💌', description: 'Ferramenta completa de marketing' },
                    { id: 'convertkit', name: 'ConvertKit', icon: '📬', description: 'Email marketing para criadores' },
                    { id: 'zapier', name: 'Zapier', icon: '⚡', description: 'Automação entre aplicativos' }
                ];

                integrationsList.innerHTML = integrations.map(integration => {
                    const config = this.integrations[integration.id] || { connected: false };
                    
                    return `
                        <div class="integration-card ${config.connected ? 'connected' : ''}">
                            <div class="integration-icon">${integration.icon}</div>
                            <h4 class="integration-name">${integration.name}</h4>
                            <p class="integration-status">
                                ${config.connected ? 'Conectado' : 'Não conectado'}
                            </p>
                            <p style="font-size: 0.8rem; color: #666; margin-bottom: 1rem;">
                                ${integration.description}
                            </p>
                            <button class="btn ${config.connected ? 'btn-warning' : 'btn-primary'}" 
                                    onclick="autoresponderManagerInline.configureIntegration('${integration.id}')">
                                <i class="fas fa-${config.connected ? 'edit' : 'plug'}"></i> 
                                ${config.connected ? 'Configurar' : 'Conectar'}
                            </button>
                        </div>
                    `;
                }).join('');
            }

            bindEvents() {
                const createBtn = document.getElementById('createEmailBtn');
                if (createBtn) {
                    createBtn.addEventListener('click', () => this.openEmailModal());
                }

                const modal = document.getElementById('emailModal');
                if (modal) {
                    modal.addEventListener('click', (e) => {
                        if (e.target === modal) this.closeEmailModal();
                    });
                }
            }

            openEmailModal(emailId = null) {
                const modal = document.getElementById('emailModal');
                if (modal) {
                    modal.classList.add('active');
                }
            }

            closeEmailModal() {
                const modal = document.getElementById('emailModal');
                if (modal) {
                    modal.classList.remove('active');
                }
            }

            editEmail(emailId) {
                this.openEmailModal(emailId);
            }

            toggleEmailStatus(emailId) {
                const email = this.emails.find(e => e.id === emailId);
                if (email) {
                    email.status = email.status === 'active' ? 'inactive' : 'active';
                    this.saveData();
                    this.renderEmailList();
                    this.showNotification(`E-mail ${email.status === 'active' ? 'ativado' : 'pausado'} com sucesso!`);
                }
            }

            toggleAutomation(eventId) {
                let automation = this.automations.find(a => a.event === eventId);
                if (automation) {
                    automation.active = !automation.active;
                } else {
                    automation = {
                        id: Date.now(),
                        name: `Automação ${eventId}`,
                        event: eventId,
                        emails: [],
                        active: true,
                        delay: 0
                    };
                    this.automations.push(automation);
                }

                this.saveData();
                this.renderAutomations();
                this.renderStats();
            }

            configureIntegration(integrationId) {
                const value = window.prompt('Digite sua API Key ou configuração:');
                if (value !== null) {
                    this.integrations[integrationId] = {
                        connected: value.length > 0,
                        apiKey: value
                    };
                    this.saveData();
                    this.renderIntegrations();
                    this.showNotification(`${integrationId} ${value ? 'conectado' : 'desconectado'} com sucesso!`);
                }
            }

            getLanguageLabel(language) {
                const labels = {
                    'spanish': '🇪🇸 Espanhol',
                    'portuguese': '🇧🇷 Português',
                    'english': '🇺🇸 Inglês'
                };
                return labels[language] || language;
            }

            getTriggerLabel(schedule) {
                const labels = {
                    'immediate': '⚡ Imediato',
                    'after_register': '👤 Após cadastro',
                    'after_purchase': '💳 Após compra',
                    'weekly': '📅 Semanal'
                };
                return labels[schedule] || schedule;
            }

            showNotification(message) {
                console.log('AUTORESPONDER:', message);
            }
        }

        // General Settings Manager Inline
        class GeneralSettingsManagerInline {
            constructor() {
                this.isInitialized = false;
                this.settings = JSON.parse(localStorage.getItem('general_settings') || '{}');
                this.defaultSettings = {
                    platform: {
                        name: 'Plan de Vitalidad',
                        description: 'Transforme sua vida com hábitos saudáveis',
                        timezone: 'America/Sao_Paulo',
                        currency: 'USD',
                        url: 'https://antonio2101nj.github.io/Plan-de-Vitalidad/'
                    },
                    localization: {
                        availableLanguages: ['es', 'pt', 'en'],
                        defaultLanguage: 'es',
                        autoDetectLanguage: true,
                        dateFormat: 'DD/MM/YYYY',
                        timeFormat: '24h'
                    },
                    users: {
                        allowRegistration: true,
                        requireEmailVerification: true,
                        manualApproval: false,
                        minPasswordLength: 6,
                        sessionTimeout: 24,
                        maxDevices: 3
                    },
                    payments: {
                        defaultGateway: 'kiwify',
                        acceptedCurrencies: ['USD', 'EUR', 'BRL'],
                        refundPolicy: 7,
                        paymentRetries: 3,
                        webhookUrl: ''
                    },
                    email: {
                        senderName: 'Plan de Vitalidad',
                        senderEmail: 'noreply@plandevitalidad.com',
                        smtp: { host: '', port: 587, username: '', password: '' },
                        limits: { hour: 100, day: 1000 }
                    },
                    security: {
                        require2FA: true,
                        enableLogs: true,
                        gdprCompliance: true,
                        logRetention: 90,
                        backupFrequency: 'daily',
                        blockedIPs: []
                    }
                };
                
                // Merge default settings with saved ones
                this.settings = { ...this.defaultSettings, ...this.settings };
            }

            init() {
                if (this.isInitialized) return;
                console.log('⚙️ General Settings Manager Inline inicializado');
                this.loadSettings();
                this.bindEvents();
                this.updateStats();
                this.isInitialized = true;
            }

            loadSettings() {
                // Platform settings
                document.getElementById('platformName').value = this.settings.platform?.name || this.defaultSettings.platform.name;
                document.getElementById('platformDescription').value = this.settings.platform?.description || this.defaultSettings.platform.description;
                document.getElementById('platformTimezone').value = this.settings.platform?.timezone || this.defaultSettings.platform.timezone;
                document.getElementById('platformCurrency').value = this.settings.platform?.currency || this.defaultSettings.platform.currency;
                document.getElementById('platformUrl').value = this.settings.platform?.url || this.defaultSettings.platform.url;

                // Localization settings
                const availableLanguages = this.settings.localization?.availableLanguages || this.defaultSettings.localization.availableLanguages;
                document.getElementById('lang_spanish').checked = availableLanguages.includes('es');
                document.getElementById('lang_portuguese').checked = availableLanguages.includes('pt');
                document.getElementById('lang_english').checked = availableLanguages.includes('en');
                document.getElementById('defaultLanguage').value = this.settings.localization?.defaultLanguage || this.defaultSettings.localization.defaultLanguage;
                document.getElementById('autoDetectLanguage').checked = this.settings.localization?.autoDetectLanguage ?? this.defaultSettings.localization.autoDetectLanguage;
                document.getElementById('dateFormat').value = this.settings.localization?.dateFormat || this.defaultSettings.localization.dateFormat;
                document.getElementById('timeFormat').value = this.settings.localization?.timeFormat || this.defaultSettings.localization.timeFormat;

                // User settings
                document.getElementById('allowRegistration').checked = this.settings.users?.allowRegistration ?? this.defaultSettings.users.allowRegistration;
                document.getElementById('requireEmailVerification').checked = this.settings.users?.requireEmailVerification ?? this.defaultSettings.users.requireEmailVerification;
                document.getElementById('manualApproval').checked = this.settings.users?.manualApproval ?? this.defaultSettings.users.manualApproval;
                document.getElementById('minPasswordLength').value = this.settings.users?.minPasswordLength || this.defaultSettings.users.minPasswordLength;
                document.getElementById('sessionTimeout').value = this.settings.users?.sessionTimeout || this.defaultSettings.users.sessionTimeout;
                document.getElementById('maxDevices').value = this.settings.users?.maxDevices || this.defaultSettings.users.maxDevices;

                // Payment settings
                document.getElementById('defaultGateway').value = this.settings.payments?.defaultGateway || this.defaultSettings.payments.defaultGateway;
                const acceptedCurrencies = this.settings.payments?.acceptedCurrencies || this.defaultSettings.payments.acceptedCurrencies;
                document.getElementById('currency_usd').checked = acceptedCurrencies.includes('USD');
                document.getElementById('currency_eur').checked = acceptedCurrencies.includes('EUR');
                document.getElementById('currency_brl').checked = acceptedCurrencies.includes('BRL');
                document.getElementById('refundPolicy').value = this.settings.payments?.refundPolicy || this.defaultSettings.payments.refundPolicy;
                document.getElementById('paymentRetries').value = this.settings.payments?.paymentRetries || this.defaultSettings.payments.paymentRetries;
                document.getElementById('webhookUrl').value = this.settings.payments?.webhookUrl || this.defaultSettings.payments.webhookUrl;

                // Email settings
                document.getElementById('senderName').value = this.settings.email?.senderName || this.defaultSettings.email.senderName;
                document.getElementById('senderEmail').value = this.settings.email?.senderEmail || this.defaultSettings.email.senderEmail;
                document.getElementById('smtpHost').value = this.settings.email?.smtp?.host || '';
                document.getElementById('smtpPort').value = this.settings.email?.smtp?.port || this.defaultSettings.email.smtp.port;
                document.getElementById('smtpUsername').value = this.settings.email?.smtp?.username || '';
                document.getElementById('smtpPassword').value = this.settings.email?.smtp?.password || '';
                document.getElementById('emailLimitHour').value = this.settings.email?.limits?.hour || this.defaultSettings.email.limits.hour;
                document.getElementById('emailLimitDay').value = this.settings.email?.limits?.day || this.defaultSettings.email.limits.day;

                // Security settings
                document.getElementById('require2FA').checked = this.settings.security?.require2FA ?? this.defaultSettings.security.require2FA;
                document.getElementById('enableLogs').checked = this.settings.security?.enableLogs ?? this.defaultSettings.security.enableLogs;
                document.getElementById('gdprCompliance').checked = this.settings.security?.gdprCompliance ?? this.defaultSettings.security.gdprCompliance;
                document.getElementById('logRetention').value = this.settings.security?.logRetention || this.defaultSettings.security.logRetention;
                document.getElementById('backupFrequency').value = this.settings.security?.backupFrequency || this.defaultSettings.security.backupFrequency;
                document.getElementById('blockedIPs').value = (this.settings.security?.blockedIPs || []).join('\n');
            }

            bindEvents() {
                // Platform settings
                document.getElementById('platformName').addEventListener('input', (e) => {
                    this.updateSetting('platform', 'name', e.target.value);
                });
                document.getElementById('platformDescription').addEventListener('input', (e) => {
                    this.updateSetting('platform', 'description', e.target.value);
                });
                document.getElementById('platformTimezone').addEventListener('change', (e) => {
                    this.updateSetting('platform', 'timezone', e.target.value);
                });
                document.getElementById('platformCurrency').addEventListener('change', (e) => {
                    this.updateSetting('platform', 'currency', e.target.value);
                });
                document.getElementById('platformUrl').addEventListener('input', (e) => {
                    this.updateSetting('platform', 'url', e.target.value);
                });

                // User settings events
                document.getElementById('allowRegistration').addEventListener('change', (e) => {
                    this.updateSetting('users', 'allowRegistration', e.target.checked);
                });

                // Add more event listeners for other settings...
            }

            updateSetting(category, key, value) {
                if (!this.settings[category]) {
                    this.settings[category] = {};
                }
                this.settings[category][key] = value;
                localStorage.setItem('general_settings', JSON.stringify(this.settings));
            }

            updateStats() {
                // Count active integrations
                const integrations = JSON.parse(localStorage.getItem('autoresponder_integrations') || '{}');
                const activeCount = Object.values(integrations).filter(int => int.connected).length;
                document.getElementById('activeIntegrations').textContent = activeCount;
                
                // Update last backup
                const lastBackup = localStorage.getItem('last_backup_date') || 'Nunca';
                document.getElementById('lastBackup').textContent = lastBackup === 'Nunca' ? lastBackup : 'Hoje';
            }

            saveAllSettings() {
                this.gatherFormData();
                localStorage.setItem('general_settings', JSON.stringify(this.settings));
                this.showNotification('Todas as configurações foram salvas com sucesso!', 'success');
                this.updateStats();
            }

            gatherFormData() {
                // Platform
                this.settings.platform = {
                    name: document.getElementById('platformName').value,
                    description: document.getElementById('platformDescription').value,
                    timezone: document.getElementById('platformTimezone').value,
                    currency: document.getElementById('platformCurrency').value,
                    url: document.getElementById('platformUrl').value
                };

                // Localization
                const availableLanguages = [];
                if (document.getElementById('lang_spanish').checked) availableLanguages.push('es');
                if (document.getElementById('lang_portuguese').checked) availableLanguages.push('pt');
                if (document.getElementById('lang_english').checked) availableLanguages.push('en');

                this.settings.localization = {
                    availableLanguages,
                    defaultLanguage: document.getElementById('defaultLanguage').value,
                    autoDetectLanguage: document.getElementById('autoDetectLanguage').checked,
                    dateFormat: document.getElementById('dateFormat').value,
                    timeFormat: document.getElementById('timeFormat').value
                };

                // Users
                this.settings.users = {
                    allowRegistration: document.getElementById('allowRegistration').checked,
                    requireEmailVerification: document.getElementById('requireEmailVerification').checked,
                    manualApproval: document.getElementById('manualApproval').checked,
                    minPasswordLength: parseInt(document.getElementById('minPasswordLength').value),
                    sessionTimeout: parseInt(document.getElementById('sessionTimeout').value),
                    maxDevices: parseInt(document.getElementById('maxDevices').value)
                };

                // Continue gathering other settings...
            }

            exportSettings() {
                const data = {
                    settings: this.settings,
                    exported_at: new Date().toISOString(),
                    version: '1.0'
                };
                
                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `configuracoes-gerais-${new Date().toISOString().split('T')[0]}.json`;
                a.click();
                URL.revokeObjectURL(url);
                
                this.showNotification('Configurações exportadas com sucesso!', 'success');
            }

            importSettings() {
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = '.json';
                input.onchange = (e) => {
                    const file = e.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            try {
                                const data = JSON.parse(e.target.result);
                                if (data.settings) {
                                    this.settings = data.settings;
                                    this.loadSettings();
                                    this.saveAllSettings();
                                    this.showNotification('Configurações importadas com sucesso!', 'success');
                                } else {
                                    throw new Error('Formato de arquivo inválido');
                                }
                            } catch (error) {
                                this.showNotification('Erro ao importar arquivo: ' + error.message, 'error');
                            }
                        };
                        reader.readAsText(file);
                    }
                };
                input.click();
            }

            resetToDefaults() {
                if (confirm('Tem certeza que deseja restaurar todas as configurações para os valores padrão? Esta ação não pode ser desfeita.')) {
                    this.settings = { ...this.defaultSettings };
                    this.loadSettings();
                    this.saveAllSettings();
                    this.showNotification('Configurações restauradas para os padrões!', 'success');
                }
            }

            testAllSystems() {
                this.showNotification('Iniciando teste dos sistemas...', 'info');
                
                // Simulate system tests
                setTimeout(() => {
                    const results = [
                        '✅ Conectividade: OK',
                        '✅ Banco de dados: OK',
                        '✅ E-mail: OK',
                        '✅ APIs: OK',
                        '⚠️ Backup: Pendente'
                    ];
                    
                    const resultHtml = results.join('<br>');
                    this.showNotification(`Teste concluído:<br>${resultHtml}`, 'success');
                }, 2000);
            }

            previewChanges() {
                const changes = this.getUnsavedChanges();
                if (changes.length === 0) {
                    this.showNotification('Não há mudanças pendentes.', 'info');
                } else {
                    const changesList = changes.map(change => `• ${change}`).join('<br>');
                    this.showNotification(`Mudanças pendentes:<br>${changesList}`, 'info');
                }
            }

            getUnsavedChanges() {
                const savedSettings = JSON.parse(localStorage.getItem('general_settings') || '{}');
                const changes = [];
                
                // Compare current form values with saved settings
                if (document.getElementById('platformName').value !== (savedSettings.platform?.name || this.defaultSettings.platform.name)) {
                    changes.push('Nome da plataforma alterado');
                }
                
                // Add more comparisons...
                
                return changes;
            }

            resetCategory() {
                this.showNotification('Funcionalidade de restaurar seção será implementada em breve.', 'info');
            }

            showNotification(message, type = 'info') {
                // Remove existing notifications
                const existingNotifications = document.querySelectorAll('.notification');
                existingNotifications.forEach(notification => notification.remove());

                // Create new notification
                const notification = document.createElement('div');
                notification.className = `notification ${type}`;
                notification.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <i class="fas fa-${type === 'success' ? 'check' : type === 'error' ? 'times' : 'info'}-circle"></i>
                        <span>${message}</span>
                    </div>
                `;

                document.body.appendChild(notification);
                
                // Show notification
                setTimeout(() => notification.classList.add('show'), 100);
                
                // Hide notification after 5 seconds
                setTimeout(() => {
                    notification.classList.remove('show');
                    setTimeout(() => notification.remove(), 300);
                }, 5000);
            }
        }

        // Carousel Manager Inline
        class CarouselManagerInline {
            constructor() {
                this.isInitialized = false;
                this.activeTab = 'main';
                this.carouselImages = JSON.parse(localStorage.getItem('carousel_images') || '[]');
                this.sectionBanners = JSON.parse(localStorage.getItem('section_banners') || '{}');
                this.templates = JSON.parse(localStorage.getItem('carousel_templates') || '[]');
                this.analytics = JSON.parse(localStorage.getItem('carousel_analytics') || '{}');
                this.settings = JSON.parse(localStorage.getItem('carousel_settings') || '{}');

                // Initialize default data
                this.initializeDefaultData();
            }

            init() {
                if (this.isInitialized) return;
                console.log('🎠 Carousel Manager Inline inicializado');
                this.bindEvents();
                this.renderCurrentTab();
                this.updateStats();
                this.isInitialized = true;
            }

            initializeDefaultData() {
                // Initialize with sample data if empty
                if (this.carouselImages.length === 0) {
                    this.carouselImages = [
                        {
                            id: 1,
                            title: 'Bem-vindo ao Plan de Vitalidad',
                            description: 'Transforme sua vida com hábitos saudáveis',
                            imageUrl: 'https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=800&h=400&fit=crop',
                            linkUrl: '#challenges',
                            position: 1,
                            active: true,
                            views: 1250,
                            clicks: 89,
                            language: 'spanish'
                        },
                        {
                            id: 2,
                            title: 'Desafio 30 Dias Fitness',
                            description: 'Seu corpo perfeito em apenas 30 dias',
                            imageUrl: 'https://images.unsplash.com/photo-1538805060514-97d9cc17730c?w=800&h=400&fit=crop',
                            linkUrl: '#store',
                            position: 2,
                            active: true,
                            views: 980,
                            clicks: 156,
                            language: 'spanish'
                        }
                    ];
                }

                if (Object.keys(this.sectionBanners).length === 0) {
                    this.sectionBanners = {
                        home: null,
                        challenges: null,
                        store: {
                            imageUrl: 'https://images.unsplash.com/photo-1540553016722-983e48a2cd10?w=800&h=200&fit=crop',
                            title: 'Produtos Premium',
                            description: 'Acesse conteúdo exclusivo'
                        },
                        profile: null,
                        support: null,
                        premium: null
                    };
                }

                if (this.templates.length === 0) {
                    this.templates = [
                        {
                            id: 1,
                            name: 'Motivação Fitness',
                            category: 'fitness',
                            thumbnail: 'https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=300&h=150&fit=crop',
                            premium: false
                        },
                        {
                            id: 2,
                            name: 'Nutrição Saudável',
                            category: 'nutrition',
                            thumbnail: 'https://images.unsplash.com/photo-1490818387583-1baba5e638af?w=300&h=150&fit=crop',
                            premium: true
                        }
                    ];
                }

                this.saveData();
            }

            bindEvents() {
                // Tab navigation
                document.querySelectorAll('.carousel-tab-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        this.switchCarouselTab(e.target.dataset.carouselTab);
                    });
                });

                // Main carousel events
                const addImageBtn = document.getElementById('addCarouselImageBtn');
                if (addImageBtn) {
                    addImageBtn.addEventListener('click', () => this.openImageModal());
                }

                const importImagesBtn = document.getElementById('importCarouselImagesBtn');
                if (importImagesBtn) {
                    importImagesBtn.addEventListener('click', () => this.importMultipleImages());
                }

                const previewBtn = document.getElementById('previewCarouselBtn');
                if (previewBtn) {
                    previewBtn.addEventListener('click', () => this.previewCarousel());
                }

                // Settings events
                const autoplayToggle = document.getElementById('carouselAutoplay');
                if (autoplayToggle) {
                    autoplayToggle.addEventListener('change', (e) => {
                        this.settings.autoplay = e.target.checked;
                        this.saveData();
                    });
                }

                const intervalInput = document.getElementById('carouselInterval');
                if (intervalInput) {
                    intervalInput.addEventListener('input', (e) => {
                        this.settings.interval = parseInt(e.target.value);
                        this.saveData();
                    });
                }

                // Banner section events
                document.querySelectorAll('.banner-section-card button').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const section = e.target.closest('.banner-section-card').dataset.section;
                        this.configureBanner(section);
                    });
                });

                // Template events
                const createTemplateBtn = document.getElementById('createTemplateBtn');
                if (createTemplateBtn) {
                    createTemplateBtn.addEventListener('click', () => this.createTemplate());
                }

                // Editor events
                this.initializeVisualEditor();

                // Analytics events
                const analyticsDateRange = document.getElementById('analyticsDateRange');
                if (analyticsDateRange) {
                    analyticsDateRange.addEventListener('change', (e) => {
                        this.updateAnalytics(e.target.value);
                    });
                }
            }

            switchCarouselTab(tabId) {
                // Update active tab button
                document.querySelectorAll('.carousel-tab-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.querySelector(`[data-carousel-tab="${tabId}"]`).classList.add('active');

                // Update active tab content
                document.querySelectorAll('.carousel-tab-content').forEach(content => {
                    content.classList.remove('active');
                });
                document.getElementById(`carousel${tabId.charAt(0).toUpperCase() + tabId.slice(1)}Tab`).classList.add('active');

                this.activeTab = tabId;
                this.renderCurrentTab();
            }

            renderCurrentTab() {
                switch (this.activeTab) {
                    case 'main':
                        this.renderCarouselImages();
                        break;
                    case 'banners':
                        this.renderSectionBanners();
                        break;
                    case 'templates':
                        this.renderTemplates();
                        break;
                    case 'editor':
                        this.renderEditor();
                        break;
                    case 'analytics':
                        this.renderAnalytics();
                        break;
                }
            }

            renderCarouselImages() {
                const grid = document.getElementById('carouselImagesGrid');
                if (!grid) return;

                if (this.carouselImages.length === 0) {
                    grid.innerHTML = `
                        <div class="empty-state">
                            <i class="fas fa-images"></i>
                            <h3>Nenhuma imagem no carrossel</h3>
                            <p>Adicione a primeira imagem para começar</p>
                            <button class="btn btn-primary" onclick="carouselManagerInline.openImageModal()">
                                <i class="fas fa-plus"></i>
                                Adicionar Primeira Imagem
                            </button>
                        </div>
                    `;
                    return;
                }

                const html = this.carouselImages.map(image => `
                    <div class="carousel-image-card" data-id="${image.id}">
                        <div class="image-preview">
                            <img src="${image.imageUrl}" alt="${image.title}" loading="lazy">
                            <div class="image-overlay">
                                <button class="btn btn-small btn-primary" onclick="carouselManagerInline.editImage(${image.id})">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn-small btn-secondary" onclick="carouselManagerInline.previewImage(${image.id})">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn btn-small btn-danger" onclick="carouselManagerInline.deleteImage(${image.id})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <div class="image-info">
                            <h4>${image.title}</h4>
                            <p>${image.description}</p>
                            <div class="image-stats">
                                <span><i class="fas fa-eye"></i> ${image.views || 0}</span>
                                <span><i class="fas fa-mouse-pointer"></i> ${image.clicks || 0}</span>
                                <span class="ctr">CTR: ${image.views ? ((image.clicks / image.views) * 100).toFixed(1) : 0}%</span>
                            </div>
                            <div class="image-controls">
                                <span class="position-badge">Posição ${image.position}</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" ${image.active ? 'checked' : ''} 
                                           onchange="carouselManagerInline.toggleImageStatus(${image.id})">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                `).join('');

                grid.innerHTML = html;
            }

            renderSectionBanners() {
                const sections = ['home', 'challenges', 'store', 'profile', 'support', 'premium'];
                
                sections.forEach(section => {
                    const preview = document.getElementById(`${section}BannerPreview`);
                    if (!preview) return;

                    const banner = this.sectionBanners[section];
                    if (banner) {
                        preview.innerHTML = `
                            <img src="${banner.imageUrl}" alt="${banner.title}" loading="lazy">
                            <div class="banner-info">
                                <h5>${banner.title}</h5>
                                <p>${banner.description}</p>
                            </div>
                        `;
                        preview.classList.remove('no-banner');
                    } else {
                        preview.innerHTML = '<span class="no-banner">Nenhum banner configurado</span>';
                        preview.classList.add('no-banner');
                    }
                });
            }

            renderTemplates() {
                const grid = document.getElementById('templatesGrid');
                if (!grid) return;

                const filter = document.getElementById('templateCategoryFilter').value;
                const filteredTemplates = filter ? 
                    this.templates.filter(t => t.category === filter) : 
                    this.templates;

                const html = filteredTemplates.map(template => `
                    <div class="template-card">
                        <div class="template-preview">
                            <img src="${template.thumbnail}" alt="${template.name}" loading="lazy">
                            ${template.premium ? '<span class="premium-badge">Premium</span>' : ''}
                        </div>
                        <div class="template-info">
                            <h4>${template.name}</h4>
                            <p>Categoria: ${this.getCategoryLabel(template.category)}</p>
                            <div class="template-actions">
                                <button class="btn btn-small btn-primary" onclick="carouselManagerInline.useTemplate(${template.id})">
                                    <i class="fas fa-download"></i>
                                    Usar Template
                                </button>
                                <button class="btn btn-small btn-secondary" onclick="carouselManagerInline.editTemplate(${template.id})">
                                    <i class="fas fa-edit"></i>
                                    Editar
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');

                grid.innerHTML = html || '<div class="empty-state"><p>Nenhum template encontrado</p></div>';
            }

            renderEditor() {
                // Initialize canvas if not already done
                const canvas = document.getElementById('visualEditor');
                if (canvas && !this.editorInitialized) {
                    this.initializeCanvas(canvas);
                    this.editorInitialized = true;
                }
            }

            renderAnalytics() {
                this.renderPerformanceChart();
                this.renderTopImagesList();
                this.renderClickRateChart();
                this.renderEngagementTimeChart();
                this.renderAnalyticsTable();
            }

            updateStats() {
                const totalImages = this.carouselImages.filter(img => img.active).length;
                const totalViews = this.carouselImages.reduce((sum, img) => sum + (img.views || 0), 0);
                const totalClicks = this.carouselImages.reduce((sum, img) => sum + (img.clicks || 0), 0);
                const conversionRate = totalViews > 0 ? ((totalClicks / totalViews) * 100).toFixed(1) : 0;

                document.getElementById('totalCarouselImages').textContent = totalImages;
                document.getElementById('totalCarouselViews').textContent = totalViews.toLocaleString();
                document.getElementById('totalCarouselClicks').textContent = totalClicks.toLocaleString();
                document.getElementById('carouselConversionRate').textContent = `${conversionRate}%`;
            }

            // Modal and action methods
            openImageModal(imageId = null) {
                const isEdit = imageId !== null;
                const image = isEdit ? this.carouselImages.find(img => img.id === imageId) : null;

                const modalHtml = `
                    <div class="modal active" id="imageModal">
                        <div class="modal-overlay" onclick="carouselManagerInline.closeModal()"></div>
                        <div class="modal-content">
                            <div class="modal-header">
                                <h3>${isEdit ? 'Editar' : 'Adicionar'} Imagem do Carrossel</h3>
                                <button class="modal-close" onclick="carouselManagerInline.closeModal()">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            <div class="modal-body">
                                <form id="imageForm">
                                    <div class="form-group">
                                        <label>Título *</label>
                                        <input type="text" id="imageTitle" value="${image?.title || ''}" required>
                                    </div>
                                    <div class="form-group">
                                        <label>Descrição</label>
                                        <textarea id="imageDescription" rows="3">${image?.description || ''}</textarea>
                                    </div>
                                    <div class="form-group">
                                        <label>URL da Imagem *</label>
                                        <input type="url" id="imageUrl" value="${image?.imageUrl || ''}" required>
                                        <small>Recomendado: 800x400px (proporção 2:1)</small>
                                    </div>
                                    <div class="form-group">
                                        <label>Link de Destino</label>
                                        <input type="text" id="imageLinkUrl" value="${image?.linkUrl || ''}" 
                                               placeholder="#challenges, #store, https://...">
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label>Posição</label>
                                            <input type="number" id="imagePosition" value="${image?.position || this.carouselImages.length + 1}" min="1">
                                        </div>
                                        <div class="form-group">
                                            <label>Idioma</label>
                                            <select id="imageLanguage">
                                                <option value="spanish" ${image?.language === 'spanish' ? 'selected' : ''}>🇪🇸 Espanhol</option>
                                                <option value="portuguese" ${image?.language === 'portuguese' ? 'selected' : ''}>🇧🇷 Português</option>
                                                <option value="english" ${image?.language === 'english' ? 'selected' : ''}>🇺🇸 Inglês</option>
                                                <option value="all" ${image?.language === 'all' ? 'selected' : ''}>🌍 Todos</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="checkbox-label">
                                            <input type="checkbox" id="imageActive" ${image?.active !== false ? 'checked' : ''}>
                                            <span class="checkbox-custom"></span>
                                            Imagem ativa
                                        </label>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button class="btn btn-secondary" onclick="carouselManagerInline.closeModal()">Cancelar</button>
                                <button class="btn btn-primary" onclick="carouselManagerInline.saveImage(${imageId})">
                                    ${isEdit ? 'Atualizar' : 'Adicionar'} Imagem
                                </button>
                            </div>
                        </div>
                    </div>
                `;

                document.body.insertAdjacentHTML('beforeend', modalHtml);
            }

            saveImage(imageId = null) {
                const isEdit = imageId !== null;
                const formData = {
                    title: document.getElementById('imageTitle').value,
                    description: document.getElementById('imageDescription').value,
                    imageUrl: document.getElementById('imageUrl').value,
                    linkUrl: document.getElementById('imageLinkUrl').value,
                    position: parseInt(document.getElementById('imagePosition').value),
                    language: document.getElementById('imageLanguage').value,
                    active: document.getElementById('imageActive').checked
                };

                if (!formData.title || !formData.imageUrl) {
                    alert('Título e URL da imagem são obrigatórios');
                    return;
                }

                if (isEdit) {
                    const index = this.carouselImages.findIndex(img => img.id === imageId);
                    if (index !== -1) {
                        this.carouselImages[index] = { ...this.carouselImages[index], ...formData };
                    }
                } else {
                    const newImage = {
                        id: Date.now(),
                        ...formData,
                        views: 0,
                        clicks: 0,
                        createdAt: new Date().toISOString()
                    };
                    this.carouselImages.push(newImage);
                }

                this.saveData();
                this.renderCarouselImages();
                this.updateStats();
                this.closeModal();
                this.showNotification(`Imagem ${isEdit ? 'atualizada' : 'adicionada'} com sucesso!`);
            }

            deleteImage(imageId) {
                if (confirm('Tem certeza que deseja excluir esta imagem?')) {
                    this.carouselImages = this.carouselImages.filter(img => img.id !== imageId);
                    this.saveData();
                    this.renderCarouselImages();
                    this.updateStats();
                    this.showNotification('Imagem excluída com sucesso!');
                }
            }

            toggleImageStatus(imageId) {
                const image = this.carouselImages.find(img => img.id === imageId);
                if (image) {
                    image.active = !image.active;
                    this.saveData();
                    this.updateStats();
                }
            }

            // Additional utility methods
            getCategoryLabel(category) {
                const labels = {
                    'motivation': '🔥 Motivação',
                    'health': '🏃‍♀️ Saúde',
                    'fitness': '💪 Fitness',
                    'nutrition': '🥗 Nutrição',
                    'mental': '🧠 Bem-estar Mental',
                    'offers': '🎁 Ofertas',
                    'events': '📅 Eventos'
                };
                return labels[category] || category;
            }

            initializeCanvas(canvas) {
                const ctx = canvas.getContext('2d');
                ctx.fillStyle = '#f8f9fa';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Add placeholder text
                ctx.fillStyle = '#6c757d';
                ctx.font = '24px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('Editor Visual - Em Desenvolvimento', canvas.width/2, canvas.height/2);
            }

            closeModal() {
                const modal = document.querySelector('.modal.active');
                if (modal) {
                    modal.remove();
                }
            }

            saveData() {
                localStorage.setItem('carousel_images', JSON.stringify(this.carouselImages));
                localStorage.setItem('section_banners', JSON.stringify(this.sectionBanners));
                localStorage.setItem('carousel_templates', JSON.stringify(this.templates));
                localStorage.setItem('carousel_analytics', JSON.stringify(this.analytics));
                localStorage.setItem('carousel_settings', JSON.stringify(this.settings));
            }

            showNotification(message, type = 'info') {
                console.log('CAROUSEL:', message);
                
                // Remove existing notifications
                const existingNotifications = document.querySelectorAll('.notification');
                existingNotifications.forEach(notification => notification.remove());

                // Create new notification
                const notification = document.createElement('div');
                notification.className = `notification ${type}`;
                notification.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <i class="fas fa-${type === 'success' ? 'check' : type === 'error' ? 'times' : 'info'}-circle"></i>
                        <span>${message}</span>
                    </div>
                `;

                document.body.appendChild(notification);
                
                // Show notification
                setTimeout(() => notification.classList.add('show'), 100);
                
                // Hide notification after 4 seconds
                setTimeout(() => {
                    notification.classList.remove('show');
                    setTimeout(() => notification.remove(), 300);
                }, 4000);
            }

            // Preview individual image
            previewImage(imageId) {
                const image = this.carouselImages.find(img => img.id === imageId);
                if (!image) return;

                const modalHtml = `
                    <div class="modal active" id="imagePreviewModal">
                        <div class="modal-overlay" onclick="carouselManagerInline.closeModal()"></div>
                        <div class="modal-content large">
                            <div class="modal-header">
                                <h3>Preview: ${image.title}</h3>
                                <button class="modal-close" onclick="carouselManagerInline.closeModal()">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            <div class="modal-body">
                                <div class="image-preview-container">
                                    <img src="${image.imageUrl}" alt="${image.title}" style="width: 100%; height: auto; border-radius: 8px;">
                                </div>
                                <div class="image-details">
                                    <h4>${image.title}</h4>
                                    <p>${image.description}</p>
                                    <div class="image-meta">
                                        <span><strong>Idioma:</strong> ${this.getLanguageLabel(image.language)}</span>
                                        <span><strong>Posição:</strong> ${image.position}</span>
                                        <span><strong>Status:</strong> ${image.active ? '✅ Ativo' : '❌ Inativo'}</span>
                                    </div>
                                    ${image.linkUrl ? `<div class="link-info"><strong>Link de destino:</strong> ${image.linkUrl}</div>` : ''}
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button class="btn btn-secondary" onclick="carouselManagerInline.closeModal()">Fechar</button>
                                <button class="btn btn-primary" onclick="carouselManagerInline.editImage(${imageId}); carouselManagerInline.closeModal();">
                                    <i class="fas fa-edit"></i>
                                    Editar Imagem
                                </button>
                            </div>
                        </div>
                    </div>
                `;

                document.body.insertAdjacentHTML('beforeend', modalHtml);
            }

            getLanguageLabel(language) {
                const labels = {
                    'spanish': '🇪🇸 Espanhol',
                    'portuguese': '🇧🇷 Português',
                    'english': '🇺🇸 Inglês',
                    'all': '🌍 Todos os idiomas'
                };
                return labels[language] || language;
            }

            // Enhanced placeholder methods for advanced features
            importMultipleImages() {
                this.showNotification('📂 Importação múltipla: Funcionalidade em desenvolvimento', 'info');
            }

            previewCarousel() {
                this.showNotification('🎠 Preview do carrossel completo será implementado em breve', 'info');
            }

            configureBanner(section) {
                const sectionNames = {
                    'home': '🏠 Home',
                    'challenges': '🏆 Desafios',
                    'store': '🛍️ Loja',
                    'profile': '👤 Perfil',
                    'support': '💬 Suporte',
                    'premium': '👑 Premium'
                };
                this.showNotification(`🎯 Configuração de banner da seção ${sectionNames[section]} em desenvolvimento`, 'info');
            }

            createTemplate() {
                this.showNotification('🎨 Editor de templates personalizado será implementado', 'info');
            }

            useTemplate(id) {
                const template = this.templates.find(t => t.id === id);
                if (template) {
                    this.showNotification(`✨ Aplicando template "${template.name}"... (em desenvolvimento)`, 'info');
                }
            }

            editTemplate(id) {
                const template = this.templates.find(t => t.id === id);
                if (template) {
                    this.showNotification(`✏️ Editando template "${template.name}"... (em desenvolvimento)`, 'info');
                }
            }

            initializeVisualEditor() {
                // Bind editor tool events when they become available
                const toolButtons = ['editorUploadBtn', 'editorTextBtn', 'editorShapesBtn', 'editorFiltersBtn'];
                toolButtons.forEach(btnId => {
                    const btn = document.getElementById(btnId);
                    if (btn) {
                        btn.addEventListener('click', () => {
                            this.showNotification(`🛠️ Ferramenta ${btnId.replace('editor', '').replace('Btn', '')} em desenvolvimento`, 'info');
                        });
                    }
                });
            }

            renderPerformanceChart() {
                const canvas = document.getElementById('performanceChart');
                if (canvas) {
                    const ctx = canvas.getContext('2d');
                    ctx.fillStyle = '#f8f9fa';
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                    ctx.fillStyle = '#6c757d';
                    ctx.font = '14px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText('Gráfico de Performance', canvas.width/2, canvas.height/2);
                }
            }

            renderTopImagesList() {
                const container = document.getElementById('topImagesList');
                if (container) {
                    const topImages = this.carouselImages
                        .sort((a, b) => (b.views || 0) - (a.views || 0))
                        .slice(0, 5);

                    if (topImages.length > 0) {
                        container.innerHTML = topImages.map((img, index) => `
                            <div class="top-image-item">
                                <span class="rank">#${index + 1}</span>
                                <span class="title">${img.title}</span>
                                <span class="views">${img.views || 0} views</span>
                            </div>
                        `).join('');
                    } else {
                        container.innerHTML = '<p class="no-data">Nenhum dado disponível</p>';
                    }
                }
            }

            renderClickRateChart() {
                const canvas = document.getElementById('clickRateChart');
                if (canvas) {
                    const ctx = canvas.getContext('2d');
                    ctx.fillStyle = '#f8f9fa';
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                    ctx.fillStyle = '#6c757d';
                    ctx.font = '14px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText('Taxa de Cliques por Imagem', canvas.width/2, canvas.height/2);
                }
            }

            renderEngagementTimeChart() {
                const canvas = document.getElementById('engagementTimeChart');
                if (canvas) {
                    const ctx = canvas.getContext('2d');
                    ctx.fillStyle = '#f8f9fa';
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                    ctx.fillStyle = '#6c757d';
                    ctx.font = '14px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText('Horários de Maior Engajamento', canvas.width/2, canvas.height/2);
                }
            }

            renderAnalyticsTable() {
                const tbody = document.getElementById('analyticsTableBody');
                if (tbody) {
                    if (this.carouselImages.length > 0) {
                        tbody.innerHTML = this.carouselImages.map(img => `
                            <tr>
                                <td>
                                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                                        <img src="${img.imageUrl}" alt="${img.title}" style="width: 40px; height: 40px; object-fit: cover; border-radius: 4px;">
                                        ${img.title}
                                    </div>
                                </td>
                                <td>${(img.views || 0).toLocaleString()}</td>
                                <td>${(img.clicks || 0).toLocaleString()}</td>
                                <td>${img.views ? ((img.clicks / img.views) * 100).toFixed(1) : 0}%</td>
                                <td>2.5min</td>
                                <td>📱 Mobile (65%)</td>
                                <td>${new Date().toLocaleDateString()}</td>
                            </tr>
                        `).join('');
                    } else {
                        tbody.innerHTML = '<tr><td colspan="7" style="text-align: center; color: #6c757d;">Nenhuma imagem para analisar</td></tr>';
                    }
                }
            }

            updateAnalytics(range) {
                this.showNotification(`📊 Atualizando analytics para ${range === 'custom' ? 'período personalizado' : `últimos ${range} dias`}`, 'info');
                this.renderAnalytics();
            }
        }

        // Initialize inline systems
        let appCustomizationInline, supportManagerInline, autoresponderManagerInline, generalSettingsManagerInline, carouselManagerInline;

        document.addEventListener('DOMContentLoaded', function() {
            const originalSwitchTab = window.switchTab;
            if (originalSwitchTab) {
                window.switchTab = function(tabId) {
                    originalSwitchTab(tabId);
                    
                    if (tabId === 'app-customization' && !appCustomizationInline) {
                        setTimeout(() => {
                            appCustomizationInline = new AppCustomizationInline();
                            appCustomizationInline.init();
                        }, 100);
                    }
                    
                    if (tabId === 'support' && !supportManagerInline) {
                        setTimeout(() => {
                            supportManagerInline = new SupportManagerInline();
                            supportManagerInline.init();
                        }, 100);
                    }

                    if (tabId === 'autoresponder' && !autoresponderManagerInline) {
                        setTimeout(() => {
                            autoresponderManagerInline = new AutoresponderManagerInline();
                            autoresponderManagerInline.init();
                        }, 100);
                    }

                    if (tabId === 'general-settings' && !generalSettingsManagerInline) {
                        setTimeout(() => {
                            generalSettingsManagerInline = new GeneralSettingsManagerInline();
                            generalSettingsManagerInline.init();
                        }, 100);
                    }

                    if (tabId === 'carousel' && !carouselManagerInline) {
                        setTimeout(() => {
                            carouselManagerInline = new CarouselManagerInline();
                            carouselManagerInline.init();
                        }, 100);
                    }
                };
            }
        });

        // Global functions for HTML onclick events
        window.generalSettingsManager = {
            exportSettings: () => generalSettingsManagerInline?.exportSettings(),
            importSettings: () => generalSettingsManagerInline?.importSettings(),
            resetToDefaults: () => generalSettingsManagerInline?.resetToDefaults(),
            testAllSystems: () => generalSettingsManagerInline?.testAllSystems(),
            previewChanges: () => generalSettingsManagerInline?.previewChanges(),
            resetCategory: () => generalSettingsManagerInline?.resetCategory(),
            saveAllSettings: () => generalSettingsManagerInline?.saveAllSettings()
        };

        // Global functions for Carousel Manager
        window.carouselManagerInline = {
            openImageModal: (id) => carouselManagerInline?.openImageModal(id),
            editImage: (id) => carouselManagerInline?.openImageModal(id),
            previewImage: (id) => carouselManagerInline?.previewImage(id),
            deleteImage: (id) => carouselManagerInline?.deleteImage(id),
            toggleImageStatus: (id) => carouselManagerInline?.toggleImageStatus(id),
            saveImage: (id) => carouselManagerInline?.saveImage(id),
            closeModal: () => carouselManagerInline?.closeModal(),
            useTemplate: (id) => carouselManagerInline?.useTemplate(id),
            editTemplate: (id) => carouselManagerInline?.editTemplate(id)
        };
    </script>
    <link rel="stylesheet" href="store-styles.css">
    <link rel="stylesheet" href="sales-styles.css">
    <link rel="stylesheet" href="notifications-styles.css">
    <link rel="stylesheet" href="reports-styles.css">
    <link rel="stylesheet" href="integrations-styles.css">
    <link rel="stylesheet" href="gamification-styles.css">
    <link rel="stylesheet" href="creatives-styles.css">
    <link rel="stylesheet" href="content-styles.css">
    <script>
        // Verificar autenticação ao carregar a página
        document.addEventListener('DOMContentLoaded', function() {
            // Verificar se usuário está logado e é admin
            if (!authSystem.isLoggedIn()) {
                window.location.href = 'admin-login.html';
                return;
            }
            
            if (!authSystem.isAdmin()) {
                alert('Acesso negado. Esta área é restrita a administradores.');
                authSystem.logout();
                return;
            }
            
            // Atualizar informações do usuário no header
            const currentUser = authSystem.getCurrentUser();
            if (currentUser) {
                // Você pode adicionar elementos para mostrar o nome do usuário
                console.log('Admin logado:', currentUser.name);
            }
        });
        
        // Logout será tratado pelo script.js automaticamente
    </script>
</body>
</html>